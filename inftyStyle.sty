%%%% **************************** STANDARD PACKAGES **************************** %%%%
%%%% *************************************************************************** %%%%

%%%% general stuff %%%%
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[english]{babel}

%%%% typography %%%%
\usepackage{lmodern}
\usepackage{microtype}
\usepackage{csquotes}
\usepackage{footmisc}%[symbol,perpage]
\setkomafont{sectioning}{\rmfamily\bfseries}
\addtokomafont{section}{\centering}
\addtokomafont{subsection}{\centering}

%%%% tables %%%%
\usepackage{tabularx}
\usepackage{booktabs}

%%%% math %%%%
\usepackage{amsmath,amsfonts,amssymb,mathtools}
\usepackage{old-arrows}
\usepackage{stmaryrd}
\SetSymbolFont{stmry}{bold}{U}{stmry}{m}{n}%otherwise we get a strange warning
\usepackage{stackengine}
\stackMath

%%%% diagrams %%%%
\usepackage{tikz-cd}
\usepackage{tikzpagenodes}
\usetikzlibrary{arrows,calc,decorations.markings,decorations.pathmorphing,patterns,patterns.meta}

%%%% miscellaneous %%%%
\usepackage{blindtext}
\usepackage{xparse}

%%%% *************************************************************************** %%%%
%%%% *************************************************************************** %%%%

%%%% ***************************** CUSTOM MATHABX ****************************** %%%%
%%%% *************************************************************************** %%%%

% Some of the mathabx characters look great, but I absolutely hate some others, like the sum sign or the \langle and \rangle brackets. So we import just a select few characters.

%%%% setting up the matha font %%%%
\DeclareFontFamily{U}{matha}{\hyphenchar\font45}
\DeclareFontShape{U}{matha}{m}{n}{
	<5> <6> <7> <8> <9> <10> gen * matha
	<10.95> matha10 <12> <14.4> <17.28> <20.74> <24.88> matha12
}{}
\DeclareSymbolFont{matha}{U}{matha}{m}{n}
\DeclareFontSubstitution{U}{matha}{m}{n}

%%%% setting up the mathx font %%%%
\DeclareFontFamily{U}{mathx}{\hyphenchar\font45}
\DeclareFontShape{U}{mathx}{m}{n}{
	<5> <6> <7> <8> <9> <10>
	<10.95> <12> <14.4> <17.28> <20.74> <24.88>
	mathx10
}{}
\DeclareSymbolFont{mathx}{U}{mathx}{m}{n}
\DeclareFontSubstitution{U}{mathx}{m}{n}


%%%% symbols to be typeset à la mathabx %%%%
\DeclareMathSymbol{*}{\mathbin}{matha}{"06}          % asterisk
\DeclareMathSymbol{\oplus}{\mathbin}{matha}{"60}     % direct sum
% big direct sum
\DeclareMathSymbol{\BigoplusMathabx}{\mathop}{mathx}{"C0}
\renewcommand{\bigoplus}{\BigoplusMathabx}
\DeclareMathSymbol{\otimes}{\mathbin}{matha}{"62}    % tensor product
% big tensor product
\DeclareMathSymbol{\BigotimesMathabx}{\mathop}{mathx}{"C2}
\renewcommand{\bigotimes}{\BigotimesMathabx}
\DeclareMathSymbol{\sim}{\mathrel}{matha}{"12}       % tilde
\DeclareMathSymbol{\approx}{\mathrel}{matha}{"13}    % approximately symbol
\DeclareMathSymbol{\simeq}{\mathrel}{matha}{"14}     % equivalence symbol

%%%% accents to be typeset à la mathabx %%%%
\DeclareMathAccent{\widetilde}{\mathord}{mathx}{"72} %tilde

%%%% delimiters to be typeset à la mathabx %%%%
\DeclareMathSymbol{(}{\mathopen}{matha}{"70}
\DeclareMathSymbol{)}{\mathclose}{matha}{"71}
\DeclareMathSymbol{[}{\mathopen}{matha}{"72}
\DeclareMathSymbol{]}{\mathclose}{matha}{"73}
\DeclareMathDelimiter{(}{matha}{"70}{mathx}{"00}
\DeclareMathDelimiter{)}{matha}{"71}{mathx}{"08}
\DeclareMathDelimiter{[}{matha}{"72}{mathx}{"10}
\DeclareMathDelimiter{]}{matha}{"73}{mathx}{"18}
\DeclareMathDelimiter{\lbrace}{\mathopen}{matha}{"74}{mathx}{"20}
\DeclareMathDelimiter{\rbrace}{\mathclose}{matha}{"75}{mathx}{"28}
\DeclareRobustCommand{\{}{\ifmmode\lbrace\else\textbraceleft\fi}
\DeclareRobustCommand{\}}{\ifmmode\rbrace\else\textbraceright\fi}

% commands for "[" and "]" so that brackets in citations are consistent with the math brackets 
\font\textmathabxmatha=matha10 at 11pt%
\newcommand{\lbracketupshape}{\textup{\textmathabxmatha \char"72}}
\newcommand{\rbracketupshape}{\textup{\textmathabxmatha \char"73}}

%%%% redefining \over- and \underbrace, as in mathabx.dcl %%%%

% pieces for over- and underbraces
\DeclareMathSymbol{\braceld}{\mathord}{mathx}{"68}
\DeclareMathSymbol{\bracemd}{\mathord}{mathx}{"69}
\DeclareMathSymbol{\bracerd}{\mathord}{mathx}{"6A}
\DeclareMathSymbol{\bracexd}{\mathord}{mathx}{"6B}
\DeclareMathSymbol{\bracelu}{\mathord}{mathx}{"6C}
\DeclareMathSymbol{\bracemu}{\mathord}{mathx}{"6D}
\DeclareMathSymbol{\braceru}{\mathord}{mathx}{"6E}
\DeclareMathSymbol{\bracexu}{\mathord}{mathx}{"6F}

% some distances
\def\braceexwd{2mu}%
\def\bracevkern{0pt}%

% extensible braces
\def\bracefill#1#2#3#4{$\m@th #1#4\mkern-\braceexwd \cleaders\hbox{$#4$}\hfill \mkern-\braceexwd#4#2#4\mkern-\braceexwd\cleaders\hbox{$#4$}\hfill\mkern-\braceexwd#4#3$}

\makeatletter
% \overbrace
\def\overbrace@#1#2{\mathop{\vbox{\m@th\ialign{##\crcr\noalign{\kern\bracevkern}#1\crcr\noalign{\kern\bracevkern\nointerlineskip}$\hfil\displaystyle{#2}\hfil$\crcr}}}\limits}%

% \underbrace
\def\underbrace@#1#2{\mathop{\vtop{\m@th\ialign{##\crcr$\hfil\displaystyle{#2}\hfil$\crcr\noalign{\kern\bracevkern\nointerlineskip}#1\crcr\noalign{\kern\bracevkern}}}}\limits}%

% user-level macros
\def\overbrace{\overbrace@{\bracefill\braceld\bracemd\bracerd\bracexd}}
\def\underbrace{\underbrace@{\bracefill\bracelu\bracemu\braceru\bracexu}}
\makeatother

% The curly braces from mathabx are gorgeous, but not extensible, so when using \left\{...\right\}, for very large braces, LaTeX will default to the usual (non-mathabx) style. To fix this "issue", we introduce a command that scales curly braces to the appropriate height.

%%%% an alternative to \left\{...\right\} that scales mathabx's curly braces rather than using LaTeX's default extensible braces %%%%
\newlength{\ScaledBracesDummyLength}
\newcommand{\ScaledBraces}[1]{%
	\settototalheight{\ScaledBracesDummyLength}{\mbox{$#1$}}%
	\mathopen{\raisebox{0.5ex}{\resizebox*{!}{\ScaledBracesDummyLength}{\raisebox{-0.5ex}{$\Biggl\{$}}}}%
	#1%
	\mathclose{\raisebox{0.5ex}{\resizebox*{!}{\ScaledBracesDummyLength}{\raisebox{-0.5ex}{$\Biggr\}$}}}}%
}

%%%% ... and the same for the cases*-environment %%%%

% defining a cases environment without any braces
\makeatletter
\newcases{plaincases*}{\quad}{%
	$\m@th##$\hfil}{##\hfil}{.}{.}
\makeatother

\newcommand{\ScaledBracesCases}[1]{%
	\settototalheight{\ScaledBracesDummyLength}{\mbox{$#1$}}%
	\mathopen{\raisebox{0.5ex}{\resizebox*{!}{\ScaledBracesDummyLength}{\raisebox{-0.5ex}{$\Biggl\{$}}}}%
	#1%
	\mathclose{}%
}

%%%% *********************** SETTING UP THE BIBLIOGRAPHY *********************** %%%%
%%%% *************************************************************************** %%%%

%%%% biblatex %%%%
\usepackage[
backend=biber,
style=ieee-alphabetic,
dashed=true,
giveninits=false,
maxnames=3]{biblatex}

%%%% long dash replaces repeated names %%%%
\renewcommand*\bibnamedash{\leavevmode\hbox to3em{\hrulefill}\thinspace}

%%%% always use full journal name if possible %%%%
\DeclareSourcemap{
	\maps[datatype=bibtex]{
		\map[overwrite=true]{
			\step[fieldsource=fjournal]
			\step[fieldset=journal, origfieldval]
		}
	}
}

%%%% make sure brackets are always typeset upright %%%%
\renewcommand{\bibleftbracket}{\lbracketupshape}
\renewcommand{\bibrightbracket}{\rbracketupshape}
\renewbibmacro{in:}{}
%\DeclareFieldFormat{url}{\url{#1}}

%%%% prints author names as small caps %%%%
%\renewcommand{\mkbibnamegiven}[1]{\textsc{#1}}
%\renewcommand{\mkbibnamefamily}[1]{\textsc{#1}}
%\renewcommand{\mkbibnameprefix}[1]{\textsc{#1}}
%\renewcommand{\mkbibnamesuffix}[1]{\textsc{#1}}

%%%% extensive format declarations (have to be made :( )) %%%%
\DeclareFieldFormat[article,inbook,incollection,inproceedings,patent,thesis,unpublished]{title}{\emph{#1}\isdot}
\DeclareFieldFormat{journaltitle}{#1\nopunct}
\DeclareFieldFormat*[incollection,book]{booktitle}{#1\isdot}
\DeclareFieldFormat*[incollection,book]{series}{#1\isdot}
\DeclareFieldFormat[article,inbook,incollection,inproceedings,patent,thesis,unpublished]{volume}{vol.\ #1\isdot}

\renewbibmacro*{addendum+pubstate}{%
	\setunit{\adddot\space}%
	\printfield{addendum}%
	\newunit\newblock
	\printfield{pubstate}}
	
\renewbibmacro*{series+number(book)}{%
	\iffieldundef{series}{}
	{%
		\setunit{\addcomma\addspace}%
		\printtext{%
			\printfield{series}%
			\setunit*{\addspace}%
			\printfield{number}%
			\newunit}}}

\DeclareBibliographyDriver{book}{%
	\usebibmacro{bibindex}%
	\usebibmacro{begentry}%
	\usebibmacro{author/editor+others/translator+others}%
	\setunit{\labelnamepunct}\newblock
	\usebibmacro{maintitle+title}%
	\usebibmacro{series+number(book)}%
	\printlist{language}%
	\newunit\newblock
	\usebibmacro{volume+part}%
	\newunit
	\usebibmacro{chapter+pages}%
	\newunit
	\printfield{pagetotal}%
	\newunit\newblock
	\printfield{edition}%
	\newunit\newblock
	\usebibmacro{byauthor}%
	\newunit\newblock
	\usebibmacro{byeditor+others}%
	\newunit\newblock
	\printfield{volumes}%
	\newunit\newblock
	\setunit{\adddot\addspace}%
	\newblock
	\usebibmacro{publisher+location+date}%
	\newunit\newblock
	\printfield{note}%
	\newunit\newblock
	\iftoggle{bbx:isbn}
	{\printfield{isbn}}
	{}%
	\newunit\newblock
	\usebibmacro{doi+eprint+url}%
	\newunit\newblock
	\usebibmacro{addendum+pubstate}%
	\setunit{\bibpagerefpunct}\newblock
	\usebibmacro{pageref}%
	\newunit\newblock
	\iftoggle{bbx:related}
	{\usebibmacro{related:init}%
		\usebibmacro{related}}
	{}%
	\usebibmacro{finentry}}

%%%% *************************************************************************** %%%%
%%%% *************************************************************************** %%%%


%%%% **************************** SETTING UP LISTS ***************************** %%%%
%%%% *************************************************************************** %%%%
\setlength{\parindent}{1.5em}

%%%% enumitem %%%%
\usepackage{enumitem}

%%%% custom lists %%%%
% alphabetical lists
\newlist{alphanumerate}{enumerate}{10}
\setlist[alphanumerate]{leftmargin=2.25em, itemindent=0ex, labelwidth=2em,labelsep=!,align=left, itemsep=0.5\topsep, topsep=0.5\topsep, label={$(\alph*)$}, ref={$\alph*$}, listparindent=\parindent, parsep=0pt, before={\let\item\customitem}}

% usual bulleted lists with same spacing as the above
\newlist{temize}{itemize}{10}
\setlist[temize]{widest=\itememph{m}, leftmargin=*,labelindent=0pt, itemsep=0.5\topsep, topsep=0.5\topsep, listparindent=\parindent, parsep=0pt, label={\textbullet}}

%%%% *************************************************************************** %%%%
%%%% *************************************************************************** %%%%


%%%% ************************ SETTING UP PAGE HEADINGS ************************* %%%%
%%%% *************************************************************************** %%%%

%%%% scrlayer-scrpage %%%%
\usepackage[autooneside=false,automark]{scrlayer-scrpage}

%%%% page headings %%%%
% Even pages: "§1. Section 1"
% Odd pages:  "§1.1. Subsection 1.1"
% But of course, "References" should be typeset without a "§". That's what the macro \ParagraphOrNot controls.
\pagestyle{plain}
\chead{}
\pagestyle{scrheadings}
\newcommand{\ParagraphOrNot}{}
\renewcommand*{\sectionmarkformat}{%
	\ParagraphOrNot\thesection\autodot\enskip}
\renewcommand*{\subsectionmarkformat}{%
	\ParagraphOrNot\thesubsection\autodot\enskip}
\chead{\ifodd\number\value{page}%
	\textsc{\emph{\rightmark}}%
\else%
	\textsc{\emph{\leftmark}}%
\fi%
}
%\ofoot{\ifodd\number\value{page}%
%	\emph{\thepage}%
%\fi%
%}
%\ifoot{\ifodd\number\value{page}\else%
%	\emph{\thepage}%
%	\fi%
%}
%\cfoot{}

%%%% *************************************************************************** %%%%
%%%% *************************************************************************** %%%%


%%%% *************************** SOME CUTE PICTURES **************************** %%%%
%%%% *************************************************************************** %%%%

%%%% cool emoji B-) %%%%
\definecolor{yellowish}{RGB}{255,191,0}
\definecolor{whitish}{RGB}{255,254,225}

\DeclareRobustCommand{\coolemoji}[1][1]{\tikz[scale=1,x=1ex,y=1ex,baseline=(origin.base)] {\fill[fill=yellowish] (0,0) circle (1); \pgfdeclareradialshading{sphere}{\pgfpoint{0ex}{0.882*#1ex}}{rgb(0ex)=(1,0.996,0.882); rgb(#1ex)=(1,0.749,0)}\pgfuseshading{sphere}%
		\fill (-0.385,-0.42) .. controls (-0.426,-0.342) and (-0.397,-0.321) ..  (-0.325,-0.375) .. controls (-0.168,-0.495) and (0.068,-0.524) .. (0.223,-0.445) .. controls (0.269,-0.426) and (0.307,-0.411) .. (0.316,-0.411) .. controls (0.349,-0.411) and (0.329,-0.463) .. (0.275,-0.517) .. controls (0.071,-0.72) and (-0.258,-0.665) .. cycle; \fill (0,0.263) .. controls (-0.159,0.263) and (-0.046,-0.192) .. (-0.547,-0.192) .. controls (-0.84,-0.192) and (-0.842,-0.049) .. (-0.919,0.124) .. controls (-0.988,0.383) and (-1.008,0.203) .. (-1.021,0.37) .. controls (-1.026,0.441) and (-0.946,0.464) .. (-0.629,0.464) .. controls (-0.148,0.464) and (-0.167,0.387) .. (0,0.387) .. controls (0.167,0.387) and (0.148,0.464) .. (0.629,0.464) .. controls (0.946,0.464) and (1.026,0.441) .. (1.021,0.37) .. controls (1.008,0.203) and (0.988,0.383) .. (0.919,0.124) .. controls (0.842,-0.049) and (0.84,-0.192) .. (0.547,-0.192) .. controls (0.046,-0.192) and (0.159,0.263) .. cycle; \fill[gray] (-0.657,0.366) .. controls (-0.658,0.374) and (-0.634,0.389) .. (-0.602,0.397) .. controls (-0.493,0.428) and (-0.227,0.377) .. (-0.206,0.322) .. controls (-0.167,0.219) and (-0.411,0.154) .. (-0.534,0.219) .. controls (-0.592,0.25) and (-0.65,0.319) .. cycle; \fill[gray] (0.199,0.299) .. controls (0.199,0.369) and (0.486,0.439) .. (0.612,0.397) .. controls (0.671,0.379) and (0.605,0.253) .. (0.563,0.222) .. controls (0.452,0.14) and (0.199,0.185) .. cycle;
		\node (origin) at (0,-0.25) {\phantom{x}};%
	}
}

%%%% Grothendieck's left devil
\newcommand{\GrothendieckLeftDevil}{\begin{tikzpicture}[scale=0.5,baseline=1ex]
		\pgfpathmoveto{\pgfqpoint{0cm}{0cm}}
		\pgfpathlineto{\pgfqpoint{1.87cm}{0cm}}
		\pgfpathlineto{\pgfqpoint{1.87cm}{0.953cm}}
		\pgfpathlineto{\pgfqpoint{0cm}{0.953cm}}
		\pgfpathclose
		\pgfusepath{clip}
		\begin{pgfscope}
			\pgfpathmoveto{\pgfqpoint{0cm}{0cm}}
			\pgfpathlineto{\pgfqpoint{1.87cm}{0cm}}
			\pgfpathlineto{\pgfqpoint{1.87cm}{0.953cm}}
			\pgfpathlineto{\pgfqpoint{0cm}{0.953cm}}
			\pgfpathclose
			\pgfusepath{clip}
			\begin{pgfscope}
				\definecolor{eps2pgf_color}{gray}{0}\pgfsetstrokecolor{eps2pgf_color}\pgfsetfillcolor{eps2pgf_color}
				\pgfpathmoveto{\pgfqpoint{0.611cm}{0.03cm}}
				\pgfpathcurveto{\pgfqpoint{0.617cm}{0.048cm}}{\pgfqpoint{0.6cm}{0.13cm}}{\pgfqpoint{0.615cm}{0.164cm}}
				\pgfpathcurveto{\pgfqpoint{0.636cm}{0.21cm}}{\pgfqpoint{0.644cm}{0.261cm}}{\pgfqpoint{0.656cm}{0.31cm}}
				\pgfpathcurveto{\pgfqpoint{0.662cm}{0.338cm}}{\pgfqpoint{0.555cm}{0.414cm}}{\pgfqpoint{0.552cm}{0.465cm}}
				\pgfpathcurveto{\pgfqpoint{0.676cm}{0.446cm}}{\pgfqpoint{0.777cm}{0.405cm}}{\pgfqpoint{0.834cm}{0.292cm}}
				\pgfpathcurveto{\pgfqpoint{0.886cm}{0.188cm}}{\pgfqpoint{0.838cm}{0.203cm}}{\pgfqpoint{0.848cm}{0.118cm}}
				\pgfpathcurveto{\pgfqpoint{0.851cm}{0.095cm}}{\pgfqpoint{0.854cm}{0.092cm}}{\pgfqpoint{0.885cm}{0.092cm}}
				\pgfpathcurveto{\pgfqpoint{0.93cm}{0.091cm}}{\pgfqpoint{0.965cm}{0.104cm}}{\pgfqpoint{0.965cm}{0.122cm}}
				\pgfpathcurveto{\pgfqpoint{0.965cm}{0.138cm}}{\pgfqpoint{0.867cm}{0.314cm}}{\pgfqpoint{0.849cm}{0.342cm}}
				\pgfpathcurveto{\pgfqpoint{0.798cm}{0.42cm}}{\pgfqpoint{0.713cm}{0.459cm}}{\pgfqpoint{0.632cm}{0.498cm}}
				\pgfpathcurveto{\pgfqpoint{0.656cm}{0.507cm}}{\pgfqpoint{0.681cm}{0.511cm}}{\pgfqpoint{0.707cm}{0.511cm}}
				\pgfpathcurveto{\pgfqpoint{0.749cm}{0.51cm}}{\pgfqpoint{0.764cm}{0.521cm}}{\pgfqpoint{0.794cm}{0.486cm}}
				\pgfpathcurveto{\pgfqpoint{0.829cm}{0.444cm}}{\pgfqpoint{0.865cm}{0.427cm}}{\pgfqpoint{0.917cm}{0.427cm}}
				\pgfpathcurveto{\pgfqpoint{1.025cm}{0.427cm}}{\pgfqpoint{1.058cm}{0.486cm}}{\pgfqpoint{1.079cm}{0.486cm}}
				\pgfpathcurveto{\pgfqpoint{1.091cm}{0.486cm}}{\pgfqpoint{1.102cm}{0.49cm}}{\pgfqpoint{1.104cm}{0.494cm}}
				\pgfpathcurveto{\pgfqpoint{1.113cm}{0.508cm}}{\pgfqpoint{1.242cm}{0.52cm}}{\pgfqpoint{1.399cm}{0.52cm}}
				\pgfpathlineto{\pgfqpoint{1.558cm}{0.52cm}}
				\pgfpathcurveto{\pgfqpoint{1.564cm}{0.499cm}}{\pgfqpoint{1.574cm}{0.482cm}}{\pgfqpoint{1.592cm}{0.469cm}}
				\pgfpathcurveto{\pgfqpoint{1.61cm}{0.457cm}}{\pgfqpoint{1.755cm}{0.455cm}}{\pgfqpoint{1.808cm}{0.464cm}}
				\pgfpathcurveto{\pgfqpoint{1.833cm}{0.469cm}}{\pgfqpoint{1.84cm}{0.467cm}}{\pgfqpoint{1.84cm}{0.476cm}}
				\pgfpathcurveto{\pgfqpoint{1.84cm}{0.479cm}}{\pgfqpoint{1.835cm}{0.482cm}}{\pgfqpoint{1.783cm}{0.482cm}}
				\pgfpathcurveto{\pgfqpoint{1.717cm}{0.482cm}}{\pgfqpoint{1.631cm}{0.484cm}}{\pgfqpoint{1.626cm}{0.493cm}}
				\pgfpathcurveto{\pgfqpoint{1.623cm}{0.497cm}}{\pgfqpoint{1.657cm}{0.502cm}}{\pgfqpoint{1.722cm}{0.502cm}}
				\pgfpathcurveto{\pgfqpoint{1.784cm}{0.503cm}}{\pgfqpoint{1.841cm}{0.507cm}}{\pgfqpoint{1.841cm}{0.517cm}}
				\pgfpathcurveto{\pgfqpoint{1.841cm}{0.534cm}}{\pgfqpoint{1.611cm}{0.507cm}}{\pgfqpoint{1.626cm}{0.523cm}}
				\pgfpathcurveto{\pgfqpoint{1.629cm}{0.526cm}}{\pgfqpoint{1.659cm}{0.531cm}}{\pgfqpoint{1.694cm}{0.533cm}}
				\pgfpathcurveto{\pgfqpoint{1.798cm}{0.54cm}}{\pgfqpoint{1.832cm}{0.544cm}}{\pgfqpoint{1.83cm}{0.556cm}}
				\pgfpathcurveto{\pgfqpoint{1.829cm}{0.566cm}}{\pgfqpoint{1.81cm}{0.563cm}}{\pgfqpoint{1.791cm}{0.563cm}}
				\pgfpathcurveto{\pgfqpoint{1.753cm}{0.563cm}}{\pgfqpoint{1.609cm}{0.549cm}}{\pgfqpoint{1.609cm}{0.555cm}}
				\pgfpathcurveto{\pgfqpoint{1.609cm}{0.587cm}}{\pgfqpoint{1.803cm}{0.586cm}}{\pgfqpoint{1.803cm}{0.603cm}}
				\pgfpathcurveto{\pgfqpoint{1.803cm}{0.614cm}}{\pgfqpoint{1.791cm}{0.615cm}}{\pgfqpoint{1.725cm}{0.609cm}}
				\pgfpathcurveto{\pgfqpoint{1.642cm}{0.603cm}}{\pgfqpoint{1.588cm}{0.586cm}}{\pgfqpoint{1.575cm}{0.563cm}}
				\pgfpathcurveto{\pgfqpoint{1.568cm}{0.551cm}}{\pgfqpoint{1.548cm}{0.549cm}}{\pgfqpoint{1.41cm}{0.548cm}}
				\pgfpathcurveto{\pgfqpoint{1.261cm}{0.547cm}}{\pgfqpoint{1.251cm}{0.548cm}}{\pgfqpoint{1.235cm}{0.564cm}}
				\pgfpathcurveto{\pgfqpoint{1.222cm}{0.576cm}}{\pgfqpoint{1.211cm}{0.58cm}}{\pgfqpoint{1.194cm}{0.577cm}}
				\pgfpathcurveto{\pgfqpoint{1.162cm}{0.57cm}}{\pgfqpoint{1.171cm}{0.584cm}}{\pgfqpoint{1.122cm}{0.59cm}}
				\pgfpathcurveto{\pgfqpoint{1.084cm}{0.595cm}}{\pgfqpoint{1.065cm}{0.614cm}}{\pgfqpoint{1.046cm}{0.576cm}}
				\pgfpathcurveto{\pgfqpoint{1.028cm}{0.53cm}}{\pgfqpoint{0.983cm}{0.544cm}}{\pgfqpoint{0.953cm}{0.571cm}}
				\pgfpathcurveto{\pgfqpoint{0.931cm}{0.594cm}}{\pgfqpoint{0.93cm}{0.598cm}}{\pgfqpoint{0.935cm}{0.642cm}}
				\pgfpathcurveto{\pgfqpoint{0.942cm}{0.7cm}}{\pgfqpoint{0.956cm}{0.713cm}}{\pgfqpoint{0.986cm}{0.693cm}}
				\pgfpathcurveto{\pgfqpoint{1.004cm}{0.681cm}}{\pgfqpoint{1.019cm}{0.68cm}}{\pgfqpoint{1.082cm}{0.686cm}}
				\pgfpathcurveto{\pgfqpoint{1.185cm}{0.696cm}}{\pgfqpoint{1.182cm}{0.696cm}}{\pgfqpoint{1.179cm}{0.675cm}}
				\pgfpathcurveto{\pgfqpoint{1.175cm}{0.652cm}}{\pgfqpoint{1.198cm}{0.639cm}}{\pgfqpoint{1.239cm}{0.639cm}}
				\pgfpathcurveto{\pgfqpoint{1.272cm}{0.639cm}}{\pgfqpoint{1.284cm}{0.657cm}}{\pgfqpoint{1.275cm}{0.693cm}}
				\pgfpathcurveto{\pgfqpoint{1.265cm}{0.732cm}}{\pgfqpoint{1.349cm}{0.727cm}}{\pgfqpoint{1.378cm}{0.721cm}}
				\pgfpathcurveto{\pgfqpoint{1.427cm}{0.711cm}}{\pgfqpoint{1.499cm}{0.726cm}}{\pgfqpoint{1.499cm}{0.746cm}}
				\pgfpathcurveto{\pgfqpoint{1.499cm}{0.77cm}}{\pgfqpoint{1.338cm}{0.725cm}}{\pgfqpoint{1.316cm}{0.793cm}}
				\pgfpathcurveto{\pgfqpoint{1.313cm}{0.801cm}}{\pgfqpoint{1.296cm}{0.818cm}}{\pgfqpoint{1.278cm}{0.83cm}}
				\pgfpathcurveto{\pgfqpoint{1.242cm}{0.855cm}}{\pgfqpoint{1.212cm}{0.906cm}}{\pgfqpoint{1.227cm}{0.921cm}}
				\pgfpathcurveto{\pgfqpoint{1.241cm}{0.935cm}}{\pgfqpoint{1.211cm}{0.953cm}}{\pgfqpoint{1.197cm}{0.953cm}}
				\pgfpathcurveto{\pgfqpoint{1.175cm}{0.951cm}}{\pgfqpoint{1.202cm}{0.856cm}}{\pgfqpoint{1.203cm}{0.854cm}}
				\pgfpathcurveto{\pgfqpoint{1.217cm}{0.815cm}}{\pgfqpoint{1.163cm}{0.807cm}}{\pgfqpoint{1.171cm}{0.828cm}}
				\pgfpathcurveto{\pgfqpoint{1.174cm}{0.835cm}}{\pgfqpoint{1.169cm}{0.846cm}}{\pgfqpoint{1.161cm}{0.854cm}}
				\pgfpathcurveto{\pgfqpoint{1.125cm}{0.886cm}}{\pgfqpoint{1.03cm}{0.853cm}}{\pgfqpoint{1.05cm}{0.816cm}}
				\pgfpathcurveto{\pgfqpoint{1.085cm}{0.786cm}}{\pgfqpoint{1.114cm}{0.795cm}}{\pgfqpoint{1.051cm}{0.759cm}}
				\pgfpathcurveto{\pgfqpoint{1.002cm}{0.733cm}}{\pgfqpoint{1.001cm}{0.733cm}}{\pgfqpoint{0.971cm}{0.747cm}}
				\pgfpathcurveto{\pgfqpoint{0.948cm}{0.757cm}}{\pgfqpoint{0.94cm}{0.766cm}}{\pgfqpoint{0.94cm}{0.78cm}}
				\pgfpathcurveto{\pgfqpoint{0.94cm}{0.805cm}}{\pgfqpoint{0.911cm}{0.833cm}}{\pgfqpoint{0.886cm}{0.833cm}}
				\pgfpathcurveto{\pgfqpoint{0.864cm}{0.833cm}}{\pgfqpoint{0.844cm}{0.816cm}}{\pgfqpoint{0.821cm}{0.777cm}}
				\pgfpathcurveto{\pgfqpoint{0.794cm}{0.731cm}}{\pgfqpoint{0.725cm}{0.735cm}}{\pgfqpoint{0.648cm}{0.696cm}}
				\pgfpathcurveto{\pgfqpoint{0.601cm}{0.672cm}}{\pgfqpoint{0.524cm}{0.612cm}}{\pgfqpoint{0.494cm}{0.576cm}}
				\pgfpathcurveto{\pgfqpoint{0.445cm}{0.532cm}}{\pgfqpoint{0.294cm}{0.535cm}}{\pgfqpoint{0.199cm}{0.533cm}}
				\pgfpathcurveto{\pgfqpoint{0.191cm}{0.602cm}}{\pgfqpoint{0.181cm}{0.659cm}}{\pgfqpoint{0.105cm}{0.667cm}}
				\pgfpathcurveto{\pgfqpoint{0.058cm}{0.67cm}}{\pgfqpoint{0cm}{0.642cm}}{\pgfqpoint{0cm}{0.604cm}}
				\pgfpathcurveto{\pgfqpoint{0cm}{0.567cm}}{\pgfqpoint{0.089cm}{0.644cm}}{\pgfqpoint{0.119cm}{0.639cm}}
				\pgfpathcurveto{\pgfqpoint{0.167cm}{0.63cm}}{\pgfqpoint{0.166cm}{0.57cm}}{\pgfqpoint{0.172cm}{0.529cm}}
				\pgfpathcurveto{\pgfqpoint{0.107cm}{0.521cm}}{\pgfqpoint{0.017cm}{0.528cm}}{\pgfqpoint{0.036cm}{0.494cm}}
				\pgfpathcurveto{\pgfqpoint{0.043cm}{0.483cm}}{\pgfqpoint{0.114cm}{0.485cm}}{\pgfqpoint{0.173cm}{0.487cm}}
				\pgfpathcurveto{\pgfqpoint{0.192cm}{0.419cm}}{\pgfqpoint{0.221cm}{0.365cm}}{\pgfqpoint{0.297cm}{0.359cm}}
				\pgfpathcurveto{\pgfqpoint{0.373cm}{0.359cm}}{\pgfqpoint{0.466cm}{0.52cm}}{\pgfqpoint{0.466cm}{0.448cm}}
				\pgfpathcurveto{\pgfqpoint{0.466cm}{0.431cm}}{\pgfqpoint{0.59cm}{0.321cm}}{\pgfqpoint{0.597cm}{0.3cm}}
				\pgfpathcurveto{\pgfqpoint{0.603cm}{0.281cm}}{\pgfqpoint{0.571cm}{0.203cm}}{\pgfqpoint{0.56cm}{0.16cm}}
				\pgfpathcurveto{\pgfqpoint{0.55cm}{0.124cm}}{\pgfqpoint{0.537cm}{0.101cm}}{\pgfqpoint{0.514cm}{0.083cm}}
				\pgfpathcurveto{\pgfqpoint{0.486cm}{0.059cm}}{\pgfqpoint{0.472cm}{0.039cm}}{\pgfqpoint{0.478cm}{0.029cm}}
				\pgfpathcurveto{\pgfqpoint{0.485cm}{0.018cm}}{\pgfqpoint{0.607cm}{0.018cm}}{\pgfqpoint{0.611cm}{0.03cm}}
				\pgfpathclose
				\pgfpathmoveto{\pgfqpoint{0.896cm}{0.778cm}}
				\pgfpathcurveto{\pgfqpoint{0.907cm}{0.753cm}}{\pgfqpoint{0.889cm}{0.757cm}}{\pgfqpoint{0.869cm}{0.752cm}}
				\pgfpathcurveto{\pgfqpoint{0.851cm}{0.746cm}}{\pgfqpoint{0.842cm}{0.77cm}}{\pgfqpoint{0.855cm}{0.787cm}}
				\pgfpathcurveto{\pgfqpoint{0.869cm}{0.804cm}}{\pgfqpoint{0.884cm}{0.805cm}}{\pgfqpoint{0.896cm}{0.778cm}}
				\pgfpathclose
				\pgfpathmoveto{\pgfqpoint{0.914cm}{0.661cm}}
				\pgfpathcurveto{\pgfqpoint{0.914cm}{0.63cm}}{\pgfqpoint{0.899cm}{0.595cm}}{\pgfqpoint{0.874cm}{0.569cm}}
				\pgfpathcurveto{\pgfqpoint{0.853cm}{0.547cm}}{\pgfqpoint{0.813cm}{0.537cm}}{\pgfqpoint{0.813cm}{0.553cm}}
				\pgfpathcurveto{\pgfqpoint{0.813cm}{0.571cm}}{\pgfqpoint{0.865cm}{0.664cm}}{\pgfqpoint{0.88cm}{0.672cm}}
				\pgfpathcurveto{\pgfqpoint{0.906cm}{0.686cm}}{\pgfqpoint{0.914cm}{0.683cm}}{\pgfqpoint{0.914cm}{0.661cm}}
				\pgfpathclose
				\pgfpathmoveto{\pgfqpoint{0.601cm}{0.544cm}}
				\pgfpathcurveto{\pgfqpoint{0.601cm}{0.555cm}}{\pgfqpoint{0.712cm}{0.639cm}}{\pgfqpoint{0.736cm}{0.639cm}}
				\pgfpathcurveto{\pgfqpoint{0.742cm}{0.639cm}}{\pgfqpoint{0.831cm}{0.683cm}}{\pgfqpoint{0.793cm}{0.64cm}}
				\pgfpathcurveto{\pgfqpoint{0.759cm}{0.601cm}}{\pgfqpoint{0.78cm}{0.555cm}}{\pgfqpoint{0.744cm}{0.544cm}}
				\pgfpathcurveto{\pgfqpoint{0.715cm}{0.536cm}}{\pgfqpoint{0.601cm}{0.536cm}}{\pgfqpoint{0.601cm}{0.544cm}}
				\pgfpathclose
				\pgfpathmoveto{\pgfqpoint{1.046cm}{0.52cm}}
				\pgfpathlineto{\pgfqpoint{1.026cm}{0.503cm}}
				\pgfpathcurveto{\pgfqpoint{0.933cm}{0.426cm}}{\pgfqpoint{0.819cm}{0.49cm}}{\pgfqpoint{0.832cm}{0.512cm}}
				\pgfpathcurveto{\pgfqpoint{0.834cm}{0.516cm}}{\pgfqpoint{0.849cm}{0.515cm}}{\pgfqpoint{0.865cm}{0.512cm}}
				\pgfpathcurveto{\pgfqpoint{0.93cm}{0.497cm}}{\pgfqpoint{0.97cm}{0.52cm}}{\pgfqpoint{1.046cm}{0.52cm}}
				\pgfpathclose
				\pgfpathmoveto{\pgfqpoint{0.428cm}{0.491cm}}
				\pgfpathcurveto{\pgfqpoint{0.418cm}{0.484cm}}{\pgfqpoint{0.389cm}{0.457cm}}{\pgfqpoint{0.363cm}{0.431cm}}
				\pgfpathcurveto{\pgfqpoint{0.301cm}{0.359cm}}{\pgfqpoint{0.225cm}{0.387cm}}{\pgfqpoint{0.212cm}{0.472cm}}
				\pgfpathcurveto{\pgfqpoint{0.208cm}{0.494cm}}{\pgfqpoint{0.455cm}{0.512cm}}{\pgfqpoint{0.428cm}{0.491cm}}
				\pgfpathclose
				\pgfusepath{fill}
			\end{pgfscope}
		\end{pgfscope}
\end{tikzpicture}}

%%%% Grothendieck's right devil %%%%
\newcommand{\GrothendieckRightDevil}{\begin{tikzpicture}[scale=0.5,baseline=1.3ex]
		\pgfpathmoveto{\pgfqpoint{0cm}{0cm}}
		\pgfpathlineto{\pgfqpoint{0.917cm}{0cm}}
		\pgfpathlineto{\pgfqpoint{0.917cm}{1.235cm}}
		\pgfpathlineto{\pgfqpoint{0cm}{1.235cm}}
		\pgfpathclose
		\pgfusepath{clip}
		\begin{pgfscope}
			\pgfpathmoveto{\pgfqpoint{0cm}{0cm}}
			\pgfpathlineto{\pgfqpoint{0.917cm}{0cm}}
			\pgfpathlineto{\pgfqpoint{0.917cm}{1.235cm}}
			\pgfpathlineto{\pgfqpoint{0cm}{1.235cm}}
			\pgfpathclose
			\pgfusepath{clip}
			\begin{pgfscope}
				\definecolor{eps2pgf_color}{gray}{0}\pgfsetstrokecolor{eps2pgf_color}\pgfsetfillcolor{eps2pgf_color}
				\pgfpathmoveto{\pgfqpoint{0.839cm}{0.989cm}}
				\pgfpathcurveto{\pgfqpoint{0.84cm}{1.009cm}}{\pgfqpoint{0.846cm}{1.019cm}}{\pgfqpoint{0.863cm}{1.027cm}}
				\pgfpathcurveto{\pgfqpoint{0.893cm}{1.042cm}}{\pgfqpoint{0.919cm}{1.116cm}}{\pgfqpoint{0.912cm}{1.167cm}}
				\pgfpathcurveto{\pgfqpoint{0.909cm}{1.187cm}}{\pgfqpoint{0.903cm}{1.203cm}}{\pgfqpoint{0.898cm}{1.203cm}}
				\pgfpathcurveto{\pgfqpoint{0.893cm}{1.203cm}}{\pgfqpoint{0.892cm}{1.19cm}}{\pgfqpoint{0.895cm}{1.169cm}}
				\pgfpathcurveto{\pgfqpoint{0.903cm}{1.122cm}}{\pgfqpoint{0.874cm}{1.056cm}}{\pgfqpoint{0.866cm}{1.064cm}}
				\pgfpathcurveto{\pgfqpoint{0.849cm}{1.081cm}}{\pgfqpoint{0.859cm}{1.212cm}}{\pgfqpoint{0.843cm}{1.218cm}}
				\pgfpathcurveto{\pgfqpoint{0.824cm}{1.224cm}}{\pgfqpoint{0.848cm}{1.041cm}}{\pgfqpoint{0.831cm}{1.07cm}}
				\pgfpathcurveto{\pgfqpoint{0.815cm}{1.098cm}}{\pgfqpoint{0.823cm}{1.218cm}}{\pgfqpoint{0.807cm}{1.224cm}}
				\pgfpathcurveto{\pgfqpoint{0.783cm}{1.234cm}}{\pgfqpoint{0.821cm}{1.051cm}}{\pgfqpoint{0.79cm}{1.068cm}}
				\pgfpathcurveto{\pgfqpoint{0.748cm}{1.09cm}}{\pgfqpoint{0.768cm}{1.229cm}}{\pgfqpoint{0.743cm}{1.235cm}}
				\pgfpathcurveto{\pgfqpoint{0.743cm}{1.235cm}}{\pgfqpoint{0.742cm}{1.235cm}}{\pgfqpoint{0.742cm}{1.235cm}}
				\pgfpathcurveto{\pgfqpoint{0.737cm}{1.234cm}}{\pgfqpoint{0.737cm}{1.219cm}}{\pgfqpoint{0.739cm}{1.161cm}}
				\pgfpathcurveto{\pgfqpoint{0.743cm}{1.105cm}}{\pgfqpoint{0.744cm}{1.064cm}}{\pgfqpoint{0.806cm}{1.032cm}}
				\pgfpathlineto{\pgfqpoint{0.798cm}{0.689cm}}
				\pgfpathcurveto{\pgfqpoint{0.798cm}{0.646cm}}{\pgfqpoint{0.797cm}{0.644cm}}{\pgfqpoint{0.765cm}{0.628cm}}
				\pgfpathcurveto{\pgfqpoint{0.68cm}{0.609cm}}{\pgfqpoint{0.489cm}{0.561cm}}{\pgfqpoint{0.447cm}{0.593cm}}
				\pgfpathcurveto{\pgfqpoint{0.423cm}{0.616cm}}{\pgfqpoint{0.419cm}{0.64cm}}{\pgfqpoint{0.438cm}{0.647cm}}
				\pgfpathcurveto{\pgfqpoint{0.468cm}{0.659cm}}{\pgfqpoint{0.424cm}{0.695cm}}{\pgfqpoint{0.479cm}{0.695cm}}
				\pgfpathcurveto{\pgfqpoint{0.529cm}{0.695cm}}{\pgfqpoint{0.556cm}{0.75cm}}{\pgfqpoint{0.487cm}{0.75cm}}
				\pgfpathcurveto{\pgfqpoint{0.446cm}{0.75cm}}{\pgfqpoint{0.436cm}{0.752cm}}{\pgfqpoint{0.493cm}{0.814cm}}
				\pgfpathcurveto{\pgfqpoint{0.573cm}{0.901cm}}{\pgfqpoint{0.528cm}{0.881cm}}{\pgfqpoint{0.471cm}{0.835cm}}
				\pgfpathcurveto{\pgfqpoint{0.429cm}{0.8cm}}{\pgfqpoint{0.422cm}{0.797cm}}{\pgfqpoint{0.391cm}{0.802cm}}
				\pgfpathcurveto{\pgfqpoint{0.27cm}{0.821cm}}{\pgfqpoint{0.316cm}{0.729cm}}{\pgfqpoint{0.161cm}{0.757cm}}
				\pgfpathcurveto{\pgfqpoint{0.068cm}{0.774cm}}{\pgfqpoint{0.076cm}{0.732cm}}{\pgfqpoint{0.208cm}{0.711cm}}
				\pgfpathcurveto{\pgfqpoint{0.285cm}{0.698cm}}{\pgfqpoint{0.284cm}{0.699cm}}{\pgfqpoint{0.268cm}{0.674cm}}
				\pgfpathcurveto{\pgfqpoint{0.236cm}{0.626cm}}{\pgfqpoint{0.292cm}{0.618cm}}{\pgfqpoint{0.303cm}{0.636cm}}
				\pgfpathcurveto{\pgfqpoint{0.316cm}{0.657cm}}{\pgfqpoint{0.375cm}{0.635cm}}{\pgfqpoint{0.375cm}{0.609cm}}
				\pgfpathcurveto{\pgfqpoint{0.375cm}{0.562cm}}{\pgfqpoint{0.215cm}{0.621cm}}{\pgfqpoint{0.185cm}{0.606cm}}
				\pgfpathcurveto{\pgfqpoint{0.151cm}{0.59cm}}{\pgfqpoint{0.15cm}{0.503cm}}{\pgfqpoint{0.142cm}{0.447cm}}
				\pgfpathcurveto{\pgfqpoint{0.102cm}{0.438cm}}{\pgfqpoint{0.01cm}{0.413cm}}{\pgfqpoint{0.043cm}{0.399cm}}
				\pgfpathcurveto{\pgfqpoint{0.061cm}{0.391cm}}{\pgfqpoint{0.042cm}{0.368cm}}{\pgfqpoint{0.064cm}{0.368cm}}
				\pgfpathcurveto{\pgfqpoint{0.092cm}{0.368cm}}{\pgfqpoint{0.076cm}{0.348cm}}{\pgfqpoint{0.099cm}{0.348cm}}
				\pgfpathcurveto{\pgfqpoint{0.118cm}{0.348cm}}{\pgfqpoint{0.101cm}{0.331cm}}{\pgfqpoint{0.129cm}{0.331cm}}
				\pgfpathcurveto{\pgfqpoint{0.155cm}{0.331cm}}{\pgfqpoint{0.142cm}{0.348cm}}{\pgfqpoint{0.154cm}{0.348cm}}
				\pgfpathcurveto{\pgfqpoint{0.173cm}{0.348cm}}{\pgfqpoint{0.161cm}{0.315cm}}{\pgfqpoint{0.12cm}{0.256cm}}
				\pgfpathcurveto{\pgfqpoint{0.062cm}{0.17cm}}{\pgfqpoint{0.088cm}{0.178cm}}{\pgfqpoint{0.059cm}{0.135cm}}
				\pgfpathcurveto{\pgfqpoint{0.024cm}{0.084cm}}{\pgfqpoint{-0.005cm}{0.027cm}}{\pgfqpoint{0.001cm}{0.022cm}}
				\pgfpathcurveto{\pgfqpoint{0.006cm}{0.017cm}}{\pgfqpoint{0.105cm}{0.025cm}}{\pgfqpoint{0.111cm}{0.031cm}}
				\pgfpathcurveto{\pgfqpoint{0.117cm}{0.036cm}}{\pgfqpoint{0.099cm}{0.106cm}}{\pgfqpoint{0.102cm}{0.115cm}}
				\pgfpathcurveto{\pgfqpoint{0.118cm}{0.156cm}}{\pgfqpoint{0.101cm}{0.183cm}}{\pgfqpoint{0.154cm}{0.184cm}}
				\pgfpathcurveto{\pgfqpoint{0.172cm}{0.185cm}}{\pgfqpoint{0.186cm}{0.183cm}}{\pgfqpoint{0.186cm}{0.18cm}}
				\pgfpathcurveto{\pgfqpoint{0.186cm}{0.145cm}}{\pgfqpoint{0.285cm}{0.201cm}}{\pgfqpoint{0.217cm}{0.231cm}}
				\pgfpathcurveto{\pgfqpoint{0.204cm}{0.237cm}}{\pgfqpoint{0.138cm}{0.289cm}}{\pgfqpoint{0.352cm}{0.289cm}}
				\pgfpathcurveto{\pgfqpoint{0.547cm}{0.289cm}}{\pgfqpoint{0.392cm}{0.36cm}}{\pgfqpoint{0.569cm}{0.313cm}}
				\pgfpathcurveto{\pgfqpoint{0.697cm}{0.279cm}}{\pgfqpoint{0.8cm}{0.329cm}}{\pgfqpoint{0.797cm}{0.291cm}}
				\pgfpathcurveto{\pgfqpoint{0.794cm}{0.257cm}}{\pgfqpoint{0.798cm}{0.248cm}}{\pgfqpoint{0.819cm}{0.248cm}}
				\pgfpathcurveto{\pgfqpoint{0.861cm}{0.248cm}}{\pgfqpoint{0.818cm}{0.298cm}}{\pgfqpoint{0.863cm}{0.324cm}}
				\pgfpathcurveto{\pgfqpoint{0.906cm}{0.349cm}}{\pgfqpoint{0.881cm}{0.399cm}}{\pgfqpoint{0.857cm}{0.413cm}}
				\pgfpathcurveto{\pgfqpoint{0.826cm}{0.431cm}}{\pgfqpoint{0.84cm}{0.456cm}}{\pgfqpoint{0.84cm}{0.522cm}}
				\pgfpathcurveto{\pgfqpoint{0.874cm}{0.518cm}}{\pgfqpoint{0.903cm}{0.516cm}}{\pgfqpoint{0.908cm}{0.529cm}}
				\pgfpathcurveto{\pgfqpoint{0.915cm}{0.547cm}}{\pgfqpoint{0.869cm}{0.543cm}}{\pgfqpoint{0.88cm}{0.562cm}}
				\pgfpathcurveto{\pgfqpoint{0.906cm}{0.608cm}}{\pgfqpoint{0.84cm}{0.644cm}}{\pgfqpoint{0.834cm}{0.644cm}}
				\pgfpathclose
				\pgfpathmoveto{\pgfqpoint{0.363cm}{0.555cm}}
				\pgfpathcurveto{\pgfqpoint{0.363cm}{0.555cm}}{\pgfqpoint{0.378cm}{0.373cm}}{\pgfqpoint{0.363cm}{0.374cm}}
				\pgfpathcurveto{\pgfqpoint{0.323cm}{0.375cm}}{\pgfqpoint{0.251cm}{0.441cm}}{\pgfqpoint{0.208cm}{0.441cm}}
				\pgfpathcurveto{\pgfqpoint{0.182cm}{0.441cm}}{\pgfqpoint{0.191cm}{0.441cm}}{\pgfqpoint{0.188cm}{0.469cm}}
				\pgfpathcurveto{\pgfqpoint{0.173cm}{0.615cm}}{\pgfqpoint{0.196cm}{0.588cm}}{\pgfqpoint{0.363cm}{0.555cm}}
				\pgfpathclose
				\pgfpathmoveto{\pgfqpoint{0.734cm}{0.573cm}}
				\pgfpathcurveto{\pgfqpoint{0.759cm}{0.557cm}}{\pgfqpoint{0.783cm}{0.539cm}}{\pgfqpoint{0.807cm}{0.522cm}}
				\pgfpathlineto{\pgfqpoint{0.801cm}{0.42cm}}
				\pgfpathcurveto{\pgfqpoint{0.757cm}{0.405cm}}{\pgfqpoint{0.585cm}{0.342cm}}{\pgfqpoint{0.697cm}{0.34cm}}
				\pgfpathcurveto{\pgfqpoint{0.776cm}{0.34cm}}{\pgfqpoint{0.777cm}{0.397cm}}{\pgfqpoint{0.793cm}{0.39cm}}
				\pgfpathcurveto{\pgfqpoint{0.803cm}{0.386cm}}{\pgfqpoint{0.798cm}{0.352cm}}{\pgfqpoint{0.798cm}{0.333cm}}
				\pgfpathcurveto{\pgfqpoint{0.641cm}{0.319cm}}{\pgfqpoint{0.6cm}{0.336cm}}{\pgfqpoint{0.5cm}{0.362cm}}
				\pgfpathcurveto{\pgfqpoint{0.479cm}{0.366cm}}{\pgfqpoint{0.478cm}{0.369cm}}{\pgfqpoint{0.478cm}{0.414cm}}
				\pgfpathcurveto{\pgfqpoint{0.478cm}{0.513cm}}{\pgfqpoint{0.444cm}{0.53cm}}{\pgfqpoint{0.493cm}{0.546cm}}
				\pgfpathcurveto{\pgfqpoint{0.612cm}{0.569cm}}{\pgfqpoint{0.702cm}{0.588cm}}{\pgfqpoint{0.734cm}{0.573cm}}
				\pgfpathclose
				\pgfpathmoveto{\pgfqpoint{0.857cm}{0.364cm}}
				\pgfpathcurveto{\pgfqpoint{0.857cm}{0.355cm}}{\pgfqpoint{0.853cm}{0.348cm}}{\pgfqpoint{0.849cm}{0.348cm}}
				\pgfpathcurveto{\pgfqpoint{0.844cm}{0.348cm}}{\pgfqpoint{0.84cm}{0.358cm}}{\pgfqpoint{0.84cm}{0.37cm}}
				\pgfpathcurveto{\pgfqpoint{0.84cm}{0.399cm}}{\pgfqpoint{0.857cm}{0.385cm}}{\pgfqpoint{0.857cm}{0.364cm}}
				\pgfpathclose
				\pgfpathmoveto{\pgfqpoint{0.309cm}{0.344cm}}
				\pgfpathlineto{\pgfqpoint{0.28cm}{0.338cm}}
				\pgfpathcurveto{\pgfqpoint{0.189cm}{0.321cm}}{\pgfqpoint{0.197cm}{0.32cm}}{\pgfqpoint{0.197cm}{0.353cm}}
				\pgfpathcurveto{\pgfqpoint{0.201cm}{0.422cm}}{\pgfqpoint{0.276cm}{0.362cm}}{\pgfqpoint{0.309cm}{0.344cm}}
				\pgfpathclose
				\pgfusepath{fill}
			\end{pgfscope}
		\end{pgfscope}
\end{tikzpicture}}

%%%% *************************************************************************** %%%%
%%%% *************************************************************************** %%%%


%%%% ********************* THEOREMS AND CROSS-REFERENCING ********************** %%%%
%%%% *************************************************************************** %%%%

%%%% equations %%%%
\usepackage{chngcntr}
%\renewcommand{\theequation}{\thesmallerdummy}

%%%% relevant packages %%%%
\usepackage{amsthm}
\usepackage[colorlinks=true,linkcolor=red!70!black,citecolor=cyan!25!blue,urlcolor=red!70!black,unicode]{hyperref}
\usepackage[capitalize,compress]{cleveref}

%%%% shortcuts for direct hyperlinks to certain sources %%%%
\newcommand{\stackstag}[1]{Tag~\href{https://stacks.math.columbia.edu/tag/#1}{\textup{#1}}}
\newcommand{\HTTthm}[1]{\href{http://people.math.harvard.edu/~lurie/papers/HTT.pdf\#theorem.#1}{#1}}
\newcommand{\HAthm}[1]{\href{http://people.math.harvard.edu/~lurie/papers/HA.pdf\#theorem.#1}{#1}}
\newcommand{\SAGthm}[1]{\href{https://www.math.ias.edu/~lurie/papers/SAG-rootfile.pdf\#theorem.#1}{#1}}

%%%% theorem styles %%%%
\newtheoremstyle{cthm}
{\topsep}   % ABOVESPACE
{\topsep}   % BELOWSPACE
{\itshape}  % BODYFONT
{0pt}       % INDENT (empty value is the same as 0pt)
{\bfseries} % HEADFONT
{.\enskip---}         % HEADPUNCT
{5pt plus 1pt minus 1pt} % HEADSPACE
{\thmnumber{#2. }\thmname{#1}\thmnote{ \textmd{(#3)}}}          % CUSTOM-HEAD-SPEC

\newtheoremstyle{cdef}
{\topsep}   % ABOVESPACE
{\topsep}   % BELOWSPACE
{\normalfont}  % BODYFONT
{0pt}       % INDENT (empty value is the same as 0pt)
{\bfseries} % HEADFONT
{.\enskip---\enskip}         % HEADPUNCT
{0pt}%{5pt plus 1pt minus 1pt} % HEADSPACE
{\thmnumber{#2. }\thmname{#1}\thmnote{ \textmd{(#3)}}}          % CUSTOM-HEAD-SPEC

\newtheoremstyle{csatanicthm}
{\topsep}   % ABOVESPACE
{\topsep}   % BELOWSPACE
{\itshape}  % BODYFONT
{0pt}       % INDENT (empty value is the same as 0pt)
{\bfseries} % HEADFONT
{.\enskip\GrothendieckLeftDevil}         % HEADPUNCT
{5pt plus 1pt minus 1pt} % HEADSPACE
{\thmnumber{#2. }\thmname{#1}\thmnote{ \textmd{(#3)}}}          % CUSTOM-HEAD-SPEC

\newcounter{theorem}[section]
\renewcommand{\thetheorem}{\arabic{section}.\arabic{theorem}}
%\renewcommand{\thesection}{\S\arabic{section}}
%\renewcommand{\thesubsection}{\S\arabic{subsection}}

%%%% theorem types %%%%
\theoremstyle{cthm}
\newtheorem{thm}[theorem]{Theorem}
\newtheorem{lem}[theorem]{Lemma}
\newtheorem{cor}[theorem]{Corollary}
\newtheorem{prop}[theorem]{Proposition}
\newtheorem{conj}[theorem]{Conjecture}

\theoremstyle{cdef}
\newtheorem{defi}[theorem]{Definition}
\newtheorem{rem}[theorem]{Remark}
\newtheorem{exm}[theorem]{Example}
\newtheorem{cntx}[theorem]{Counterexample}
\newtheorem{nota}[theorem]{Notation}
\newtheorem{warn}[theorem]{Warning}
\newtheorem{con}[theorem]{Construction}

\theoremstyle{csatanicthm}
\newtheorem{sataniclem}[theorem]{Lemma}
\newtheorem{satanicthm}[theorem]{Theorem}

%%%% cross-reference styles %%%%
\counterwithin*{equation}{theorem}
\renewcommand{\theequation}{\thetheorem.\arabic{equation}}

\crefdefaultlabelformat{\textup{#2#1#3}}
\crefformat{theorem}{\textup{#2#1#3}}
\newcommand{\creflastconjunction}{, and\nobreakspace}
%\crefmultiformat{theorem}{\textup{#2#1#3}}{ and~\textup{#2#1#3}}{, \textup{#2#1#3}}{ and~\textup{#2#1#3}}
\crefformat{equation}{\textup{(#2#1#3)}}
\crefformat{footnote}{\textup{#2#1#3}}
\crefname{page}{page}{pages}
\crefname{thm}{Theorem}{Theorems}
\crefname{prop}{Proposition}{Propositions}
\crefname{lem}{Lemma}{Lemmas}
\crefname{cor}{Corollary}{Corollaries}
\crefname{defi}{Definition}{Definitions}
\crefname{rem}{Remark}{Remarks}
\crefname{con}{Construction}{Constructions}
\crefname{exm}{Example}{Examples}
\crefformat{alphanumeratei}{\textup{(#2#1#3)}}
%\crefformat{thm}{Theorem~\textup{#2#1#3}}
%\crefformat{lem}{Lemma~\textup{#2#1#3}}
%\crefformat{cor}{Corollary~\textup{#2#1#3}}
%\crefformat{prop}{Proposition~\textup{#2#1#3}}
%\crefformat{nota}{Notation~\textup{#2#1#3}}
%\crefformat{rem}{Remark~\textup{#2#1#3}}
%\crefformat{con}{Construction~\textup{#2#1#3}}
%\crefformat{defi}{Definition~\textup{#2#1#3}}
%\crefformat{exm}{Example~\textup{#2#1#3}}
%\crefformat{cntx}{Counterexample~\textup{#2#1#3}}
%\crefformat{warn}{Warning~\textup{#2#1#3}}
%\crefformat{con}{Construction~\textup{#2#1#3}}
%\crefformat{conj}{Conjecture~\textup{#2#1#3}}

\crefformat{section}{\S\textup{#2#1#3}}
\crefformat{subsection}{\S\textup{#2#1#3}}
\crefformat{appendix}{\S\textup{#2#1#3}}
\crefrangeformat{section}{\S\S#3#1#4--#5#2#6}
\crefrangeformat{subsection}{\S\S#3#1#4--#5#2#6}

%%%% *************************************************************************** %%%%
%%%% *************************************************************************** %%%%


%%%% ***************************** STYLE CHOICES ******************************* %%%%
%%%% *************************************************************************** %%%%

%%%% footnotes use daggers %%%%
%\DefineFNsymbols*{DaggerIsLoveDaggerIsLife}{{$\dagger$}{$\ddagger$}{$\dagger\dagger$}{$\ddagger\ddagger$}}
%\setfnsymbol{DaggerIsLoveDaggerIsLife}
\counterwithin*{footnote}{section}
\renewcommand{\thefootnote}{\textup{(\thesection.\arabic{footnote})}}

%%%% fixing \item to include correct referencing of manually set labels %%%%
\let\realItem\item  % save the original item command
\makeatletter
\newcommand{\customitem}[1][]{%
	\ifstrempty{#1}%
	{\realItem}%
	{\phantomsection\protected@edef\cref@currentlabel{[alphanumeratei][1][]{$#1$}}\realItem[$(#1)$]}%
}
\makeatother

%%%% appendices after sections %%%%

\DeclareSectionCommand[
afterskip=2.3ex plus .2ex,
beforeskip=-3.5ex plus -1ex minus -.2ex,
indent=0pt,
level=1,
font=\Large\centering,
tocstyle=section,
tocindent=0em,
tocnumwidth=0em,
style=section]{csectionappendix}

\newcommand{\sectionappendix}[1]{%
	\csectionappendix*{Appendix to \S\thesection.\enskip#1}%
	\addcontentsline{toc}{csectionappendix}{Appendix to \S\thesection.\texorpdfstring{\enskip}{ }#1}%
	\renewcommand*{\sectionmarkformat}{%
		Appendix to \S\thesection\autodot\enskip}%
	\sectionmark{#1}%
}

\newcommand{\postsectionappendix}{%
	\renewcommand*{\sectionmarkformat}{%
		\ParagraphOrNot\thesection\autodot\enskip}%
}

%%%% well-behaved numbered paragraphs %%%%
\newtheoremstyle{cnumpar}
{\topsep}   % ABOVESPACE
{\topsep}   % BELOWSPACE
{\normalfont}  % BODYFONT
{0pt}       % INDENT (empty value is the same as 0pt)
{\bfseries} % HEADFONT
{\enskip---\enskip}         % HEADPUNCT
{0pt} % HEADSPACE
{\thmnumber{#2.\ifstrempty{#3}{}{ }}\thmname{#3}}          % CUSTOM-HEAD-SPEC

\theoremstyle{cnumpar}
\newtheorem{numpar}[theorem]{numpar}
\crefformat{numpar}{\textup{#2#1#3}}

%%%% fixing the spacing aroung \left( and right) %%%%
\let\originalleft\left
\let\originalright\right
\renewcommand{\left}{\mathopen{}\mathclose\bgroup\originalleft}
\renewcommand{\right}{\aftergroup\egroup\originalright}

%%%% display black box to the right of an equation %%%%
\newcommand{\equationblackbox}{\begin{tikzpicture}[baseline=(tmp.base),remember picture]
		\node[inner sep=0pt](tmp){\vphantom{1}};
		\begin{scope}[overlay]
			\path (current page text area.east|-tmp.base)
			node[anchor=base east,inner sep=0pt,outer sep=0pt]{$\blacksquare$};
		\end{scope}
\end{tikzpicture}}

%%%% accommodate table of contents for 3-digit numbers %%%%
\makeatletter
\renewcommand*\l@subsection{\@dottedtocline{2}{1.5em}{2.4em}}
\renewcommand{\@pnumwidth}{2em} 
\renewcommand{\@tocrmarg}{3em}
\newcommand{\vast}[1]{\bBigg@{#1}}
\makeatother

%%%% make all pages the same height %%%%
\flushbottom

%%%% upright parentheses even in \itshape environments %%%%
\newcommand{\embrace}[1]{\textup{(}#1\textup{)}}

%%%% *************************************************************************** %%%%
%%%% *************************************************************************** %%%%


%%%% ******************************* SHORTCUTS ********************************* %%%%
%%%% *************************************************************************** %%%%

%%%% miscellaneous %%%%
\newcommand{\blank}{\phantom{w}}
\newcommand{\localise}[1]{{\textstyle\frac{1}{#1}}}
%\mathchardef\mhyph="2D
\DeclareMathSymbol{\mhyph}{\mathord}{AMSa}{"39}

%%%% many alphabets %%%%
\renewcommand{\epsilon}{\varepsilon}

% \mathrm, may change
\newcommand{\B}{\mathrm{B}}
\newcommand{\C}{\operatorname{C}}
\newcommand{\D}{\mathrm{D}}
\newcommand{\F}{\operatorname{F}}
\renewcommand{\H}{\mathrm{H}}
\newcommand{\K}{\operatorname{K}}
\renewcommand{\L}{\mathrm{L}}
\newcommand{\N}{\operatorname{N}}
\newcommand{\R}{\mathrm{R}}

% \mathcal 
\newcommand{\Aa}{\mathcal{A}}
\newcommand{\Bb}{\mathcal{B}}
\newcommand{\Cc}{\mathcal{C}}
\newcommand{\Dd}{\mathcal{D}}
\newcommand{\Ee}{\mathcal{E}}
\newcommand{\Ff}{\mathcal{F}}
\newcommand{\Gg}{\mathcal{G}}
\newcommand{\Hh}{\mathcal{H}}
\newcommand{\Ii}{\mathcal{I}}
\newcommand{\Jj}{\mathcal{J}}
\newcommand{\Kk}{\mathcal{K}}
\newcommand{\Ll}{\mathcal{L}}
\newcommand{\Mm}{\mathcal{M}}
\newcommand{\Nn}{\mathcal{N}}
\newcommand{\Oo}{\mathcal{O}}
\newcommand{\Pp}{\mathcal{P}}
\newcommand{\Qq}{\mathcal{Q}}
\newcommand{\Rr}{\mathcal{R}}
\newcommand{\Ss}{\mathcal{S}}
\newcommand{\Tt}{\mathcal{T}}
\newcommand{\Uu}{\mathcal{U}}
\newcommand{\Vv}{\mathcal{V}}
\newcommand{\Ww}{\mathcal{W}}
\newcommand{\Xx}{\mathcal{X}}
\newcommand{\Yy}{\mathcal{Y}}
\newcommand{\Zz}{\mathcal{Z}}

% mathbb
\newcommand{\IA}{\mathbb{A}}
\newcommand{\IB}{\mathbb{B}}
\newcommand{\IC}{\mathbb{C}}
\newcommand{\ID}{\mathbb{D}}
\newcommand{\IE}{\mathbb{E}}
\newcommand{\IF}{\mathbb{F}}
\newcommand{\IG}{\mathbb{G}}
\newcommand{\IH}{\mathbb{H}}
\newcommand{\II}{\mathbb{I}}
\renewcommand{\IJ}{\mathbb{J}}
\newcommand{\IK}{\mathbb{K}}
\newcommand{\IL}{\mathbb{L}}
\newcommand{\IM}{\mathbb{M}}
\newcommand{\IN}{\mathbb{N}}
\newcommand{\IO}{\mathbb{O}}
\newcommand{\IP}{\mathbb{P}}
\newcommand{\IQ}{\mathbb{Q}}
\newcommand{\IR}{\mathbb{R}}
\newcommand{\IS}{\mathbb{S}}
\newcommand{\IT}{\mathbb{T}}
\newcommand{\IU}{\mathbb{U}}
\newcommand{\IV}{\mathbb{V}}
\newcommand{\IW}{\mathbb{W}}
\newcommand{\IX}{\mathbb{X}}
\newcommand{\IY}{\mathbb{Y}}
\newcommand{\IZ}{\mathbb{Z}}

% temporary greek mathbb
\newcommand{\IDelta}{
	\mathchoice{\Delta\llap{\scalebox{0.775}{$\Delta$\hspace{0.025em}}}}%
	{\Delta\llap{\scalebox{0.775}{$\Delta$\hspace{0.025em}}}}%
	{\Delta\llap{\scalebox{0.775}{$\scriptstyle\Delta$\hspace{0.025em}}}}%
	{\Delta\llap{\scalebox{0.775}{$\scriptscriptstyle\Delta$\hspace{0.025em}}}}
}%{\boldsymbol{\Delta}}

% mathfrak
\renewcommand{\AA}{\mathfrak{A}}
\newcommand{\BB}{\mathfrak{B}}
\newcommand{\CC}{\mathfrak{C}}
\newcommand{\DD}{\mathfrak{D}}
\newcommand{\EE}{\mathfrak{E}}
\newcommand{\FF}{\mathfrak{F}}
\newcommand{\GG}{\mathfrak{G}}
\newcommand{\HH}{\mathfrak{H}}
\newcommand{\JJ}{\mathfrak{J}}
\newcommand{\KK}{\mathfrak{K}}
\newcommand{\LL}{\mathfrak{L}}
\newcommand{\MM}{\mathfrak{M}}
\newcommand{\NN}{\mathfrak{N}}
\newcommand{\OO}{\mathfrak{O}}
\newcommand{\PP}{\mathfrak{P}}
\newcommand{\QQ}{\mathfrak{Q}}
\newcommand{\RR}{\mathfrak{R}}
\renewcommand{\SS}{\mathfrak{S}}
\newcommand{\TT}{\mathfrak{T}}
\newcommand{\UU}{\mathfrak{U}}
\newcommand{\VV}{\mathfrak{V}}
\newcommand{\WW}{\mathfrak{W}}
\newcommand{\XX}{\mathfrak{X}}
\newcommand{\YY}{\mathfrak{Y}}
\newcommand{\ZZ}{\mathfrak{Z}}

\renewcommand{\aa}{\mathfrak{a}}
\newcommand{\bb}{\mathfrak{b}}
\newcommand{\cc}{\mathfrak{c}}
\newcommand{\dd}{\mathfrak{d}}
\newcommand{\ee}{\mathfrak{e}}
\newcommand{\ff}{\mathfrak{f}}
\let\gge\gg
\renewcommand{\gg}{\mathfrak{g}}
\newcommand{\hh}{\mathfrak{h}}
\newcommand{\ii}{\mathfrak{i}}
\newcommand{\jj}{\mathfrak{j}}
\newcommand{\kk}{\mathfrak{k}}
\let\lle\ll
\renewcommand{\ll}{\mathfrak{l}}
\newcommand{\mm}{\mathfrak{m}}
\newcommand{\nn}{\mathfrak{n}}
\newcommand{\oo}{\mathfrak{o}}
\newcommand{\pp}{\mathfrak{p}}
\newcommand{\qq}{\mathfrak{q}}
\newcommand{\rr}{\mathfrak{r}}
%\newcommand{\ss}{\mathfrak{s}}
%\newcommand{\tt}{\mathfrak{t}}
\newcommand{\uu}{\mathfrak{u}}
\newcommand{\vv}{\mathfrak{v}}
\newcommand{\ww}{\mathfrak{w}}
\newcommand{\xx}{\mathfrak{x}}
\newcommand{\yy}{\mathfrak{y}}
\newcommand{\zz}{\mathfrak{z}}

%Japanese
\newcommand\Yo{\!\text{\usefont{U}{min}{m}{n}\symbol{'210}}\hspace{-0.125ex}\vphantom{Y}}

\DeclareFontFamily{U}{min}{}
\DeclareFontShape{U}{min}{m}{n}{<-> udmj30}{}


%%%% math operators %%%%

%% category theory
\DeclareMathOperator{\Ar}{Ar}              % arrow category 
\DeclareMathOperator{\coeq}{coeq}          % coequaliser
\DeclareMathOperator{\cofib}{cofib}        % cofibre
\DeclareMathOperator{\const}{const}        % constant functor functor
\DeclareMathOperator{\core}{core}          % maximal subanima
\DeclareMathOperator{\eq}{eq}              % equaliser
\DeclareMathOperator{\ev}{ev}              % evaluation functor
\DeclareMathOperator{\fib}{fib}            % fibre
\DeclareMathOperator{\Fun}{Fun}            % functor category 
\DeclareMathOperator{\id}{id}              % identity
\DeclareMathOperator{\Lan}{Lan}            % left Kan extension
\DeclareMathOperator{\Nat}{Nat}            % natural transformations
\DeclareMathOperator{\pr}{pr}              % projection to factor
\DeclareMathOperator{\PSh}{PSh}            % presheaf category 
\DeclareMathOperator{\Ran}{Ran}            % right Kan extension
\DeclareMathOperator{\Sing}{Sing}          % singular simplicial set functor
\DeclareMathOperator{\TwAr}{TwAr}          % twisted arrow category

% shortcut for finite animae with slight spacing modifications
\newcommand{\FinAn}{\smash{\cat{An}_{*/}^{\mathrm{fin}}}\vphantom{\cat{An}_{*/}}}

% limits and colimits
\DeclareMathOperator*{\colimit}{colim}
\DeclareMathOperator*{\hocolimit}{hocolim}
\DeclareMathOperator*{\holimit}{holim}
\DeclareMathOperator*{\limit}{lim}

% opposite category
\newcommand{\op}{\mathrm{op}}

% categories are typeset in mathrm
\newcommand{\cat}[1]{\mathrm{#1}}

% some inline categories
\newcommand{\InlineDelta}{\begin{tikzcd}[cramped, column sep=small,ampersand replacement=\&]\bullet \rar \& \bullet\end{tikzcd}}
\newcommand{\InlineJ}{\begin{tikzcd}[cramped, column sep=small,ampersand replacement=\&]\bullet \rar[bend left] \& \lar[bend left]\bullet\end{tikzcd}}
\newlength{\WidthOfAsterisk}
\settowidth{\WidthOfAsterisk}{$*$}
\newcommand{\InlineS}{\begin{tikzcd}[cramped, column sep=small,ampersand replacement=\&]* \rar[bend left] \& \lar[bend left]\phantom{*}\end{tikzcd}\hspace{-\the\WidthOfAsterisk}S^0}
\newcommand{\InlineFin}{\langle 0\rangle\hspace{-\the\WidthOfAsterisk}\begin{tikzcd}[cramped, column sep=small,ampersand replacement=\&]\phantom{*} \rar[bend left] \& \lar[bend left]\phantom{*}\end{tikzcd}\hspace{-\the\WidthOfAsterisk}\langle 1\rangle}

% group theory
\DeclareMathOperator{\Aut}{Aut}            % automorphism group
\DeclareMathOperator{\End}{End}            % endomorphism monoid
\DeclareMathOperator{\Gal}{Gal}            % Galois group
\DeclareMathOperator{\GL}{GL}              % general linear group
\DeclareMathOperator{\SL}{SL}              % special linear group

% linear algebra
\DeclareMathOperator{\cha}{char}           % characteristic
\renewcommand{\det}{\operatorname{det}}    % determinant
\DeclareMathOperator{\Tr}{Tr}              % trace

% commutative algebra
\DeclareMathOperator{\Hom}{Hom}            % Hom
\DeclareMathOperator{\HOM}{\underline{Hom}}% internal Hom
\newcommand{\Frac}{\operatorname{Frac}}
\newcommand{\Tor}{\operatorname{Tor}}
\newcommand{\Ext}{\operatorname{Ext}}
\newcommand{\EXT}{\operatorname{\underline{Ext}}}
\newcommand{\Der}{\operatorname{Der}}
\newcommand{\Sym}{\operatorname{Sym}}
\newcommand{\im}{\operatorname{im}}
\newcommand{\coker}{\operatorname{coker}}
\newcommand{\rad}{\operatorname{rad}}
\newcommand{\supp}{\operatorname{supp}}
\newcommand{\rk}{\operatorname{rk}}
\newcommand{\length}{\operatorname{length}}
\newcommand{\depth}{\operatorname{depth}}
\newcommand{\Fil}{\operatorname{Fil}}
\newcommand{\nil}{\operatorname{nil}}
\newcommand{\gr}{\operatorname{gr}}

\newcommand{\sh}{\mathrm{sh}}
\newcommand{\sep}{\mathrm{sep}}
\newcommand{\ab}{\mathrm{ab}}

% algebraic geometry
\newcommand{\Spec}{\operatorname{Spec}}
\newcommand{\Spf}{\operatorname{Spf}}
\newcommand{\Cl}{\operatorname{Cl}}
\newcommand{\Pic}{\operatorname{Pic}}
\newcommand{\Bun}{\operatorname{Bun}}
\newcommand{\Div}{\operatorname{Div}}
\renewcommand{\div}{\operatorname{div}}
\newcommand{\codim}{\operatorname{codim}}
\newcommand{\res}{\operatorname{res}}

\newcommand{\red}{\mathrm{red}}
\newcommand{\Zar}{\mathrm{Zar}}
\newcommand{\fppf}{\mathrm{fppf}}
\newcommand{\fpqc}{\mathrm{fpqc}}
\newcommand{\et}{\mathrm{\acute{e}t}}
\newcommand{\crys}{\mathrm{crys}}
\newcommand{\cont}{\mathrm{cont}}
\renewcommand{\inf}{\mathrm{inf}}
\newcommand{\dR}{\mathrm{dR}}

% arithmetic geometry
\newcommand{\Frob}{\operatorname{Frob}}
\newcommand{\ord}{\operatorname{ord}}
\newcommand{\cycl}{\mathrm{cycl}}
\newcommand{\Prism}{{\mathbbl{\Delta}}}
\newcommand{\qOmega}{q\mhyph\Omega}
\newcommand{\qhatOmega}{q\mhyph\widehat{\Omega}}
\newcommand{\qHodge}{q\mhyph\!\operatorname{Hdg}}
\newcommand{\qHatge}{q\mhyph\widehat{\operatorname{Hdg}}\vphantom{\Omega}}
\newcommand{\perf}{\mathrm{perf}}
\newcommand{\perfd}{\mathrm{perfd}}
\newcommand{\qpower}{\llbracket q-1\rrbracket}
\newcommand{\qcrys}{{q\mhyph\mathrm{crys}}}
\newcommand{\qdR}{{q\mhyph\mathrm{dR}}}
\newcommand{\gh}{\operatorname{gh}}

% condensed
\newcommand{\solid}{{\mathchoice{\scalebox{0.72}{$\blacksquare$}}{\scalebox{0.72}{$\blacksquare$}}{\scalebox{0.72}{$\scriptstyle\blacksquare$}}{\scalebox{0.72}{$\scriptscriptstyle\blacksquare$}}}}%{{\scriptscriptstyle\blacksquare}}

% derived and infinity categories
\newcommand{\Tot}{\operatorname{Tot}}
\newcommand{\RHom}{\operatorname{RHom}}
\newcommand{\RHhom}{\operatorname{R\underline{Hom}}}
\newcommand{\Hhom}{\operatorname{\underline{Hom}}}
\newcommand{\Ch}{\operatorname{Ch}}
\newcommand{\Kos}{\operatorname{Kos}}
\newcommand{\cone}{\operatorname{cone}}
\newcommand{\Map}{\operatorname{Map}}
\newcommand{\CAlg}{\operatorname{CAlg}}
\newcommand{\Cat}{\cat{Cat}}

% "d"-operator with automatic correct spacing
\renewcommand*\d{\mathop{}\!\mathrm{d}}

% several kinds of derived or completed tensor products
\newcommand{\cotimes}{\mathbin{\widehat{\otimes}}}
\newcommand{\lotimes}{\otimes^\L}
\newcommand{\soltimes}{\otimes^\solid}
\newcommand{\lsoltimes}{\otimes^{\L\solid}}
\newcommand{\clotimes}{\mathbin{\smash{\widehat{\otimes}}\vphantom{\otimes}}^\L}

\newcommand{\phantombigparenthesis}{\mathchoice{\vphantom{\big\rparen}}{}{}{}}
%%%% paired delimiters %%%%
\DeclarePairedDelimiter{\parens}{\lparen}{\rparen{\phantombigparenthesis}}
\DeclarePairedDelimiter{\braces}{\lbrace}{\rbrace{\phantombigparenthesis}}
\DeclarePairedDelimiter{\brackets}{[}{]{\phantombigparenthesis}}
\DeclarePairedDelimiter{\abs}{\lvert}{\rvert{\phantombigparenthesis}}


%%%% fancy arrows %%%%

% arrow lengths 
\newlength{\arrowlength}
\settowidth{\arrowlength}{$\rightarrow$}
\newlength{\longarrowlength}
\settowidth{\longarrowlength}{$\longrightarrow$}

% long arrow with left and right heads
\DeclareRobustCommand\longtwoheadrightarrow
{\relbar\joinrel\twoheadrightarrow}
\DeclareRobustCommand\longtwoheadleftarrow
{\twoheadleftarrow\joinrel\relbar}

% somewhat ugly double arrow
\newcommand{\doublemorphism}{%
	\mathrel{\stackon[-0.47em]{\stackunder[-0.47em]{\phantom{-}}{\smash{\longrightarrow}\vphantom{-}}}{\smash{\longrightarrow}\vphantom{-}}}%
}

% short double arrow
\newcommand{\shortdoublemorphism}{%
	\mathrel{\stackon[-0.47em]{\stackunder[-0.47em]{\phantom{-}}{\smash{\rightarrow}\vphantom{-}}}{\smash{\rightarrow}\vphantom{-}}}%
}

% double left-and-right arrow
\newcommand{\doublelrmorphism}{%
	\mathrel{\stackon[-0.47em]{\stackunder[-0.47em]{\phantom{-}}{\smash{\longleftarrow}\vphantom{-}}}{\smash{\longrightarrow}\vphantom{-}}}%
}


% short double left-and-right arrow
\newcommand{\shortdoublelrmorphism}{%
	\mathrel{\stackon[-0.47em]{\stackunder[-0.47em]{\phantom{-}}{\smash{\leftarrow}\vphantom{-}}}{\smash{\rightarrow}\vphantom{-}}}%
}

%\colon in opposite direction, e.g. for adjunctions
\newcommand*\noloc{%
	\nobreak
	\mskip6mu plus1mu
	\mathpunct{}%
	\nonscript
	\mkern-\thinmuskip
	{:}%
	\mskip2mu
	\relax
}


%%%% tikz-cd convenience %%%%
\tikzcdset{
	arrow style=tikz, 
	diagrams={>=to, line cap=round, line join=round, line width=rule_thickness}, arrows={line width=rule_thickness},
	cells={font=\everymath\expandafter{\the\everymath\displaystyle}},
}

%% pushouts and pullbacks, TEMPORARY %%
\font\msamdisplaystyle=msam10 at 11pt
\font\msamscriptstyle=msam7 at 7pt
\font\msamscriptscriptstyle=msam5 at 5pt
\newcommand{\pushoutsign}{\mathchoice%
	{\text{\msamdisplaystyle \char"3A}}%
	{\text{\msamdisplaystyle \char"3A}}%
	{\text{\msamscriptstyle \char"3A}}%
	{\text{\msamscriptscriptstyle \char"3A}}%
}

\newcommand{\pullbacksign}{\mathchoice%
	{\text{\msamdisplaystyle \char"3B}}%
	{\text{\msamdisplaystyle \char"3B}}%
	{\text{\msamscriptstyle \char"3B}}%
	{\text{\msamscriptscriptstyle \char"3B}}%
}

%\newcommand{\pullbacksign}{\tikz[line width=rule_thickness, line join=round, line cap=round, baseline=(pb.base), inner sep=0ex]{\node (pb) at (0,0) {\phantom{\textup{.}}};\draw (pb.base) ++ (-0.07ex,0.051ex) -- ++(1.509ex,0) -- ++(0,1.509ex);\node at (0,1.35ex) {\textup{.}};}}
%{\hspace{-0.325ex}\tikz[baseline=(pb.base)]{\draw[line width=rule_thickness, line cap=round] (0,0) ++ (-0.75ex,-0.75ex) -- ++(1.5ex,0ex) -- ++ (0ex,1.5ex);\node at (-0.6ex,0.6ex) {.};\node (pb) at (0,0) {\phantom{x}};}}
%\newcommand{\pushoutsign}{\tikz[line width=rule_thickness, line join=round, line cap=round, baseline=(po.base), inner sep=0ex]{\node (po) at (0,0) {\phantom{\textup{.}}};\draw (po.base) ++ (0,0.051ex) -- ++(0,1.509ex) -- ++(1.509ex,0);\node at (1.439ex,0) {\textup{.}};}}
%{\hspace{0.2ex}\tikz[baseline=(po.base)]{\draw (0,0) ++ (-0.75ex,-0.75ex) -- ++(0ex,1.5ex) -- ++ (1.5ex,0ex);\node at (0.6ex,-0.6ex) {\textup{.}};\node (po) at (0,0) {\phantom{x}};}}
\tikzcdset{
	pullback/.style = {dash, phantom, "\textstyle\pullbacksign", start anchor=center, end anchor=center},
	hpullback/.style = {dash, phantom, "\textstyle\rlap{\phantom{$\pullbacksign$}}\smash{\pullbacksign_h}", start anchor=center, end anchor=center},
	pushout/.style = {dash, phantom, "\textstyle\pushoutsign", start anchor=center, end anchor=center},
	commutes/.style = {dash, phantom, "\scriptscriptstyle/\!/\!/", start anchor=center, end anchor=center},
	hcommutes/.style = {dash, phantom, "\phantom{\scriptscriptstyle/\!/\!/}\smash{\scriptscriptstyle/\!/\!/_{\scriptstyle h}}", start anchor=center, end anchor=center}
}

\tikzcdset{
	eqtop/.style={dash, shift right=#1},
	eqtop/.default={0.1em},
	eqbot/.style={dash, shift left=#1},
	eqbot/.default={0.1em}
}
\newcommand{\eqar}[1][]{\ar[#1,eqtop]\ar[#1,eqbot]}
\newcommand{\doublear}[2][]{\ar[#2,#1,white,double, double equal sign distance,-{implies[black]}]\eqar[#2,shorten >=0.22em]}

\tikzcdset{
	mono/.style={#1 hook->},
	mono/.default={right},
	epi/.style={->>},
	iso/.style={"\sim"{sloped, above}}
}

\tikzcdset{
	dashed/.style={dash pattern=on 0.56ex off 0.56ex}
}

\tikzcdset{
	longarrowwidth/.style={column sep={\the\longarrowlength}},
	arrowwidth/.style={column sep={\the\arrowlength}}
}

\tikzset{
	symbol/.style={
		draw=none,
		every to/.append style={
			edge node={node [sloped, allow upside down, auto=false]{$#1$}}}
	}
}

%%%% modifiers %%%%
\newcommand{\ov}[1]{\smash{\overline{#1}}\vphantom{#1}}
\newcommand{\complete}{\wedge}


