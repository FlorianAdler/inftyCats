\section{Category theory}\label{sec:CategoryTheory}
We assume you are familiar with categories, functors, natural transformations and the Yoneda lemma. In fact, you will probably be familiar with most of the stuff in this section, so we'll leave out many proofs (but give them later in the $\infty$-categorical context).

\subsection{Adjunctions}
\begin{defi}\label{def:1Adjunction}
	Let $L\colon \Cc\rightarrow \Dd$ be a functor.
	\begin{alphanumerate}
		\item Let $y\in \Dd$. An object $x\in \Cc$ is a \emph{right adjoint object to $y$ under $L$} if there exists an equivalence
		\begin{equation*}
			\Hom_\Cc(-,x)\simeq \Hom_\Dd\bigl(L(-),y\bigr)
		\end{equation*}
		in the functor category $\Fun(\Cc^\op,\cat{Set})$.
		\item A functor $R\colon \Dd\rightarrow \Cc$ is a \emph{right adjoint of $L$} if there exists an equivalence
		\begin{equation*}
			\Hom_\Cc\bigl(-,R(-)\bigr)\simeq \Hom_\Dd \bigl(L(-),-\bigr)
		\end{equation*}
		in the functor category $\Fun(\Cc^\op\times \Dd,\cat{Set})$. In this case we write $L\dashv R$.
	\end{alphanumerate}
\end{defi}
\begin{lem}[\enquote{Adjoints can be constructed pointwise}]\label{lem:1Adjunction}
	A functor $L\colon \Cc\rightarrow \Dd$ has a right adjoint if and only if every $y\in \Dd$ has a right adjoint object $x\in \Cc$.
\end{lem}
\begin{proof}
	One implication is trivial: If $R\colon \Dd\rightarrow \Cc$ is a right adjoint of $L$, then $R(y)$ is a right adjoint object of $y$ for every $y\in \Dd$. The other implication is left as an exercise. We'll prove an $\infty$-categorical variant in \cref{lem:Adjunction}.
\end{proof}
\begin{con}\label{con:1Unit}
	Let $L\colon \Cc \shortdoublelrmorphism \Dd\noloc R$ be an adjunction. For every $x\in \Cc$, the identity $\id_{L(x)}\colon L(x)\rightarrow L(x)$ is adjoint to a morphism $u_x\colon x\rightarrow RL(x)$. One can show that these morphisms assemble into a natural transformation $u\colon \id_\Cc\Rightarrow RL$, called the \emph{unit} of the adjunction. Dually, there is a \emph{counit} $c\colon LR\Rightarrow \id_\Dd$.
\end{con}
\begin{lem}[Triangle identities]\label{lem:1TriangleIdentities}
	Let $L\colon \Cc\shortdoublelrmorphism \Dd\noloc R$ be an adjunction. Then the diagrams 
	\begin{equation*}
		\begin{tikzcd}
			L \doublear["Lu"{black,above=0.1em}]{r}\doublear["\id_L"'{black}]{dr} & LRL\doublear["cL"{black,right=0.1em}]{d}\dar[phantom,""{name=A}]\arrow[from=1-1,to=A,commutes,pos=0.7]\\
			& L
		\end{tikzcd}\quad\text{and}\quad
		\begin{tikzcd}
			R \doublear["uR"{black,above=0.1em}]{r}\doublear["\id_R"'{black}]{dr} & RLR\doublear["Rc"{black,right=0.1em}]{d}\dar[phantom,""{name=A}]\arrow[from=1-1,to=A,commutes,pos=0.7]\\
			& R
		\end{tikzcd}
	\end{equation*}
	commute. Conversely, if $L$, $R$ are functors and $u:\id_\Cc\Rightarrow RL$, $c\colon LR\Rightarrow \id_\Dd$ are natural transformations such that the diagrams above commute, then $L$ and $R$ determine an adjunction. 
\end{lem}
\begin{proof}
	Exercise. We'll prove an $\infty$-categorical variant in \cref{lem:TriangleIdentities}.
\end{proof}
\begin{cor}\label{cor:1FunctorCategoryAdjunctions}
	Let $L\colon \Cc \shortdoublelrmorphism \Dd\noloc R$ be an adjunction and let $\Ii$ be another category. Then the pre- and postcomposition functors determine adjunctions
	\begin{align*}
		L\circ-\colon \Fun(\Ii,\Cc)&\doublelrmorphism \Fun(\Ii,\Dd)\noloc R\circ -\,,\\
		{-}\circ {R}\colon \Fun(\Cc,\Ii)&\doublelrmorphism \Fun(\Dd,\Ii)\noloc {-}\circ {L}\,.
	\end{align*}
\end{cor}
\begin{proof}
	By \cref{lem:1TriangleIdentities}, we only need to construct unit and a counit transformations satisfying the triangle identities. These are immediately inherited from the adjunction $L\dashv R$.
\end{proof}
\subsection{Limits and colimits}
\begin{defi}\label{def:1Colimits}
	Let $F\colon \Ii\rightarrow \Cc$ be a functor. A \emph{limit of $F$}, denoted $\limit F$ (or sometimes $\limit_{i\in\Ii}F(i)$), is a right adjoint object of $F$ under the functor $\operatorname{const}\colon\Cc\rightarrow \Fun(\Ii,\Cc)$ that sends $i\in\Ii$ to the constant functor with value $i$. Dually, a \emph{colimit of $F$}, denoted $\colimit F$ (or sometimes $\colimit_{i\in\Ii}F(i)$), is a left adjoint object of $F$ under $\operatorname{const}$.
\end{defi}
Concretely, \cref{def:1Colimits} means that we have the following natural bijections for all $x,y\in \Cc$:
\begin{align*}
	\Hom_\Cc(x,\limit F)&\cong \Hom_{\Fun(\Ii,\Cc)}(\operatorname{const}x,F)\,,\\ \Hom_\Cc(\colimit F,y)&\cong \Hom_{\Fun(\Ii,\Cc)}(F,\operatorname{const}y)\,.
\end{align*}
\begin{lem}\label{lem:1AdjointsPreserveColimits}
	Left adjoint functors preserve colimits and right adjoint functors preserve limits.
\end{lem}
\begin{proof}
	Let $L\colon \Cc \shortdoublelrmorphism \Dd\noloc R$ be an adjunction and let $\Ii$ be another category. By \cref{cor:1FunctorCategoryAdjunctions}, the postcomposition functors $L_*\coloneqq L\circ -$ and $R_*\coloneqq R\circ -$ determine an adjunction
	\begin{equation*}
		L_*\colon \Fun(\Ii,\Cc)\doublelrmorphism \Fun(\Ii,\Dd)\noloc R_*
	\end{equation*}
	Now let $F\colon \Ii\rightarrow \Cc$ be a functor admitting a colimit $\colimit F$. Since left adjoint functors clearly preserve left adjoint objects, we see that $L(\colimit F)$ is a left adjoint object of $F$ under $\const R(-)$. But $\const R(-)\simeq R_*\const\colon \Dd\rightarrow \Fun(\Ii,\Cc)$. A left adjoint object of $F$ under $R_*\const$ is also a left adjoint object of $L_*F$ under $\const\colon \Dd\rightarrow \Fun(\Ii,\Dd)$ by the adjunction above. In summary, this proves that $L(\colimit F)$ is a left adjoint object of $L_*F$ under $\const$, which is precisely what we want. The case of limits is analogous.
\end{proof}
\begin{lem}[\enquote{Colimits in functor categories are computed pointwise.}]\label{lem:1ColimitsInFunctorCategories}
	Let $\Cc$, $\Dd$, and $\Ii$ be categories such that $\Dd$ has all $\Ii$-shaped colimits; that is, all functors $\Ii\rightarrow \Dd$ admit colimits. Then $\Fun(\Cc,\Dd)$ has again all $\Ii$-shaped colimits and the evaluation functor 
	\begin{equation*}
		\ev_x\colon \Fun(\Cc,\Dd)\longrightarrow \Fun\bigl(\{x\},\Dd\bigr)\simeq \Dd
	\end{equation*}
	preserves $\Ii$-shaped colimits for all $x\in \Cc$. A dual assertion holds for limits.
\end{lem}
\begin{proof}
	By \cref{lem:1Adjunction}, the condition that $\Dd$ has all $\Ii$-shaped colimits implies that the functor $\const\colon \Dd\rightarrow \Fun(\Ii,\Dd)$ has a left adjoint $\colimit\colon \Fun(\Ii,\Dd)\rightarrow \Dd$. Under the \enquote{currying} equivalence
	\begin{equation*}
		\Fun\bigl(\Ii,\Fun(\Cc,\Dd)\bigr)\simeq \Fun\bigl(\Cc,\Fun(\Ii,\Dd)\bigr)\,,
	\end{equation*}
	the functor $\const\colon \Fun(\Cc,\Dd)\rightarrow \Fun(\Ii,\Fun(\Cc,\Dd))$ corresponds to the postcomposition functor $\const_*\colon \Fun(\Cc,\Dd)\rightarrow \Fun(\Cc,\Fun(\Ii,\Dd))$. By \cref{cor:1FunctorCategoryAdjunctions}, we have an adjunction
	\begin{equation*}
		{\colimit}_*\colon \Fun\bigl(\Cc,\Fun(\Ii,\Dd)\bigr)\doublelrmorphism\Fun(\Cc,\Dd)\noloc \const_*\,.
	\end{equation*}
	Hence $\const\colon \Fun(\Cc,\Dd)\rightarrow \Fun(\Ii,\Fun(\Cc,\Dd))$ has a left adjoint too, which proves that $\Fun(\Cc,\Dd)$ has $\Ii$-shaped colimits. The additional assertion that $\ev_x$ preserves $\Ii$-shaped colimits follows by unravelling how $\colimit$ is constructed from $\colimit_*$.
\end{proof}
\subsection{Kan extensions}
\begin{numpar}[Setup]\label{par:1KanExtensionSetup}
	Suppose we are given functors $f$ and $F$ as follows:
	\begin{equation*}
		\begin{tikzcd}
			\Cc\rar["F"]\dar["f"'] & \Dd\\
			\Cc'\urar[dashed] &
		\end{tikzcd}
	\end{equation*}
	Often one would like to extend $F$ to a functor $F'\colon \Cc'\rightarrow\Dd$. Of course, in general there's no such functor making the diagram above commute, and if there is, it might not be unique.
\end{numpar}
\begin{defi}\label{def:1KanExtensions}
	In the situation of Setup~\cref{par:1KanExtensionSetup}, a \emph{left Kan extension of $F$ along $f$}, denoted $\Lan_fF\colon \Cc'\rightarrow \Dd$, is a left adjoint object of $F$ under $f^*=-\circ f\colon \Fun(\Cc',\Dd)\rightarrow \Fun(\Cc,\Dd)$. Dually, a \emph{right Kan extension of $F$ along $f$}, denoted $\Ran_fF\colon \Cc'\rightarrow\Dd$, is a right adjoint object of $F$ under $f^*$.
\end{defi}
\begin{warn}\label{warn:KanDoesntExtend}
	In general, even if the respective Kan extensions exist, the diagrams
	\begin{equation*}
		\begin{tikzcd}
			\Cc\dar["f"']\rar["F",""{name=B,sloped}]& \Dd\arrow[from=B,to=2-1,draw=none,"\Longleftarrow"{sloped,marking,pos=0.5}]\\
			\Cc'\urar["\Lan_fF"']
		\end{tikzcd}
		\quad\text{and}\quad
		\begin{tikzcd}
			\Cc\dar["f"']\rar["F",""{name=B,sloped}]& \Dd\arrow[from=B,to=2-1,draw=none,"\Longrightarrow"{sloped,marking,pos=0.5}]\\
			\Cc'\urar["\Ran_fF"']
		\end{tikzcd}
	\end{equation*}
	only commute up to the indicated natural transformations. Indeed, the defining property from \cref{def:1KanExtensions} says that there are natural bijections
	\begin{align*}
		\Hom_{\Fun(\Cc',\Dd)}(\Lan_fF,F')&\cong \Hom_{\Fun(\Cc,\Dd)}(F,F'\circ f)\,,\\
		\Hom_{\Fun(\Cc',\Dd)}(F',\Ran_fF)&\cong \Hom_{\Fun(\Cc,\Dd)}(F'\circ f,F)\,,
	\end{align*}
	for all $F'\colon \Cc'\rightarrow \Dd$. Plugging in $F'=\Lan_fF$ , then taking the image of $\id_{\Lan_fF}$ produces the indicated natural transformation; and likewise for $\Ran_fF$ (so in other words, we're considering the unit of the adjunction $\Lan_f\dashv f^*$ and the counit of $f^*\dashv\Ran_f$, respectively).
	%		\begin{equation*}
		%			\begin{tikzcd}
			%				\Cc\drar["f"',""{name=A,sloped}]\rar["r"] & f/\Ee\dar["t"',""{name=B,sloped}]\rar["s"]& \Cc\dlar["f"]\arrow[from=1-3,to=B,draw=none,"\Longleftarrow"{sloped,marking,pos=0.7},"\eta"{swap,pos=0.65}]\arrow[from=A,to=1-2,phantom,"\scriptscriptstyle/\!/\!/"]\\
			%				& \Ee &
			%			\end{tikzcd}
		%		\end{equation*}
\end{warn}
\begin{exm}\label{exm:1ColimitAsKanExtension}
	Let $\Cc'=*$, then $\Fun(\Cc',\Dd)\simeq \Dd$ and we see immediately that $\Lan_fF$ corresponds to $\colimit F$ (if either exists). Likewise, $\Ran_fF$ corresponds to $\limit F$.
\end{exm}
Next we set out to answer the question when Kan extensions exist. To this end, we need to introduce two constructions that will feature prominently throughout the text.
\begin{con}\label{con:1ArrowCategory}
	Let $\Cc$ be a category and let $[1]\coloneqq \{\InlineDelta\}$ be the category with two objects and one non-identity morphism. The \emph{arrow category of $\Cc$} is the category
	\begin{equation*}
		\Ar(\Cc)\coloneqq \Fun\bigl([1],\Cc\bigr)\,.%
		%				\simeq \begin{cases*}
			%				\text{\emph{Objects:} Morphisms $\alpha\colon x\rightarrow y$ in $\Cc$.}\\
			%				\text{\emph{Morphisms:} Commutative diagrams $\begin{tikzcd}[cramped,column sep=small,row sep=small,ampersand replacement=\&,baseline=(ALPHA.base)]
					%						x\dar["\alpha"',"\textstyle \vphantom{x}"{name=ALPHA}]\rar \& x'\dar["\smash{\alpha'}\vphantom{\alpha}"]\\
					%						y\rar \& \smash{y'}\vphantom{y}
					%				\end{tikzcd}$ in $\Cc$.}
			%			\end{cases*}
	\end{equation*}
	Concretely, objects in $\Ar(\Cc)$ are morphisms $\alpha\colon x\rightarrow y$ in $\Cc$, and morphisms in $\Ar(\Cc)$ are commutative diagrams
	\begin{equation*}
		\begin{tikzcd}
			x\dar["\alpha"']\rar\drar[commutes] & x'\dar["\alpha'"]\\
			y\rar & y'
		\end{tikzcd}
	\end{equation*}
	in $\Cc$. There are functors $s,t\colon \Ar(\Cc)\rightarrow \Cc$ (\enquote{source} and \enquote{target} projection) sending an arrow $(\alpha\colon x\rightarrow y)$ to $x$ and $y$, respectively.
\end{con}
\begin{con}\label{con:1SliceCategory}
	Let $f\colon \Cc\rightarrow\Cc'$ be a functor and $x'\in \Cc'$. The \emph{slice category of $\Cc$ over $x'$} is the pullback\footnote{The pullback ist taken in the category of \emph{small categories}, that is, those categories whose class of objects is a set. But the explicit description works with the weaker assumption that $\Cc$ and $\Cc'$ are \emph{locally small}, meaning that $\Hom_\Cc(x,y)$ and $\Hom_{\Cc'}(x',y')$ are sets for all $x,y\in\Cc$, $x',y'\in \Cc'$.}
	\begin{equation*}
		\begin{tikzcd}
			\Cc_{/x'}\rar\dar\drar[pullback] & \Ar(\Cc')\dar["{(s,t)}"]\\
			\Cc\times\{x'\}\rar["f\times x'"] & \Cc'\times \Cc'
		\end{tikzcd}
	\end{equation*}
	Concretely, objects in the slice category $\Cc_{/x'}$ are pairs $(x,f(x)\rightarrow x')$, where $x\in \Cc$ and $f(x)\rightarrow x'$ is a morphism in $\Cc'$. Morphisms in $\Cc_{/x'}$ are given by morphisms $\alpha\colon x\rightarrow y$ such that
	\begin{equation*}
		\begin{tikzcd}
			f(x)\dar\rar["f(\alpha)"]\drar[commutes] & f(y)\dar\\
			x'\eqar[r] & x'
		\end{tikzcd}
	\end{equation*}
	commutes. Dually, there's also $\Cc_{x'/}$, the \emph{slice category of $\Cc$ under $x'$}.
\end{con}
\begin{lem}[Kan extension formula]\label{lem:1KanExtensionFormula}
	In the situation of Setup~\cref{par:1KanExtensionSetup}, assume that for all $x'\in \Cc'$ the following colimits exist in $\Dd$:
	\begin{equation*}
		\colimit_{(x,f(x)\rightarrow x')\in \Cc_{/x'}}F(x)\coloneqq \colimit\left(\Cc_{/x'}\longrightarrow \Cc\overset{F}{\longrightarrow}\Dd\right)\,.
	\end{equation*}
	Then $\Lan_fF$ exists and $\Lan_fF(x')$ is given by that colimit.
\end{lem}
\begin{proof}
	Exercise. We'll prove an $\infty$-categorical variant in \cref{lem:KanExtensionFormula}.
\end{proof}
\begin{cor}%[\enquote{Kan extensions along fully faithful functors behave nicely.}]
	\label{cor:1KanExtensionAlongFullyFaithful}
	In the situation of Setup~\cref{par:1KanExtensionSetup}, assume that $f\colon \Cc\rightarrow \Cc'$ is fully faithful and that the colimits from \cref{lem:1KanExtensionFormula} exist. Then the natural transformation $u_F\colon F\Rightarrow \Lan_fF\circ f$ from \cref{warn:KanDoesntExtend} is an equivalence.
\end{cor}
\begin{proof}
	If $x'=f(y)$ for some $y\in \Cc$, then $f$ being fully faithful implies that the slice category $\Cc_{/f(y)}$ is equivalent to $\Cc_{/y}$ (that is, the slice category formed with respect to $\id_\Cc\colon \Cc\rightarrow\Cc$). The latter has a terminal object, namely $\{\id_y\}$. Hence
	\begin{equation*}
		\Lan_f\bigl(Ff(y)\bigr)\cong \colimit_{(x,f(x)\rightarrow y)\in \Cc_{/f(y)}}F(x)\cong \colimit_{(x\rightarrow y)\in \Cc_{/y}}F(x)\cong F(y).\qedhere
	\end{equation*}
\end{proof}
To finish this subsection, we prove a result about the \emph{category $\PSh(\Cc)\coloneqq \Fun(\Cc^\op,\cat{Set})$ of presheaves on $\Cc$}. This will seem rather technical at first, but, together with its $\infty$-categorical version, it will be invaluable throughout the text.
\begin{thm}[\enquote{$\PSh(\Cc)$ arises by freely adding colimits to $\Cc$.}]\label{thm:1PShFreeCocompletion}
	Let $\Cc$ and $\Dd$ be categories, where $\Dd$ has all colimits. Let $\Yo_\Cc\colon \Cc\rightarrow\PSh(\Cc)$ denote the Yoneda embedding, sending $x\in \Cc$ to $\Hom_\Cc(-,x)\colon \Cc^\op\rightarrow\cat{Set}$. Then restriction along $\Yo_\Cc$ induces an equivalence
	\begin{equation*}
		\Yo_\Cc^*\colon \Fun^{\colimit}\bigl(\PSh(\Cc),\Dd\bigr)\overset{\simeq}{\longrightarrow}\Fun(\Cc,\Dd)\,.
	\end{equation*}
	Here $\Fun^{\colimit}(\PSh(\Cc),\Dd)\subseteq \Fun(\PSh(\Cc),\Dd)$ is the full subcategory spanned by the colimit-preserving functors. Furthermore, every colimit-preserving functor $\PSh(\Cc)\rightarrow \Dd$ admits a right adjoint.
\end{thm}
To prove \cref{thm:1PShFreeCocompletion}, we send two lemmas in advance.
\begin{lem}[\enquote{Every presheaf is a colimit of representables.}]\label{lem:1PresheafColimitOfRepresentables}
	Let $\Cc$ be a category. For every $E\in \PSh(\Cc)$, the natural morphism
	\begin{equation*}
		\colimit_{(y,\Hom_\Cc(-,y)\rightarrow E)\in \Cc_{/E}}\Hom_\Cc(-,y)\overset{\cong}{\longrightarrow}E
	\end{equation*}
	is an isomorphism.
\end{lem}
\begin{proof}
	Exercise (use Yoneda's lemma). We'll prove an $\infty$-categorical version in \cref{lem:PresheafColimitOfRepresentables}.
\end{proof}
\begin{lem}\label{lem:1LanAlongYonedaHasRightAdjoint}
	Let $\Cc$ and $\Dd$ be categories, where $\Dd$ has all colimits. For every $F\colon \Cc\rightarrow \Dd$, the left Kan extension $\Lan_{\Yo_\Cc}F\colon \PSh(\Cc)\rightarrow\Dd$ \embrace{which exists due to \cref{lem:1KanExtensionFormula}} admits a right adjoint. The right adjoint sends $y\in \Dd$ to $\Hom_\Dd(F(-),y)\colon \Cc^\op\rightarrow\cat{Set}$.
\end{lem}
\begin{proof}
	Exercise. We'll prove an $\infty$-categorical version in \cref{lem:LanAlongYonedaHasRightAdjoint}.
\end{proof}
Furthermore, we need the following general lemma (which will occasionally be useful in the future too).
\begin{lem}\label{lem:1FullyFaithfulConservativeAdjunction}
	Let $\Cc$ and $\Dd$ be categories and let $L\colon \Cc\shortdoublelrmorphism \Dd\noloc R$ be an adjunction.
	\begin{alphanumerate}
		\item The left adjoint $L$ is fully faithful if and only if the unit transformation $u\colon \id_\Cc\Rightarrow RL$ is an equivalence.\label{enum:1FullyFaithfulIffUnitEquivalence}
		\item Suppose $L$ ist fully faithful and $R$ is conservative \embrace{that is, if $\alpha\colon x\rightarrow y$ is a morphism in $\Dd$ such that $R(\alpha)$ is an isomorphism, then $\alpha$ is an isomorphism too}. Then $L$ and $R$ are inverse equivalences of categories.\label{enum:1Conservative}
	\end{alphanumerate}
\end{lem}
\begin{proof}
	To prove \cref{enum:FullyFaithfulIffUnitEquivalence}, first observe that for all elements $x,y\in\Cc$, the postcomposition map $(u_y)_*\colon \Hom_\Cc(x,y)\rightarrow\Hom_\Cc(x,RL(y))$ is given by
	\begin{equation*}
		(u_y)_*\colon\Hom_\Cc(x,y)\overset{L}{\longrightarrow}\Hom_\Dd\bigl(L(x),L(y)\bigr)\overset{\cong}{\longrightarrow}\Hom_\Cc\bigl(x,RL(y)\bigr)\,,
	\end{equation*}
	where the second map is the adjunction bijection. By Yoneda's lemma, 
	$u_y\colon y\rightarrow RL(y)$ is an equivalence if and only if $(u_y)_*\colon \Hom_\Cc(x,y)\rightarrow\Hom_\Cc(x,RL(y))$ is a bijection for all $x$. By the above, this happens if and only if $L\colon \Hom_\Cc(x,y)\rightarrow\Hom_\Dd(L(x),L(y))$ is a bijection for all $x\in\Cc$. This proves \cref{enum:FullyFaithfulIffUnitEquivalence}.
	
	For \cref{enum:Conservative}, the second of the triangle identities from \cref{lem:1TriangleIdentities} shows that $Rc\colon RLR\Rightarrow R$ is a natural equivalence. Since $R$ is conservative, $c\colon LR\Rightarrow \id_\Dd$ must be an equivalence too. Since $u\colon \id_\Cc\Rightarrow RL$ is an equivalence by assumption, we are done.
\end{proof}
\begin{proof}[Proof of \cref{thm:1PShFreeCocompletion}]
	By \cref{lem:1LanAlongYonedaHasRightAdjoint} and \cref{lem:1AdjointsPreserveColimits}, the adjunction $\Lan_{\Yo_\Cc}\dashv\Yo_\Cc^*$ restricts to an adjunction
	\begin{equation*}
		\Lan_{\Yo_\Cc}\colon \Fun(\Cc,\Dd)\doublelrmorphism\Fun^{\colimit}\bigl(\PSh(\Cc),\Dd\bigr)\noloc \Yo_\Cc^*\,.
	\end{equation*}
	Since $\Yo_\Cc$ is fully faithful, \cref{cor:1KanExtensionAlongFullyFaithful} implies that the unit $u\colon \id_{\Fun(\Cc,\Dd)}\Rightarrow\Yo_\Cc^*\circ \Lan_{\Yo_\Cc}$ is an equivalence. Furthermore, it's clear that $\Yo_\Cc^*$ is conservative: If a natural transformation $\eta\colon F\Rightarrow G$ between colimit-preserving functors $F,G\colon \PSh(\Cc)\rightarrow\Dd$ is an equivalence when restricted to representable presheaves, then it is an equivalence everywhere, because every presheaf can be written as a colimit of representables (\cref{lem:1PresheafColimitOfRepresentables}). Then \cref{lem:1FullyFaithfulConservativeAdjunction}\cref{enum:1Conservative} finishes the proof.
\end{proof}

\newpage
\section{The simplicial model}\label{sec:SimplicialSets}
In this section, we'll introduce our model for $\infty$-categories and the main object of interest in \cref{sec:SimplicialSets}, \cref{sec:JoyalLifting}, and \cref{sec:Straightening}: quasi-categories! We'll see some first signs that quasi-categories behave a lot like ordinary categories and we'll define the quasi-category of quasi-categories $\cat{Cat}_\infty$.
\subsection{Recollections on simplicial sets}
\begin{defi}\label{def:SimplicialSet}
	\begin{alphanumerate}
		\item The \emph{simplex category $\IDelta$} is the category whose objects are finite non-empty totally ordered sets $[n]=\{0<1<\dotsb<n\}$ for all $n\geqslant 0$ and whose morphisms are order-preserving maps, that is, maps $\alpha\colon [m]\rightarrow [n]$ such that $\alpha(0)\leqslant \alpha(1)\leqslant\dotsb\leqslant \alpha(m)$.\label{enum:SimplexCategory}
		\item A \emph{simplicial set} is a presheaf on $\IDelta$, that is, a functor $X\colon \IDelta^\op\rightarrow\cat{Set}$. The \emph{category of simplicial sets} is the category $\cat{sSet}\coloneqq \PSh(\IDelta)\simeq\Fun(\IDelta^\op,\cat{Set})$ of presheaves on $\IDelta$.\label{enum:SimplicialSet}
	\end{alphanumerate}
\end{defi}
\begin{con}\label{con:FaceDegeneracyMaps}
	For all $i=0,\dotsc,n$ and all $j=0,\dotsc,n-1$ let $d_i\colon [n-1]\rightarrow [n]$ be the unique injective morphism in $\IDelta$ that doesn't hit $i$ and let $s_j\colon [n]\rightarrow[n-1]$ be the unique surjective morphism in $\IDelta$ that hits $j$ twice. It's straightforward to see that every morphism $\alpha\colon [m]\rightarrow[n]$ in $\IDelta$ can be written as a composition of some $s_j$ and some $d_i$. Therefore, a simplicial set can be described by the following data:
	\begin{alphanumerate}
		\item Sets $X_n\coloneqq X([n])$ for all $n\geqslant 0$.
		\item \emph{Face maps} $d_i^*\colon X_n\rightarrow X_{n-1}$ for all $i=0,\dotsc,n$.
		\item \emph{Degeneracy maps} $s_j^*\colon X_{n-1}\rightarrow X_{n}$ for all $j=0,\dotsc,n-1$.
	\end{alphanumerate}
	The face and degeneracy maps satisfy $d_j^*\circ d_i^*=d_{i-1}^*\circ d_j^*$ and $s_j^*\circ s_i^*=s_{i-1}^*\circ s_j^*$ for all $i>j$ as well as
	\begin{equation*}
		d_j^*\circ s_i^*=\ScaledBracesCases{\!\begin{plaincases*}
			s_i^*\circ d_{j-1}^* & if $i<j-1$\\
			\id_{X_{n-1}} & if $i=j-1$ or $i=j$\\
			s_{i-1}^*\circ d_j^* & if $i>j$
		\end{plaincases*}}\,.
	\end{equation*}
	It's customary to call elements of $X_n$ \emph{$n$-simplices of $X$}. An $n$-simplex is called \emph{degenerate} if it is in the image of $s_j\colon X_{n-1}\rightarrow X_n$ for some $j$.
\end{con}
Let's give some first examples of simplicial sets and explain some basic constructions. %with them. Here we'll also see \cref{thm:1PShFreeCocompletion} in action for the first time!

\begin{numpar}[Boundaries and horns.]\label{par:Horns}
	For all $n\geqslant 0$, the functor $\Delta^n\coloneqq\Hom_{\IDelta}(-,[n])\colon \IDelta^\op\rightarrow\cat{Set}$ is a simplicial set, called the \emph{$n$-simplex}. Yoneda's lemma implies that $\Hom_{\cat{sSet}}(\Delta^n,X)\cong X_n$ for all simplicial sets $X$. The maps $d_i\colon [n-1]\rightarrow [n]$ and $s_j\colon [n]\rightarrow[n-1]$ from \cref{con:FaceDegeneracyMaps} induce maps $d_i\colon \Delta^{n-1}\rightarrow \Delta^n$ and $s_j\colon \Delta^n\rightarrow \Delta^{n-1}$ in $\cat{sSet}$.\footnote{This may be confusing at first but the maps $d_i\colon \Delta^{n-1}\rightarrow \Delta^n$ and $s_j\colon \Delta^n\rightarrow \Delta^{n-1}$ really run in the indicated directions. The point is that while $\Hom_{\IDelta}(-,[n])\colon \IDelta^\op\rightarrow\cat{Set}$ is contravariant, the functor that assigns $[n]\mapsto \Hom_{\IDelta}(-,[n])$, that is, the Yoneda embedding $\Yo_{\IDelta}\colon \IDelta\rightarrow \PSh(\IDelta)\simeq \cat{sSet}$, is covariant.} Using these maps, we can define the following sub-simplicial sets of $\Delta^n$:
	\begin{align*}
		\partial \Delta^n&\coloneqq \bigcup_{i=0}^n\im\left(d_i\colon \Delta^{n-1}\rightarrow\Delta^n\right)\subseteq \Delta^n\,\text{, the \emph{boundary of $\Delta^n$},}\\
		\Lambda_j^n&\coloneqq \bigcup_{\substack{i=0\\i\neq j}}^n\im\left(d_i\colon \Delta^{n-1}\rightarrow\Delta^n\right)\subseteq \Delta^n\,\text{, the \emph{$j$-horn in $\Delta^n$}.}
	\end{align*}
	Here the unions are taken degree-wise.\footnote{Therefore, they're colimits in $\cat{sSet}$, as limits and colimits in functor categories are computed pointwise by \cref{lem:1ColimitsInFunctorCategories}.} It's customary to call horns $\Lambda_j^n$ \emph{inner horns} if $0<j<n$ and \emph{outer horns} if $j=0$ or $j=n$. Concretely, for all $m\geqslant 0$, the $m$-simplices of the boundary $\partial \Delta^n$ and the $j$-horn $\Lambda_j^n$ are given by the following formulae:
	\begin{align*}
		(\partial \Delta^n)_m&=\bigl\{\alpha\colon [m]\rightarrow [n]\ \big|\ [n]\neq \im(\alpha)\bigr\}\,,\\
		(\Lambda_j^n)_m&=\bigl\{\alpha\colon [m]\rightarrow [n]\ \big|\ [n]\neq \im(\alpha)\cup\{j\}\bigr\}\,.
	\end{align*}
	Here are some pictures in the case $n=2$ (in the bottom line, the dotted lines mark the faces that are missing in the respective horns):
	\begin{gather*}
		\Delta^2=\begin{tikzpicture}[commutative diagrams/every diagram,baseline=(mid.base), decoration={markings,mark=at position 0.5 with {\arrow{to}}}]
			\path node[outer sep=0.25ex] (0) at (0,0) {$0$} ++(0:3.8em) node[text depth=0pt,outer sep=0.25ex] (1) {$1$} ++ (120:3.8em) node[outer sep=0.25ex] (2) {$2$};
			\path (0) to node[pos=0.5] (mid) {} (2);
			\path (0) to node[pos=0.5] (05) {} (1);
			\path (05) to node[pos=0.333] {$\scriptscriptstyle/\!/\!/$} (2);
			\path[commutative diagrams/.cd, every arrow, every label]
			(0) edge[postaction={decorate},-] (1)
			(1) edge[postaction={decorate},-] (2)
			(0) edge[postaction={decorate},-] (2);
		\end{tikzpicture}\,,\quad
		\partial\Delta^2=\begin{tikzpicture}[commutative diagrams/every diagram,baseline=(mid.base), decoration={markings,mark=at position 0.5 with {\arrow{to}}}]
			\path node[outer sep=0.25ex] (0) at (0,0) {$0$} ++(0:3.8em) node[text depth=0pt,outer sep=0.25ex] (1) {$1$} ++ (120:3.8em) node[outer sep=0.25ex] (2) {$2$};
			\path (0) to node[pos=0.5] (mid) {} (2);
			\path[commutative diagrams/.cd, every arrow, every label]
			(0) edge[postaction={decorate},-] (1)
			(1) edge[postaction={decorate},-] (2)
			(0) edge[postaction={decorate},-] (2);
		\end{tikzpicture}\\
		\Lambda_0^2=\begin{tikzpicture}[commutative diagrams/every diagram,baseline=(mid.base), decoration={markings,mark=at position 0.5 with {\arrow{to}}}]
			\path node[outer sep=0.25ex] (0) at (0,0) {$0$} ++(0:3.8em) node[text depth=0pt,outer sep=0.25ex] (1) {$1$} ++ (120:3.8em) node[outer sep=0.25ex] (2) {$2$};
			\path (0) to node[pos=0.5] (mid) {} (2);
			\path[commutative diagrams/.cd, every arrow, every label]
			(0) edge[postaction={decorate},-] (1)
			(1) edge[dotted,postaction={decorate},-] (2)
			(0) edge[postaction={decorate},-] (2);
		\end{tikzpicture}\,,\quad
		\Lambda_1^2=\begin{tikzpicture}[commutative diagrams/every diagram,baseline=(mid.base), decoration={markings,mark=at position 0.5 with {\arrow{to}}}]
			\path node[outer sep=0.25ex] (0) at (0,0) {$0$} ++(0:3.8em) node[text depth=0pt,outer sep=0.25ex] (1) {$1$} ++ (120:3.8em) node[outer sep=0.25ex] (2) {$2$};
			\path (0) to node[pos=0.5] (mid) {} (2);
			\path[commutative diagrams/.cd, every arrow, every label]
			(0) edge[postaction={decorate},-] (1)
			(1) edge[postaction={decorate},-] (2)
			(0) edge[dotted,postaction={decorate},-] (2);
		\end{tikzpicture}\,,\quad
		\Lambda_2^2=\begin{tikzpicture}[commutative diagrams/every diagram,baseline=(mid.base), decoration={markings,mark=at position 0.5 with {\arrow{to}}}]
			\path node[outer sep=0.25ex] (0) at (0,0) {$0$} ++(0:3.8em) node[text depth=0pt,outer sep=0.25ex] (1) {$1$} ++ (120:3.8em) node[outer sep=0.25ex] (2) {$2$};
			\path (0) to node[pos=0.5] (mid) {} (2);
			\path[commutative diagrams/.cd, every arrow, every label]
			(0) edge[dotted,postaction={decorate},-] (1)
			(1) edge[postaction={decorate},-] (2)
			(0) edge[postaction={decorate},-] (2);
		\end{tikzpicture}
	\end{gather*}
\end{numpar}
\begin{numpar}[Geometric Realisation.]\label{par:GeometricRealisation}
	These pictures suggest a geometric way to think about simplices, boundaries of simplices, and horns. In fact, we can associate to every simplicial set $X$ a topological space (in fact, a CW-complex) $\abs*{X}$, called the \emph{geometric realisation of $X$}. To describe this construction, we first define $\abs*{\Delta^n}$ to be the \emph{topological $n$-simplex}, that is, the space $\{(t_0,\dotsc,t_n)\in\IR^n\ |\ 0\leqslant t_i\leqslant 1, \sum_{i=1}^nt_i=1\}\subseteq \mathbb R^n$. For all $i=0,\dotsc,n$ and all $j=0,\dotsc,n-1$ we define maps $\abs*{d_i}\colon\abs*{\Delta^{n-1}}\rightarrow\abs*{\Delta^n}$ and $\abs*{s_j}\colon\abs*{\Delta^{n}}\rightarrow\abs*{\Delta^{n-1}}$ via
	\begin{align*}
		\abs*{d_i}(t_0,\dotsc,t_{n-1})&\coloneqq (t_0,\dotsc,t_{i-1},0,t_i,\dotsc,t_n)\\
		\abs*{s_j}(t_0,\dotsc,t_n)&\coloneqq (t_0,\dotsc,t_{i-1},t_i+t_{i+1},t_{i+2},\dotsc,t_n)
	\end{align*}
	For general simplicial sets $X$, we can now construct $\abs*{X}$ by taking a topological $n$-simplex $\abs*{\Delta^n}$ for every $\sigma\in X_n$ and gluing them together according to the face and degeneracy maps above. More precisely, we take
	\begin{equation*}
		\abs*{X}\coloneqq\colimit_{(n,\Delta^n\rightarrow X)}\abs*{\Delta^n}\in\cat{Top}\,.
	\end{equation*}
	This agrees with the Kan extension formula from \cref{lem:1KanExtensionFormula}! So $\abs*{\,\cdot\,}\colon \cat{sSet}\rightarrow \cat{Top}$ must be the unique colimit-preserving extension, guaranteed by \cref{thm:1PShFreeCocompletion}, of the functor $\IDelta\rightarrow\cat{Top}$ that sends $[n]\mapsto \abs*{\Delta^n}$.
	
	Furthermore, \cref{thm:1PShFreeCocompletion} guarantees that $\abs*{\,\cdot\,}\colon \cat{sSet}\rightarrow \cat{Top}$ admits a right adjoint, which we denote $\Sing\colon \cat{Top}\rightarrow\cat{sSet}$. By \cref{lem:1LanAlongYonedaHasRightAdjoint}, it is given by $(\Sing Y)_n\cong \Hom_{\cat{Top}}(\abs*{\Delta^n},Y)$. So $\Sing Y$ is indeed the construction you know from the definition of singular homology.
\end{numpar}
\begin{numpar}[Nerve and homotopy category.]\label{par:Nerve}
	Every partially ordered set defines a category. In particular, we can regard the totally ordered sets $[n]$ as categories. Accordingly, we obtain a functor $U\colon \IDelta\rightarrow \cat{Cat}$ into the category of small categories; $U$ simply sends $[n]\mapsto [n]$. For every small category $\Cc$, this allows us to define a simplicial set $\N(\Cc)$, called the \emph{nerve of $\Cc$}, as the composition
	\begin{equation*}
		\N(\Cc)\colon \IDelta^\op\xrightarrow{U^\op}\cat{Cat}^\op\xrightarrow{\Hom_{\cat{Cat}}(-,\,\Cc)}\cat{Set}\,.
	\end{equation*}
	Concretely, $\N(\Cc)_n= \Hom_{\cat{Cat}}([n],\Cc)\cong \{x_0\rightarrow \dotsb\rightarrow x_n\text{ in $\Cc$}\}$ is the set of all chains of $n$ morphisms in $\Cc$. The face maps $d_i^*\colon \N(\Cc)_n\rightarrow \N(\Cc)_{n-1}$ compose the $(i-1)$\textsuperscript{st} and $i$\textsuperscript{th} morphism in the chain (in the cases $i=0$ or $i=n$, the face map $d_0^*$ just discards $x_0$ and $d_n^*$ just discards $x_n$). The degeneracy maps $s_j^*\colon \N(\Cc)_{n-1}\rightarrow \N(\Cc)_n$ insert an identity at the $j$\textsuperscript{th} position.
	
	Observe that the formula $\N(\Cc)_n\cong\Hom_{\cat{Cat}}([n],\Cc)$ is exactly of the form of a right-adjoint as in \cref{lem:1LanAlongYonedaHasRightAdjoint}! So what's the corresponding left adjoint? According to \cref{thm:1PShFreeCocompletion}, it has to be the unique colimit-preserving extension of the functor $U\colon\IDelta\rightarrow \cat{Cat}$ above.\footnote{Here we use implicitly that $\cat{Cat}$ has all colimits (which is easy to check, but not completely trivial, due to the same composition issues as in the description of $\operatorname{ho}(\Lambda_1^2)$).} We'll denote this extension by $\operatorname{ho}\colon \cat{sSet}\rightarrow\cat{Cat}$ and for a simplicial set $X$, we call $\operatorname{ho}(X)$ the \emph{homotopy category of $X$}. The objects of $\operatorname{ho}(X)$ are the set of $0$-simplices $X_0$. However, the morphisms of $\operatorname{ho}(X)$ are a little more difficult to describe. For example, $\operatorname{ho}(\Lambda_1^2)$ contains a morphism $\alpha\colon 0\rightarrow 1$ and a morphism $\beta\colon 1\rightarrow 2$; $\alpha$ and $\beta$ are induced by the functors $[1]\cong \operatorname{ho}(\Delta^{\{0,1\}})\rightarrow \operatorname{ho}(\Lambda_1^2)$ and $[1]\cong \operatorname{ho}(\Delta^{\{1,2\}})\rightarrow \operatorname{ho}(\Lambda_1^2)$. Hence $\operatorname{ho}(\Lambda_1^2)$ must also contain a morphism $\beta\circ\alpha\colon 0\rightarrow 2$, even though there's no $1$-simplex from $0$ to $2$ in $\Lambda_1^2$. So in general, not all morphisms in $\operatorname{ho}(X)$ come from $1$-simplices of $X$. Instead, we have to take \emph{chains} of $1$-simplices and quotient out a suitable equivalence relation. This is not too hard to make precise, but quite technical and we won't pursue it here. We'll see an explicit description in the case of quasi-categories in \cref{par:HomotopyCategory} below; the general description can be found in \cite[Construction/Proposition~II.24]{HigherCatsI}.
\end{numpar}
\begin{numpar}[Mapping objects in simplicial sets.]\label{par:FInternalHom}
	For every simplicial set $X$ the functor $-\times X\colon\cat{sSet}\rightarrow\cat{sSet}$ commutes with colimits.\footnote{Using that limits and colimits in $\cat{sSet}$ are computed degree-wise by \cref{lem:1ColimitsInFunctorCategories}, this can be reduced to the fact that products in $\cat{Set}$ commute with colimits, which is straightforward to check.} Hence, by \cref{thm:1PShFreeCocompletion}, it must be the unique colimit-preserving extension of the functor $\IDelta\rightarrow\cat{sSet}$ sending $[n]\mapsto \Delta^n\times X$. But more importantly, $-\times X$ must have a right adjoint, which we denote $\F(X,-)\colon \cat{sSet}\rightarrow\cat{sSet}$. By the formula in \cref{lem:1LanAlongYonedaHasRightAdjoint}, the right adjoint is given by $\F(X,Y)_n\cong \F(\Delta^n\times X,Y)$.
\end{numpar}

At this point, let's take a moment to appreciate the power of \cref{thm:1PShFreeCocompletion}: It gave us adjunctions
\begin{equation*}
	\abs*{\,\cdot\,}\colon \cat{sSet}\doublelrmorphism\cat{Top}\noloc {\Sing}\,,\quad \operatorname{ho}\colon \cat{sSet}\doublelrmorphism\cat{Cat}\noloc {\N}\,,\quad\text{and}\quad -\times X\colon \cat{sSet}\doublelrmorphism \cat{sSet}\noloc {\F(X,-)}
\end{equation*}
 essentially for free!

\subsection{Quasi-categories and Kan complexes}
In this subsection, we'll introduce \emph{quasi-categories}, a class of simplicial sets that behaves very similarly to ordinary categories. To motivate the definition, we start with a lemma.
\begin{lem}\label{lem:LiftingConditions}
	\begin{alphanumerate}
		\item Let $Y$ be a topological space and let $\Sing Y$ be the singular simplicial set of $Y$ as in \cref{par:GeometricRealisation}. For all $n\geqslant 1$ and all $0\leqslant i\leqslant n$, every horn filling problem\label{enum:LiftingSing}
		\begin{equation*}
			\begin{tikzcd}
				\Lambda_i^n\rar\dar & \Sing Y\\
				\Delta^n\urar[dashed]
			\end{tikzcd}
		\end{equation*}
		has a solution.
		\item Let $\Cc$ be a small category and let $\N(\Cc)$ be the nerve of $\Cc$ as in \cref{par:Nerve}. For all $n\geqslant 2$ and all $0<i<n$, every inner horn filling problem\label{enum:LiftingN}
		\begin{equation*}
			\begin{tikzcd}
				\Lambda_i^n\rar\dar & \N(\Cc)\\
				\Delta^n\urar[dashed]
			\end{tikzcd}
		\end{equation*}
		has a unique solution. Furthermore, if $X$ is a simplicial set with this horn filling property, then $X\cong \N(\Cc)$ for some category $\Cc$ \embrace{which is necessarily the homotopy category $\operatorname{ho}(X)$}.
	\end{alphanumerate}
\end{lem}
\begin{proof}[Proof sketch]
	By the adjunction $\abs*{\,\cdot\,}\colon \cat{sSet}\shortdoublelrmorphism\cat{Top}\noloc {\Sing}$ from \cref{par:GeometricRealisation}, a horn filling problem as in \cref{enum:LiftingSing} is equivalent to
	\begin{equation*}
		\begin{tikzcd}
			\abs*{\Lambda_i^n}\rar\dar & Y\\
			\abs*{\Delta^n}\urar[dashed]
		\end{tikzcd}
	\end{equation*}
	This one always has a solution since the topological space $\abs*{\Lambda_i^n}$ is a retract of $\abs*{\Delta^n}$. This proves \cref{enum:LiftingSing}. For \cref{enum:LiftingN}, recall from \cref{par:Nerve} that a morphism $\Delta^n\rightarrow \N(\Cc)$ corresponds to a chain $x_0\rightarrow \dotsb\rightarrow x_n$ in $\Cc$. But the morphisms $x_j\rightarrow x_{j+1}$ are already given by $\Lambda_i^n\rightarrow \N(\Cc)$. This shows the unique horn filling assertion from \cref{enum:LiftingN}. The additional assertion is more or less straightforward if you use the description of the homotopy category from \cref{par:HomotopyCategory} below. For a complete proof, see \cite[Theorem~II.25]{HigherCatsI}.
\end{proof}
Recall that by Grothendieck's \emph{homotopy hypothesis}, topological spaces should be the same as $\infty$-groupoids, so in particular, they should provide examples of $\infty$-categories. Furthermore, every ordinary category should give rise to an $\infty$-category too. So if we try to model $\infty$-categories by a specific class of simplicial sets, that class should contain $\Sing Y$ for every topological space $Y$ and $\N(\Cc)$ for every small category $\Cc$. It then feels reasonable to look for a common generalisation of the horn filling conditions from \cref{lem:LiftingConditions}\cref{enum:LiftingSing} and~\cref{enum:LiftingN}, which is precisely what the definition of quasi-categories does:
\begin{defi}[Boardman--Vogt, \cite{BoardmanVogt}]\label{def:QuasiCategory}
	A \emph{quasi-category} (or \emph{$\infty$-category}) is a simplicial set $\Cc$ such that for all $n\geqslant 2$ and all $0<i<n$, every inner horn filling problem
	\begin{equation*}
		\begin{tikzcd}
			\Lambda_i^n\rar\dar & \Cc\\
			\Delta^n\urar[dashed]
		\end{tikzcd}
	\end{equation*}
	has a solution. If, moreover, all horn filling problems for $n\geqslant 1$ and $0\leqslant i\leqslant n$ have solutions, then $\Cc$ is called a \emph{Kan complex}. We let $\cat{Kan}\subseteq\cat{QCat}\subseteq\cat{sSet}$ denote the full subcategories spanned by Kan complexes and quasi-categories.
\end{defi}
The rest of \cref{sec:SimplicialSets} as well as the entirety of \cref{sec:JoyalLifting} and \cref{sec:Straightening} will be spent convincing you that \cref{def:QuasiCategory} is a sensible definition and that quasi-categories really behave like ordinary categories. Let's begin by giving a dictionary of the most basic categorical notions and their counterparts in the world of quasi-categories.
\begin{numpar}[Objects and Morphisms.]
	Let $\Cc$ be a quasi-category. We'll use the following suggestive terminology. If $x$ is a $0$-simplex in $\Cc$, we'll say that \emph{$x$ is an object in $\Cc$} and write $x\in\Cc$ instead of $x\in\Cc_0$. We also write $\{x\}\rightarrow \Cc$ for the map $\Delta^0\rightarrow \Cc$ induced by $x$. If $\alpha$ is a $1$-simplex in $\Cc$ and $x=d_1^*(\alpha)$, $y=d_0^*(\alpha)$, we'll say that \emph{$\alpha\colon x\rightarrow y$ is a morphism in $\Cc$}. For an object $x\in\Cc$, we'll call the degenerate $1$-simplex $s_0^*(x)\in\Cc_1$ the \emph{identity on $x$} and we'll write $\id_x\colon x\rightarrow x$.
\end{numpar}
\begin{numpar}[Functors and natural transformations.]
	A \emph{functor of quasi-categories} is simply a map of simplicial sets. If $\Cc$ and $\Dd$ are quasi-categories, then the construction $\F(\Cc,\Dd)$ from \cref{par:FInternalHom} plays the role of the category of functors from $\Cc$ to $\Dd$. We'll show in \cref{cor:FIsKanComplex} that $\F(\Cc,\Dd)$ is indeed a quasi-category again. Furthermore, if $F,G\colon \Cc\rightarrow \Dd$ are functors of quasi-categories, then a \emph{natural transformation $\eta\colon F\Rightarrow G$} is a functor $\eta\colon \Delta^1\times\Cc\rightarrow \Dd$ such that the following diagram commutes:
	\begin{equation*}
		\begin{tikzcd}
			\{0\}\times \Cc\dar\dar[phantom,""{name=A}]\arrow[from=2-2,to=1-1,commutes,xshift=-1ex]\drar[bend left,"F"]& \\
			\Delta^1\times \Cc\rar["\eta"]& \Dd\\
			\{1\}\times \Cc\uar\uar[phantom,""{name=A}]\arrow[from=2-2,to=3-1,commutes,xshift=-1ex]\urar[bend right, "G"'] & 
		\end{tikzcd}
	\end{equation*}
	By \cref{par:FInternalHom}, we may equivalently view $\eta$ as a $1$-simplex $\Delta^1\rightarrow \F(\Cc,\Dd)$ from $F$ to $G$. That is, natural transformations are morphisms in the functor quasi-category, as they should be (except that we don't know yet that $\F(\Cc,\Dd)$ is a quasi-category again). Further evidence that $\F(\Cc,\Dd)$ is the right construction will be given in \cref{lem:SimplicialHoNerveAdjunction} below.
\end{numpar}
\begin{numpar}[Arrows, slices, and $\Hom$.]\label{par:HomInQuasiCategories}
	We let $\Ar(\Cc)\coloneqq \F(\Delta^1,\Cc)$ denote the \emph{arrow quasi-category} of $\Cc$. The inclusions $\{0\}\rightarrow \Delta^1$ and $\{1\}\rightarrow\Delta^1$ induce a source and a target projection $s,t\colon \Ar(\Cc)\rightarrow \Cc$. Furthermore, for $x,y\in \Cc$, we define the \emph{Hom anima $\Hom_\Cc(x,y)$} and the \emph{slice quasi-category $\Cc_{x/}$} via the pullbacks\label{enum:HomInQuasiCategories}
	\begin{equation*}
		\begin{tikzcd}
			\Hom_\Cc(x,y)\dar\rar\drar[pullback] & \Cc_{x/}\dar\rar\drar[pullback] & \Ar(\Cc)\dar["{(s,t)}"]\\
			\{x\}\times\{y\}\rar & \{x\}\times\Cc\rar & \Cc\times\Cc
		\end{tikzcd}
	\end{equation*}
	We'll prove in \cref{cor:HomAnima} that $\Hom_\Cc(x,y)$ is always an anima in the sense of \cref{def:Anima} below, and we'll prove in \cref{cor:FIsKanComplex} that $\Ar(\Cc)$ and $\Cc_{x/}$ are quasi-categories. So these constructions live up to their names. Furthermore, it follows from \cref{lem:SimplicialHoNerveAdjunction} below and $\Delta^1\cong\N([1])$ that we have an isomorphism of simplicial sets $\Ar(\N(\Dd))\cong \N(\Ar(\Dd))$ for every ordinary category $\Dd$, so it makes sense to use the same notation as in \cref{con:1ArrowCategory}. Furthermore, since $\N\colon \cat{Cat}\rightarrow \cat{sSet}$ preserves pullbacks (being a right adjoint), it follows that $\N(\Dd)_{y/}\cong \N(\Dd_{y/})$ for all $y\in\Dd$. Finally, it follows that $\Hom_{\N(\Dd)}(x,y)$ is a \emph{discrete simplicial set}, that is, a disjoint union of copies of $\Delta^0$, with the indexing set being $\Hom_\Dd(x,y)$. So our construction of $\Hom$ recovers the usual notion for ordinary categories.
	
	Be aware that $\Cc_{x/}$ is \emph{not} the slice construction from \cite[Proposition~\HTTthm{1.2.9.2}]{HTT} or \cite[Definition~1.4.13]{Land}; instead, it corresponds to their \emph{fat slice} $\Cc^{x/}$. I like our definition better because it is in line with \cref{con:1SliceCategory} and we'll avoid using the other slice construction (or rather hide its unavoidable usages in black boxes). It can be shown that while the two slice constructions are not isomorphic, they are equivalent as quasi-categories  (see \cite[Proposition~\HTTthm{4.2.1.5}]{HTT} or \cite[Proposition~2.5.27]{Land}), so once we're out of the simplicial swamp (that is, starting from \cref{sec:InftyCategoryTheory}), the distinction won't matter.
\end{numpar}
\begin{numpar}[Compositions.]\label{par:Composition}
	Morphisms in a quasi-category can be composed, albeit not uniquely. To explain how this works, let's first describe an equivalence relation on morphisms. For morphisms $\alpha,\alpha'\colon x\rightarrow y$ we say \emph{$\alpha$ and $\alpha'$ are equivalent}, $\alpha\simeq \alpha'$, if the map $\sigma\colon \partial\Delta^2\rightarrow \Cc$ represented by the hollow triangle
	\begin{equation*}
		\sigma=\begin{tikzpicture}[commutative diagrams/every diagram,baseline=(mid.base)]
			\path node[outer sep=0.25ex] (0) at (0,0) {$x$} ++(0:3.8em) node[text depth=0pt,outer sep=0.25ex] (1) {$y$} ++ (120:3.8em) node[outer sep=0.25ex] (2) {$y$};
			\path (0) to node[pos=0.5] (mid) {\phantom{x}} (2);
			\path[commutative diagrams/.cd, every arrow, every label]
			(0) edge node[swap] {$\alpha$} (1)
			(1) edge node[swap,text depth=0pt] {$\id_z$} (2)
			(0) edge node {$\alpha'$} (2);
		\end{tikzpicture}
	\end{equation*}
	can be extended to a map $\ov\sigma\colon\Delta^2\rightarrow \Cc$ satisfying $\ov\sigma|_{\partial\Delta^2}=\sigma$ (thus \enquote{filling} the triangle above). Even though the definition is asymmetric in $\alpha$ and $\alpha'$, it turns out that \enquote{$\simeq$} is an equivalence relation on $\Cc_1$. For reflexivity, we can fill the triangle by taking $\ov\sigma_\mathrm{ref}\coloneqq s_1^*(\alpha)$ to be a degenerate simplex. For symmetry and transitivity, consider the maps $\vartheta_\mathrm{sym}\colon \Lambda_1^3\rightarrow \Cc$ and $\vartheta_\mathrm{trans}\colon \Lambda_2^3\rightarrow \Cc$ represented as the following hollow tetrahedra (each tetrahedron is missing its interior as well as one face; the missing faces have been highlighted):
	\begin{equation*}
		\vartheta_\mathrm{sym}=\begin{tikzpicture}[commutative diagrams/every diagram, baseline=(mid.base)]
			\path node[outer sep=0.25ex] (0) at (0,0) {$x$} ++(0:3.8em) node[text depth=0pt,outer sep=0.25ex] (1) {$y$} ++ (120:3.8em) node[outer sep=0.25ex] (2) {$y$} ++(180:3.8em) node[outer sep=0.25ex] (3) {$y$};
			\path (0) to coordinate[pos=0] (020) coordinate[pos=1] (021) (2);
			\path (0) to coordinate[pos=0] (030) coordinate[pos=1] (031) (3);
			\path (2) to coordinate[pos=0] (230) coordinate[pos=1] (231) (3);
			\fill[white!93!black]%[pattern={Lines[xshift=-0.5em,angle=45, line width=0.2em, distance=0.4em]},pattern color=white!93!black]
			(020) to (021) to[out=150,in=270] (230) to (231) to[out=270,in=30] (031) to (030) to[out=30,in=150] cycle;
			\path[commutative diagrams/.cd, every arrow, every label]
			(0) edge node[swap] {$\alpha$} (1)
			(1) edge node[swap,text depth=0pt] {$\id_y$} (2)
			(0) edge node[text depth=0pt,swap,xshift=-1.3em] {$\smash{\alpha'}\vphantom{\alpha}$} (2)
			(0) edge node[text depth=0pt] {$\alpha$} (3)
			(2) edge node[swap] {$\id_y$} (3)
			(1) edge[shorten <=2.75em] (3)
			(1) edge[shorten >=2.75em,-] node[text depth=0.15em,pos=0.3,sloped] {$\id_y$} (3);
			\path (0) to node[pos=0.5] (mid) {\phantom{x}} (2);
		\end{tikzpicture}\quad\text{and}\quad
		\vartheta_\mathrm{trans}=\begin{tikzpicture}[commutative diagrams/every diagram, baseline=(mid.base)]
			\path node[outer sep=0.25ex] (0) at (0,0) {$x$} ++(0:3.8em) node[text depth=0pt,outer sep=0.25ex] (1) {$y$} ++ (120:3.8em) node[outer sep=0.25ex] (2) {$y$} ++(180:3.8em) node[outer sep=0.25ex] (3) {$y$};
			\path (0) to coordinate[pos=0] (010) coordinate[pos=1] (011) (1);
			\path (0) to coordinate[pos=0] (030) coordinate[pos=1] (031) (3);
			\path (1) to coordinate[pos=0] (130) coordinate[pos=1] (131) (3);
			\fill[white!93!black]%[pattern={Lines[xshift=-0.75em,angle=25, line width=0.2em, distance=0.4em]}, pattern color=white!93!black]
			(010) to (011) to[out=90,in=240] (130) to (131) to[out=240,in=30] (031) to (030) to[out=30,in=90] cycle;
			\path[commutative diagrams/.cd, every arrow, every label]
			(0) edge node[swap] {$\alpha$} (1)
			(1) edge node[swap,text depth=0pt] {$\id_y$} (2)
			(0) edge  node[text depth=0pt,swap,xshift=-1.3em] {$\smash{\alpha'}\vphantom{\alpha}$} (2)
			(0) edge node[text depth=0pt] {$\smash{\alpha''}\vphantom{\alpha}$} (3)
			(2) edge node[swap] {$\id_y$} (3)
			(1) edge[shorten <=2.75em] (3)
			(1) edge[shorten >=2.75em,-] node[text depth=0.15em,pos=0.3,sloped] {$\id_y$} (3);
			\path (0) to node[pos=0.5] (mid) {\phantom{x}} (2);
		\end{tikzpicture}
	\end{equation*}
	More precisely, the face $\vartheta_\mathrm{sym}|_{\Delta^{\{0,1,2\}}}$ is a $2$-simplex witnessing $\alpha\simeq \alpha'$, whereas the faces $\vartheta_\mathrm{sym}|_{\Delta^{\{0,1,3\}}}=s_1^*(\alpha)$ and $\vartheta_\mathrm{sym}|_{\Delta^{\{1,2,3\}}}=s_1^*(\id_y)=s_1^*s_0^*(y)$ are degenerate simplices. Likewise, the faces $\vartheta_\mathrm{trans}|_{\Delta^{\{0,1,2\}}}$ and $\vartheta_\mathrm{trans}|_{\Delta^{\{0,2,3\}}}$ are $2$-simplices witnessing $\alpha\simeq \alpha'$ and $\alpha'\simeq \alpha''$, respectively, whereas the face $\vartheta_\mathrm{trans}|_{\Delta^{\{1,2,3\}}}=s_1^*(\id_y)=s_1^*s_0^*(y)$ is a degenerate simplex. By \cref{def:QuasiCategory}, the horns $\vartheta_\mathrm{sym}$ and $\vartheta_\mathrm{trans}$ can be extended to $3$-simplices $\ov\vartheta_\mathrm{sym},\ov\vartheta_\mathrm{trans}\colon \Delta^3\rightarrow \Cc$ satisfying $\ov\vartheta_\mathrm{sym}|_{\Lambda_1^3}=\vartheta_\mathrm{sym}$ and $\ov\vartheta_\mathrm{trans}|_{\Lambda_2^3}=\vartheta_\mathrm{trans}$ (in other words, the hollow tetrahedra can be \enquote{filled}). Now the face $\ov\sigma_\mathrm{sym}\coloneqq \ov\vartheta_\mathrm{sym}|_{\Delta^{\{0,2,3\}}}$ is a $2$-simplex witnessing $\alpha'\simeq \alpha$ and $\ov\sigma_\mathrm{trans}\coloneqq \ov\vartheta_\mathrm{trans}|_{\Delta^{\{0,1,3\}}}$ is a $2$-simplex witnessing $\alpha\simeq \alpha''$, which proves symmetry and transitivity.	
	
	Now let's define compositions. For morphisms $\alpha\colon x\rightarrow y$ and $\beta\colon y\rightarrow z$ in $\Cc$, consider the map $\sigma\colon\Lambda_1^2\rightarrow \Cc$ represented by
	\begin{equation*}
		\sigma=\begin{tikzpicture}[commutative diagrams/every diagram,baseline=(mid.base)]
			\path node[outer sep=0.25ex] (0) at (0,0) {$x$} ++(0:3.8em) node[text depth=0pt,outer sep=0.25ex] (1) {$y$} ++ (120:3.8em) node[outer sep=0.25ex] (2) {$z$};
			\path (0) to node[pos=0.5] (mid) {\phantom{x}} (2);
			\path[commutative diagrams/.cd, every arrow, every label]
			(0) edge node[swap] {$\alpha$} (1)
			(1) edge node[swap,text depth=0pt] {$\beta$} (2)
			(0) edge[dotted] (2);
		\end{tikzpicture}
	\end{equation*}
	By \cref{def:QuasiCategory}, this horn admits a filler, that is, a morphism $\ov\sigma\colon \Delta^2\rightarrow\Cc$ such that $\ov\sigma|_{\Lambda_1^2}=\sigma$. If $\gamma\colon x\rightarrow z$ is the morphism in $\Cc$ represented by $\ov\sigma|_{\Delta^{\{0,2\}}}\colon \Delta^{\{0,2\}}\rightarrow \Cc$, then $\gamma$ is called \emph{a composition of $\alpha$ and $\beta$} and we write $\gamma\simeq\beta\circ\alpha$. In particular, composition of morphisms is not unique in a general quasi-category, as filling inner horns is not unique.\footnote{Conversely, uniqueness of composition in ordinary categories accounts for uniqueness of filling inner horns in nerves of an ordinary categories, see \cref{lem:LiftingConditions}\cref{enum:LiftingN}.} However, if $\gamma,\gamma'\colon x\rightarrow z$ are any two compositions, then $\gamma$ and $\gamma'$ are equivalent in the sense of \cref{par:Composition} above. Indeed, then we can consider the morphism $\vartheta\colon\Lambda_1^3\rightarrow \Cc$ represented as follows (the missing face has been highlighted again):
	\begin{equation*}
		\vartheta=\begin{tikzpicture}[commutative diagrams/every diagram, baseline=(mid.base)]
			\path node[outer sep=0.25ex] (0) at (0,0) {$x$} ++(0:3.8em) node[text depth=0pt,outer sep=0.25ex] (1) {$y$} ++ (120:3.8em) node[outer sep=0.25ex] (2) {$z$} ++(180:3.8em) node[outer sep=0.25ex] (3) {$z$};
			\path (0) to coordinate[pos=0] (020) coordinate[pos=1] (021) (2);
			\path (0) to coordinate[pos=0] (030) coordinate[pos=1] (031) (3);
			\path (2) to coordinate[pos=0] (230) coordinate[pos=1] (231) (3);
			\fill[white!93!black]%[pattern={Lines[xshift=-3em,angle=45, line width=0.2em, distance=0.4em]},pattern color=white!93!black]
			(020) to (021) to[out=150,in=270] (230) to (231) to[out=270,in=30] (031) to (030) to[out=30,in=150] cycle;
			\path[commutative diagrams/.cd, every arrow, every label]
			(0) edge node[swap] {$\alpha$} (1)
			(1) edge node[swap,text depth=0pt] {$\beta$} (2)
			(0) edge node[text depth=0pt,swap,xshift=-1.2em] {$\gamma$} (2)
			(0) edge node[text depth=0pt] {$\smash{\gamma'}\vphantom{\gamma}$} (3)
			(2) edge node[swap] {$\id_z$} (3)
			(1) edge[shorten <=2.75em] (3)
			(1) edge[shorten >=2.75em,-] node[text depth=0pt,pos=0.35,swap] {$\beta$} (3);
			%\fill[black,opacity=0.2] (020) to (021) to[out=60,in=0] (230) to (231) to[out=180,in=120] (031) to (030) to[out=300,in=240] cycle;
			%\fill[black,opacity=0.2] (0.center) to (2.center) to (3.center) to cycle;
			\path (0) to node[pos=0.5] (mid) {\phantom{x}} (2);
		\end{tikzpicture}
	\end{equation*}
	Concretely, $\vartheta|_{\Delta^{\{0,1,2\}}}$ and $\vartheta|_{\Delta^{\{0,1,3\}}}$ are $2$-simplices that witness $\gamma$ and $\gamma'$ being compositions of $\alpha$ and $\beta$, whereas $\vartheta|_{\Delta^{\{1,2,3\}}}=s_1^*(\beta)\colon \Delta^{\{1,2,3\}}\rightarrow\Cc$ is a degenerate simplex. By \cref{def:QuasiCategory}, we can extend $\vartheta$ to a map $\ov\vartheta\colon \Delta^3\rightarrow \Cc$ and then the face $\ov\sigma\coloneqq\ov\vartheta|_{\Delta^{\{0,2,3\}}}$ is a $2$-simplex witnessing an equivalence $\gamma\simeq\gamma'$.
\end{numpar}
\begin{numpar}[The homotopy category.]\label{par:HomotopyCategory}
	We can now describe the homotopy category $\operatorname{ho}(\Cc)$ from \cref{par:Nerve} in more explicit terms. As already explained there, the objects of $\operatorname{ho}(\Cc)$ are the $0$-simplices $\Cc_0$, that is, the objects of $\Cc$. We've seen in \cref{par:Nerve} that the morphism may cause some problems since we might need to add compositions. However, by \cref{par:Composition} above, compositions already exist in $\Cc$, they just might not be unique. So we find that the set of morphisms of $\operatorname{ho}(\Cc)$ is given by $\Cc_1/\!\simeq$, the set of $1$-simplices modulo the equivalence condition from \cref{par:Composition}.
	
	To make this argument precise, one would have to check that $\operatorname{ho}(\Cc)$ as described above satisfies the universal property of the colimit $\colimit_{(n,\Delta^n\rightarrow\Cc)}[n]$ in $\cat{Cat}$. This is technical, but straightforward, and we leave the details to you.
\end{numpar}
As a consequence, we can prove that the construction $\F(-,-)$ from \cref{par:FInternalHom} is compatible with the functor category construction for ordinary categories.
\begin{lem}\label{lem:SimplicialHoNerveAdjunction}
	If $\Cc$ is a quasi-category and $\Dd$ is an ordinary category, then there is an isomorphism of simplicial sets
	\begin{equation*}
		\F\bigl(\Cc,\N(\Dd)\bigr)\cong \N\bigl(\Fun(\operatorname{ho}(\Cc),\Dd)\bigr)
	\end{equation*}
	In particular, if $\Cc\cong \N(\Cc')$ is the nerve of an ordinary category $\Cc'$, we get an isomorphism $\F(\N(\Cc'),\N(\Dd))\cong \N(\Fun(\Cc',\Dd))$.
\end{lem}
\begin{proof}[Proof sketch]
	For all $n\geqslant 0$, we obtain the following chain of bijections, all of which are compatible with the simplicial structure maps:
	\begin{align*}
		\F\bigl(\Cc,\N(\Dd)\bigr)_n\cong \Hom_{\cat{sSet}}\bigl(\Delta^n\times \Cc,\N(\Dd)\bigr)&\cong \Hom_{\cat{Cat}}\bigl(\operatorname{ho}(\Delta^n\times \Cc),\Dd\bigr)\\
		&\cong \Hom_{\cat{Cat}}\bigl(\operatorname{ho}(\Cc)\times[n],\Dd\bigr)\\
		&\cong \Hom_{\cat{Cat}}\bigl([n],\Fun(\operatorname{ho}(\Cc),\Dd)\bigr)\\
		&\cong \N\bigl(\Fun(\operatorname{ho}(\Cc),\Dd)\bigr)_n\,.
	\end{align*} 
	In the first step, we use the definition of $\F(-,-)$ from \cref{par:FInternalHom}. In the second step, we use the adjunction $\operatorname{ho}\colon\cat{sSet}\shortdoublelrmorphism \cat{Cat}\noloc\N$ from \cref{par:Nerve}. In the third step, we use that $\operatorname{ho}$ commutes with products of quasi-categories, which follows from the description in \cref{par:HomotopyCategory}. In the fourth step, we use \enquote{currying} for ordinary categories. Finally, in the fifth step we plug in the definition of $\N(\Fun(\operatorname{ho}(\Cc),\Dd))$.
	
	To prove the \enquote{in particular}, it suffices to see that the unit $u_{\Cc'}\colon\Cc'\rightarrow \operatorname{ho}\N(\Cc')$ of the adjunction $\operatorname{ho}\dashv \N$ from \cref{par:Nerve} is an isomorphism of categories (and we really need an isomorphism, not just an equivalence of categories). This is easy to check using \cref{lem:LiftingConditions}\cref{enum:LiftingN} and the explicit description of $\operatorname{ho}\N(\Cc)$ from \cref{par:HomotopyCategory}.%(also note that, by \cref{lem:1FullyFaithfulConservativeAdjunction}\cref{enum:1FullyFaithfulIffUnitEquivalence}, this implies that $\N\colon \cat{Cat}\rightarrow\cat{sSet}$ is fully faithful).
\end{proof}
\begin{numpar}[Equivalences in quasi-categories.]\label{par:Equivalence}
	We say that a morphism $\alpha\colon x\rightarrow y$ in $\Cc$ is an \emph{equivalence} if it becomes an isomorphism in the homotopy category $\operatorname{ho}(\Cc)$. Equivalently, $\alpha$ is an equivalence if and only if the horns $\sigma_\mathrm{left}\colon\Lambda_0^2\rightarrow\Cc$ and $\sigma_\mathrm{right}\colon\Lambda_2^2\rightarrow \Cc$ represented by\label{enum:Equivalence}
	\begin{equation*}
		\sigma_\mathrm{left}=\begin{tikzpicture}[commutative diagrams/every diagram,baseline=(mid.base)]
			\path node[outer sep=0.25ex] (0) at (0,0) {$x$} ++(0:3.8em) node[text depth=0pt,outer sep=0.25ex] (1) {$y$} ++ (120:3.8em) node[outer sep=0.25ex] (2) {$x$};
			\path (0) to node[pos=0.5] (mid) {} (2);
			\path[commutative diagrams/.cd, every arrow, every label]
			(0) edge node[swap] {$\alpha$} (1)
			(1) edge[dotted] (2)
			(0) edge node {$\id_y$} (2);
		\end{tikzpicture}
		\quad\text{and}\quad
		\sigma_\mathrm{right}=\begin{tikzpicture}[commutative diagrams/every diagram,baseline=(mid.base)]
			\path node[outer sep=0.25ex] (0) at (0,0) {$y$} ++(0:3.8em) node[text depth=0pt,outer sep=0.25ex] (1) {$x$} ++ (120:3.8em) node[outer sep=0.25ex] (2) {$y$};
			\path (0) to node[pos=0.5] (mid) {} (2);
			\path[commutative diagrams/.cd, every arrow, every label]
			(0) edge[dotted] (1)
			(1) edge node[swap] {$\alpha$} (2)
			(0) edge node {$\id_y$} (2);
		\end{tikzpicture}
	\end{equation*}
	can be filled, that is, if and only if there are $2$-simplices $\ov\sigma_\mathrm{left},\ov\sigma_\mathrm{right}\colon \Delta^2\rightarrow\Cc$ such that $\ov\sigma_\mathrm{left}|_{\Lambda_0^2}=\sigma_\mathrm{left}$ and $\ov\sigma_\mathrm{right}|_{\Lambda_2^2}=\sigma_\mathrm{right}$. Indeed, by \cref{par:Composition} above, $\ov\sigma_\mathrm{left}$ corresponds to a left inverse of $\alpha$ and $\ov\sigma_\mathrm{right}$ corresponds to a right inverse. We say \emph{$x$ and $y$ are equivalent} and write $x\simeq y$ if there exists an equivalence $\alpha\colon x\rightarrow y$.
\end{numpar}
\begin{numpar}[Sub-quasi-categories.]\label{par:SubQuasiCategories}
	If $\Cc$ is a quasi-category and $S_0\subseteq \Cc_0$ is a set of $0$-simplices, we can define a sub-simplicial set $\Cc[S_0]\subseteq \Cc$ by declaring that a simplex $\Delta^n\rightarrow \Cc$ belongs to $\Cc[S_0]$ if and only if all its vertices $\{i\}\rightarrow\Delta^n\rightarrow\Cc$ for $0\leqslant i\leqslant n$ belong to $S_0$. It's straightforward to check that $\Cc[S_0]$ is a quasi-category again: If $\Lambda_i^n\rightarrow \Cc[S_0]$ is an inner horn, any filler $\Delta^n\rightarrow\Cc$ will automatically belong to $\Cc[S_0]$, because $\Lambda_i^n\rightarrow\Delta^n$ is a bijection on vertices whenever $n\geqslant 2$. We call $\Cc[S_0]$ the \emph{full sub-quasi-category spanned by $S_0$}.\label{enum:SubQuasiCategories}
	
	Similarly, assume $S_1\subseteq \Cc_1$ is a set of $1$-simplices which contains all identities and is closed under the equivalence relation from \cref{par:Composition} as well as under compositions. We can define a sub-simplicial set $\Cc[S_1]\subseteq \Cc$ by declaring that a simplex $\Delta^n\rightarrow \Cc$ belongs to $\Cc[S_1]$ if and only if all its edges $\Delta^{\{i,j\}}\rightarrow\Delta^n\rightarrow\Cc$ for $0\leqslant i,j\leqslant n$ belong to $S_1$. Once again, if $\Lambda_i^n\rightarrow \Cc[S_1]$ is an inner horn, any filler $\Delta^n\rightarrow\Cc$ will automatically belong to $\Cc[S_1]$, because any \enquote{missing} edge in $\Delta^n\smallsetminus \Lambda_i^n$ is a composition of edges in $\Lambda_i^n$. Hence $\Cc[S_1]$ is a quasi-category again, and we call it the \emph{sub-quasi-category spanned by $S_1$} (and usually we'll emphasise that $\Cc[S_1]$ is not full).
\end{numpar}
\begin{numpar}[The opposite quasi-category.]\label{par:Opposite}
	Every quasi-category $\Cc$ admits an \emph{opposite quasi-category} $\Cc^\op$. In fact, this construction works for arbitrary simplicial sets.  Let $(-)^\op\colon \cat{Cat}\rightarrow\cat{Cat}$ be the functor that sends a category to its opposite. Consider the composition
	\begin{equation*}
		\nabla\colon\IDelta\overset{U}{\longrightarrow}\cat{Cat}\xrightarrow{(-)^\op}\cat{Cat}\overset{\N}{\longrightarrow}\cat{sSet}\,,
	\end{equation*}
	where $U$ and $\N$ are the functors from \cref{par:Nerve}. This composition sends $[n]\mapsto\N([n]^\op)\cong \Delta^n$, since there is an isomorphism of categories $[n]^\op\cong [n]$ given by sending $i\mapsto n-i$. Nevertheless, $\nabla$ does \emph{not} coincide with the Yoneda embedding $\Yo_{\IDelta}\colon\IDelta\rightarrow\cat{sSet}$, which also sends $[n]\mapsto\Delta^n$, since the effect on morphisms is different ($\nabla$ \enquote{reverses the order} of face and degeneracy maps). According to \cref{thm:1PShFreeCocompletion}, $\nabla$ admits a unique colimit-preserving extension, which we denote $(-)^\op\colon \cat{sSet}\rightarrow\cat{sSet}$. Intuitively, if $X$ is a simplicial set, then $X^\op$ is given by inverting the direction of every $1$-simplex and by reversing the order of all face and degeneracy maps. It's straightforward to check that $(-)^\op\circ (-)^\op\simeq \id_{\cat{sSet}}$ (so the right adjoint from \cref{thm:1PShFreeCocompletion} is just $(-)^\op$ again) and that $\N(\Dd)^\op\cong \N(\Dd^\op)$ holds for every ordinary category $\Dd$. Furthermore, if $\Cc$ is a quasi-category, then so is $\Cc^\op$, because $(-)^\op$ transforms an inner horn inclusion $\Lambda_i^n\rightarrow \Delta^n$, where $n\geqslant 2$ and $0<i<n$, into $\Lambda_{n-i}^n\rightarrow\Delta^n$, which is again an inner horn inclusion.
\end{numpar}
This finishes our preliminary ordinary-to-quasi-categories dictionary. Next, we'll introduce another notion that will play a central role in these notes.
\begin{defi}\label{def:Anima}
	A quasi-category $\Cc$ is called an \emph{anima} (plural \emph{animae}) if all its morphisms are equivalences in the sense of \cref{par:Equivalence}. For an arbitrary quasi-category, we let $\core(\Cc)\subseteq \Cc$ be the (non-full) sub-quasi-category spanned by the equivalences, as defined in \cref{par:SubQuasiCategories}.
\end{defi}
It follows immediately that $\core(\Cc)$ is the largest anima contained in $\Cc$.
\begin{thm}[Joyal, {\cite[Corollary~\href{https://people.math.rochester.edu/faculty/doug/otherpapers/Joyal-QCKC.pdf\#page=3}{1.4}]{JoyalLifting}}]\label{thm:AnimaeAreKanComplexes}
	A quasi-category $\Cc$ is a Kan complex if and only if it is an anima.
\end{thm}
\begin{proof}
	If $\Cc$ is a Kan complex, then the horns from \cref{par:Equivalence} can be filled, so $\Cc$ is an anima. The converse is much harder to prove and we'll postpone it to \cref{cor:AnimaKanComplexes}.
\end{proof}
So on one hand, by \cref{def:Anima}, animae are the analogues of groupoids in quasi-category theory. In fact, people used (and continue to use) the term \emph{$\infty$-groupoid}, before Beilinson, Clausen, and Scholze decided to invent a new term. On the other hand, \cref{thm:AnimaeAreKanComplexes} says that animae are the same as \emph{Kan complexes}. We'll see in \cref{sec:SimplicialHomotopyTheory} that for the purposes of homotopy theory, Kan complexes and topological spaces can be used interchangeably. This fits perfectly with Grothendieck's \emph{homotopy hypothesis}, which predicts that the theory of $\infty$-groupoids/animae should essentially be the homotopy theory of topological spaces.

We'll keep the terms \emph{anima} and \emph{Kan complex} distinct until we've finished the proof that they coincide (\cref{cor:AnimaKanComplexes}). After that, we'll use the terms interchangeably. Starting from \cref{sec:InftyCategoryTheory}, we try to keep our arguments as model-independent as possible. Accordingly, we'll settle on \emph{anima}, only using \emph{Kan complex} to emphasise that a certain (non-model-independent) argument takes place in thequasi-categorical model.


\subsection{Simplicially enriched categories}
Until now, we know a good supply of Kan complexes, given by $\Sing Y$ for every topological space $Y$ (see \cref{lem:LiftingConditions}\cref{enum:LiftingSing}). We'll see in \cref{thm:SimplicialApproximation} that these exhaust essentially all Kan complexes. Besides that, our only other examples of quasi-categories are nerves of ordinary categories (see \cref{lem:LiftingConditions}\cref{enum:LiftingN}). These can't possibly be all! The goal of this subsection is to provide a rich source of non-trivial examples of quasi-categories, using a fancier version of the nerve construction.
\begin{numpar}[\enquote{Definition}.]
	A \emph{simplicially enriched category} $\Cc$ is the same as a category, except that the morphisms sets $\Hom_\Cc(x,y)$ for $x,y\in\Cc$ are replaced by simplicial sets $\F_\Cc(x,y)$. Composition of morphisms is now a map of simplicial sets $\circ\colon \F_\Cc(x,y)\times\F_\Cc(y,z)\rightarrow\F_\Cc(x,z)$ and the identity on any object $x\in\Cc$ is a $0$-simplex $\id_x\in\F_\Cc(x,x)_0$. Composition and identities are supposed to satisfy some straightforward compatibilities that we won't spell out. Furthermore, if $\Cc$ and $\Dd$ are simplicially enriched categories, there is an obvious notion of a \emph{simplicially enriched functor $F\colon \Cc\rightarrow\Dd$}. We let $\cat{Cat}_\Delta$ denote the category of (small) simplicially enriched categories and simplicially enriched functors between them. 
	
	If you would like to see a formal definition of these notions, have a look at \cite[Definitions~1.2.34 and~1.2.35]{Land}.
\end{numpar}
\begin{con}\label{con:SimplicialNerve}
	We'll construct a \enquote{simplicially thickened} versions of the ordinary categories $[n]$ and use them to define a simplicial nerve functor $\N^\Delta\colon\cat{Cat}_\Delta\rightarrow\cat{sSet}$. This is originally due to Cordier and Porter \cite{CordierPorter}.
	
	To start with, the simplicially enriched category $\CC[\Delta^n]$ is given as follows: It's objects are $0,1,\dotsc,n$ and it's morphisms are given by\label{enum:CDeltan}
	\begin{equation*}
		\F_{\CC[\Delta^n]}(i,j)\coloneqq\ScaledBracesCases{\!\begin{plaincases*}
			\emptyset & if $i>j$\\
			\Delta^0 & if $i=j$\\
			\square^{j-i-1} & if $i<j$
		\end{plaincases*}}\,.
	\end{equation*}
	Here $\square^n\coloneqq (\Delta^1)^n$ is the \emph{$n$-cube}. Note the shift by $-1$ in the definition! In particular, $\F_{\CC[\Delta^n]}(i,i)=\Delta^0$ (and that $0$-simplex is necessarily $\id_i$), but also $\F_{\CC[\Delta^n]}(i,i+1)=\square^0\cong \Delta^0$. The composition map $\circ\colon\F_{\CC[\Delta^n]}(i,j)\times \F_{\CC[\Delta^n]}(j,k)\rightarrow \F_{\CC[\Delta^n]}(i,k)$ is given by
	\begin{equation*}
		\square^{j-i-1}\times\square^{k-j-1}\overset{\cong}{\longrightarrow}\square^{j-i-1}\times\{1\}\times\square^{k-j-1}\subseteq \square^{k-i-1}
	\end{equation*}
	if $i<j<k$; in the other cases, there's only one possible composition map. The simplicially enriched categories $\CC[\Delta^n]$ can be assembled into a functor $\CC[-]\colon\IDelta\rightarrow\cat{Cat}_\Delta$. A conceptual construction of this functor is given in \cite[Definition~\HTTthm{1.1.5.3}]{HTT} or \cite[Lemma~1.2.62]{Land}. Since it's quite annoying to unravel said conceptual construction, let us describe the simplicially enriched functors $\CC[d_i]\colon \CC[\Delta^{n-1}]\rightarrow\CC[\Delta^n]$ and $\CC[s_j]\colon \CC[\Delta^n]\rightarrow\CC[\Delta^{n-1}]$ explicitly: On objects, $\CC[d_i]$ and $\CC[s_j]$ are just given by $d_i$ and $s_j$, repectively. For the effect on morphisms, let's first describe $\CC[d_i]\colon \F_{\CC[\Delta^{n-1}]}(k,\ell)\rightarrow \F_{\CC[\Delta^n]}(d_i(k),d_i(\ell))$ in the case $k<i\leqslant\ell$ (in all other cases, we simply get the identity). Then $d_i(k)=k$ and $d_i(\ell)=\ell+1$ and the desired morphism is\label{enum:CDeltanFunctorial}
	\begin{equation*}
		\square^{\ell-k-1}\overset{\cong}{\longrightarrow}\square^{i-k-1}\times\{0\}\times\square^{(\ell+1)-i-1}\subseteq \square^{(\ell+1)-k-1}\,.
	\end{equation*}
	Similarly, $\CC[s_j]\colon \F_{\CC[\Delta^n]}(k,\ell)\rightarrow\F_{\CC[\Delta^{n-1}]}(s_j(k),s_j(\ell))$ is only interesting for $k\leqslant j<\ell$. If $k=j$ or $j+1=\ell$, then the desired morphism $\square^{\ell-k-1}\cong (\Delta^1)^{\ell-k-1}\rightarrow (\Delta^1)^{\ell-k-2}\cong \square^{\ell-k-2}$ is given by forgetting the first or the last factor, respectively. If $k<j$ and $j+1<\ell$, then the desired morphism is
	\begin{equation*}
		\square^{\ell-k-1}\cong \square^{j-k-1}\times\square^2\times\square^{\ell-(j+1)-1}\longrightarrow\square^{j-k-1}\times\Delta^1\times\square^{\ell-(j+1)-1}\cong \square^{\ell-k-2}\,,
	\end{equation*}
	induced by the map $\square^2\rightarrow\Delta^1$ that sends $(0,0)\in\square^2$ to $0\in\Delta^1$ and the other three $0$-simplices of $\square^2$ to $1\in\Delta^1$.
	
	It can be shown that the category $\cat{Cat}_\Delta$ has all colimits (see \cite[Corollary~1.2.45]{Land}). Consequently, by \cref{thm:1PShFreeCocompletion}, the functor above admits a unique colimit-preserving extension $\CC[-]\colon\cat{sSet}\rightarrow \cat{Cat}_\Delta$, which in turn has a right-adjoint $\N^\Delta\colon \cat{Cat}_\Delta\rightarrow\cat{sSet}$, called the \emph{simplicial nerve} or \emph{coherent nerve}. By the formula from \cref{lem:1LanAlongYonedaHasRightAdjoint}, the simplicial nerve is given by
	\begin{equation*}
		\N^\Delta(\Cc)_n\cong \Hom_{\cat{Cat}_\Delta}\bigl(\CC[\Delta^n],\Cc\bigr)\,.
	\end{equation*}
\end{con}
\begin{lem}[Cordier--Porter, {\cite[Theorem~2.1]{CordierPorter}}]\label{lem:SimplicialNerveYieldsQuasiCategories}
	Let $\Cc$ be a small simplicially enriched category. If $\Cc$ is even Kan-enriched, that is, if $\F_\Cc(x,y)$ is a Kan complex for all $x,y\in\Cc$, then $\N^\Delta(\Cc)$ is a quasi-category.
\end{lem}
\begin{proof}[Proof sketch]
	By the adjunction $\CC[-]\colon\cat{sSet}\shortdoublelrmorphism\cat{Cat}_\Delta\noloc\N^\Delta$ from \cref{con:SimplicialNerve}, an inner horn filling problem for $\N^\Delta(\Cc)$ as in \cref{def:QuasiCategory} is equivalent to an extension problem
	\begin{equation*}
		\begin{tikzcd}
			\CC[\Lambda_i^n]\rar["f"]\dar & \Cc\\
			\CC[\Delta^n]\urar[dashed]
		\end{tikzcd}
	\end{equation*}
	of simplicially enriched categories. The functor $\CC[\Lambda_i^n]\rightarrow\CC[\Delta^n]$ is a bijection on objects and an isomorphism on all but one simplicial sets of morphisms. The only difference between these two simplicially enriched categories is that $\F_{\CC[\Lambda_i^n]}(0,n)\rightarrow\F_{\CC[\Delta^n]}(0,n)\cong \square^{n-1}$ is not an isomorphism. Instead, $\F_{\CC[\Lambda_i^n]}(0,n)$ is given by deleting the interior and the bottom $i$-face of the $(n-1)$-cube $\square^{n-1}$. More precisely, if $\partial \square^{n-1}\coloneqq \bigcup_{j=1}^{n-1}(\square^{j-1}\times(\{0\}\sqcup\{1\})\times\square^{n-j-1})$ denotes the \emph{boundary of the $(n-1)$-cube}, then $\F_{\CC[\Lambda_i^n]}(0,n)\rightarrow\F_{\CC[\Delta^n]}(0,n)$ can be identified with the inclusion of simplicial sets
	\begin{equation*}
		\partial \square^{n-1}\smallsetminus \bigl(\square^{i-1}\times\{0\}\times\square^{n-i-1}\bigr)\subseteq \square^{n-1}\,.
	\end{equation*}
	To make this precise, one has to show that the description of $\CC[\Lambda_i^n]$ given above satisfies the universal property of $\colimit_{(m,\Delta^m\rightarrow\Lambda_i^n)}\CC[\Delta^m]$ in $\cat{Cat}_\Delta$. This is not hard, but technical. A full argument is in \cite[Lemma~1.2.69]{Land}.
	
	So to solve the extension problem of simplicially enriched categories above, it's enough to solve the extension problem
	\begin{equation*}
		\begin{tikzcd}
			\partial \square^{n-1}\smallsetminus \bigl(\square^{i-1}\times\{0\}\times\square^{n-i-1}\bigr)\rar["f"]\dar & \F_\Cc\bigl(f(0),f(n)\bigr)\\
			\square^{n-1}\urar[dashed]
		\end{tikzcd}
	\end{equation*}
	of simplicial sets. This can be done by successive horn filling (or by applying the upcoming \cref{lem:AnodynePushout}, which is also proved by successive horn filling), using the fact that $\F_\Cc(f(0),f(n))$ is a Kan complex, as $\Cc$ is supposed to be Kan-enriched. A complete argument is in \cite[Lemma~1.2.70]{Land}.
\end{proof}
\begin{exm}\label{exm:SimplicialNerve}
	The category of simplicial sets can be turned into a simplicially enriched category $\cat{sSet}^\Delta$ by putting $\F_{\cat{sSet}^\Delta}(X,Y)\coloneqq \F(X,Y)$. This can be used to construct some interesting quasi-categories as follows:
	\begin{alphanumerate}
		\item Restricting to the full subcategory $\cat{Kan}\subseteq \cat{sSet}$ yields a simplicial enrichment $\cat{Kan}^\Delta$. Note that $\cat{Kan}^\Delta$ is actually a Kan-enriched category, since $\F(X,Y)$ is a Kan complex whenever $Y$ is a Kan complex, as we'll see in \cref{cor:FIsKanComplex}. Up to set-theoretic difficulties that we'll not address here, \cref{lem:SimplicialNerveYieldsQuasiCategories} shows that\label{enum:An}
		\begin{equation*}
			\cat{An}\coloneqq \N^\Delta(\cat{Kan}^\Delta)
		\end{equation*}
		is a quasi-category; we call it the \emph{quasi-category of animae}.
		\item For quasi-categories $\Cc$ and $\Dd$, the simplicial set $\F(\Cc,\Dd)$ is a quasi-category; once again, this will be shown in \cref{cor:FIsKanComplex}. Then $\core \F(\Cc,\Dd)$ from \cref{def:Anima} is an anima, hence a Kan complex by \cref{thm:AnimaeAreKanComplexes}. So we can turn the category of quasi-categories $\cat{QCat}$ into a Kan-enriched category $\cat{QCat}^\Delta$ by putting $\F_{\cat{QCat}^\Delta}(\Cc,\Dd)\coloneqq \core\F(\Cc,\Dd)$. By \cref{lem:SimplicialNerveYieldsQuasiCategories} (and up to set-theoretic difficulties),\label{enum:CatInfty}
		\begin{equation*}
			\cat{Cat}_\infty\coloneqq \N^\Delta(\cat{QCat}^\Delta)
		\end{equation*}
		is a quasi-category; we call it the \emph{quasi-category of \embrace{small} quasi-categories}.
	\end{alphanumerate}
	Let's unravel how the notions from \cref{par:Composition}, \cref{par:HomotopyCategory}, and \cref{par:Equivalence} look like in the cases of $\cat{An}$ and $\cat{Cat}_\infty$. A $1$-simplex $\alpha\colon \Delta^1\rightarrow\cat{Cat}_\infty$ is equivalently a simplicially enriched functor $\ov\alpha\colon\CC[\Delta^1]\rightarrow\cat{QCat}^\Delta$. Let $\Cc\coloneqq \ov\alpha(0)$ and $\Dd\coloneqq \ov\alpha(1)$. As we've seen in \cref{con:SimplicialNerve},  $\F_{\CC[\Delta^1]}(0,1)\cong \Delta^0$. Hence $\alpha$ is given by a morphism $\Delta^0\rightarrow\core \F(\Cc,\Dd)$ of simplicial sets. In other words, a morphism in $\cat{Cat}_\infty$ is given by a functor $\Cc\rightarrow\Dd$ of quasi-categories, as we would expect.
	
	Next, let's consider a $2$-simplex $\sigma\colon\Delta^2\rightarrow\cat{Cat}_\infty$, or equivalently, a simplicially enriched functor $\ov\sigma\colon \CC[\Delta^2]\rightarrow\cat{QCat}^\Delta$. Let $\Cc\coloneqq \ov\sigma(0)$, $\Dd\coloneqq \ov\sigma(1)$, and $\Ee\coloneqq \ov\sigma(2)$. Furthermore, let $F\colon \Cc\rightarrow\Dd$ and $G\colon \Dd\rightarrow \Ee$ be the functors of quasi-categories corresponding to the $1$-simplices $\sigma|_{\Delta^{\{0,1\}}}=d_2^*(\sigma)$ and $\sigma|_{\Delta^{\{1,2\}}}=d_0^*(\sigma)$. Now $\F_{\CC[\Delta^2]}(0,2)\cong\Delta^1$ by \cref{con:SimplicialNerve}, so $\ov\sigma$ induces a map $\Delta^1\rightarrow\core\F(\Cc,\Ee)$. By definition of the composition in $\CC[\Delta^2]$, we find that $\{0\}\rightarrow \Delta^1\rightarrow \core\F(\Cc,\Ee)$ is $G\circ F\colon \Cc\rightarrow \Ee$, whereas $\{1\}\rightarrow \Delta^1\rightarrow \core\F(\Cc,\Ee)$ is another functor $H\colon \Cc\rightarrow\Ee$. The morphism $\Delta^1\rightarrow\core\F(\Cc,\Ee)$ is an equivalence $G\circ F\simeq H$ in $\F(\Cc,\Ee)$.
	
	Therefore, if $F\colon \Cc\rightarrow\Dd$ and $G\colon \Dd\rightarrow\Ee$ are functors of quasi-categories, hence morphisms in $\cat{Cat}_\infty$, then a composition of $F$ and $G$ in the quasi-category $\cat{Cat}_\infty$, as defined in \cref{par:Composition}, is a functor $H\colon \Cc\rightarrow\Ee$ of quasi-categories together with an equivalence $G\circ F\simeq H$ in $\F(\Cc,\Ee)$. The same analysis can be done for $\cat{An}$. So if $f\colon X\rightarrow Y$ and $g\colon Y\rightarrow Z$ are maps of Kan complexes, corresponding to morphisms in the quasi-category $\cat{An}$, then a composition of $f$ and $g$ in the quasi-category $\cat{An}$ is a morphism $h\colon X\rightarrow Z$ together with a $1$-simplex $\Delta^1\rightarrow \F(X,Z)$ from $g\circ f$ to $h$. By \cref{par:FInternalHom}, such a $1$-simplex $\Delta^1\rightarrow \F(X,Z)$ is equivalently a map $\eta\colon \Delta^1\times X\rightarrow Z$ such that
	\begin{equation*}
		\begin{tikzcd}
			\{0\}\times X\dar\dar[phantom,""{name=A}]\arrow[from=2-2,to=1-1,commutes,xshift=-1ex]\drar[bend left,"g\circ f"]& \\
			\Delta^1\times X\rar["\eta"]& Z\\
			\{1\}\times X\uar\uar[phantom,""{name=A}]\arrow[from=2-2,to=3-1,commutes,xshift=-1ex]\urar[bend right, "h"'] & 
		\end{tikzcd}
	\end{equation*}
	commutes. In other words, $\eta$ is a \emph{homotopy from $g\circ f$ to $h$}. In summary, we obtain the following slogans:
	\begin{alphanumerate}[label={}]\itshape
		\item\enquote{Compositions in $\cat{Cat}_\infty$ are compositions in $\cat{sSet}$ up to equivalence of functors.}
		
		\item\enquote{Compositions in $\cat{An}$ are compositions in $\cat{sSet}$ up to homotopy.}
	\end{alphanumerate}
	Furthermore, this analysis shows that two functors of quasi-categories $F,G\colon \Cc\rightarrow \Dd$ are equivalent as morphisms in $\cat{Cat}_\infty$ in the sense of \cref{par:Composition} if and only if they are equivalent as objects in $\F(\Cc,\Dd)$. Similarly, two morphisms of animae $f,g\colon X\rightarrow Y$ are equivalent as morphisms in $\cat{An}$ in the sense of \cref{par:Composition} if and only they are homotopic. This somewhat explains the term \emph{homotopy category}.
	
	Finally, we see that an equivalence $\Cc\simeq \Dd$ in the quasi-category $\cat{Cat}_\infty$, as defined in \cref{par:Equivalence}, is given by functors of quasi-categories $F\colon \Cc\rightarrow \Dd$ and $G\colon \Dd\rightarrow \Cc$ together with equivalences $G\circ F\simeq \id_\Cc$ and $F\circ G\simeq \id_\Dd$, exactly as an equivalence of ordinary categories. Analogously, an equivalence $X\simeq Y$ in $\cat{An}$ is given by maps of Kan complexes $f\colon X\rightarrow Y$ and $g\colon Y\rightarrow X$, together with homotopies $g\circ f\simeq\id_X$ and $f\circ g\simeq \id_Y$. In other words, equivalences in $\cat{An}$ are simply \emph{homotopy equivalences}. We'll explore this in much more detail in \cref{sec:SimplicialHomotopyTheory}.
\end{exm}
If $X$, $Y$ are Kan complexes, then $\F(X,Y)$ is a Kan complex too, as we'll see in \cref{cor:FIsKanComplex}. Hence $\F(X,Y)=\core\F(X,Y)$ and therefore the Kan-enriched category $\cat{Kan}^\Delta$ is a full sub-simplicially enriched category of $\cat{QCat}^\Delta$. Using the explicit formula for the simplicial nerve from \cref{con:SimplicialNerve}, it's straightforward to see that $\N^\Delta(-)$ sends full sub-simplicially enriched categories to full sub-quasi-categories in the sense of \cref{par:SubQuasiCategories}. Thus $\cat{An}\subseteq \cat{Cat}_\infty$ is a full sub-quasi-category of $\cat{Cat}_\infty$. In particular, if $X$ and $Y$ are Kan complexes, then
\begin{equation*}
	\Hom_{\cat{An}}(X,Y)\overset{\cong}{\longrightarrow}\Hom_{\cat{Cat}_\infty}(X,Y)
\end{equation*}
is an isomorphism of simplicial sets. In general, \cref{thm:CordierPorter} below describes the $\Hom$ anima from \cref{par:HomInQuasiCategories} in a simplicial nerve. A relatively short proof of that theorem was given by Achim Krause and Fabian in \cite{AchimFabian}.
\begin{thm}\label{thm:CordierPorter}
	Let $\Cc$ be a Kan-enriched category. Then there is a homotopy equivalence of Kan complexes
	\begin{equation*}
		\Hom_{\N^\Delta(\Cc)}(x,y)\simeq \F_\Cc(x,y)\,.
	\end{equation*}
	In particular, $\Hom_{\cat{An}}(X,Y)\simeq \F(X,Y)$ for all $X,Y\in\cat{An}$ and $\Hom_{\cat{Cat}_\infty}(\Cc,\Dd)\simeq \core\F(\Cc,\Dd)$ for all $\Cc,\Dd\in\cat{Cat}_\infty$.\hfill$\blacksquare$
\end{thm}
\begin{exm}\label{exm:CatAs2Category}
	We can also turn the category of ordinary categories $\cat{Cat}$ into a Kan enriched category\footnote{Don't confuse $\cat{Cat}^\Delta$, the simplicially enriched category of categories, with $\cat{Cat}_\Delta$, the category of simplicially enriched categories.} $\cat{Cat}^\Delta$ via $\F_{\cat{Cat}^\Delta}(\Cc,\Dd)\coloneqq \core\N(\Fun(\Cc,\Dd))$. We let
	\begin{equation*}
		\cat{Cat}^{(2)}\coloneqq \N^\Delta(\cat{Cat}^\Delta)
	\end{equation*}
	denote its simplicial nerve. According to \cref{thm:CordierPorter}, $\Hom_{\cat{Cat}^{(2)}}(\Cc,\Dd)\simeq \core\N(\Fun(\Cc,\Dd))$. In particular, we see that $\cat{Cat}^{(2)}$ is different from $\N(\cat{Cat})$, the nerve of the ordinary category of categories. Indeed, we've seen in \cref{par:HomInQuasiCategories} that $\Hom_{\N(\cat{Cat})}(\Cc,\Dd)$ would be a discrete: a disjoint union of copies of $\Delta^0$, where the indexing set is precisely the set of functors from $\Cc$ to $\Dd$. In contrast to that, $\core\N(\Fun(\Cc,\Dd))\simeq \N(\core \Fun(\Cc,\Dd))$, where $\core \Fun(\Cc,\Dd)\subseteq \Fun(\Cc,\Dd)$ denotes the maximal groupoid contained in $\Fun(\Cc,\Dd)$. So $\Hom_{\cat{Cat}^{(2)}}(\Cc,\Dd)$ is the nerve of a groupoid and usually not a discrete simplicial set.\footnote{One says that $\cat{Cat}^{(2)}$ is the \emph{$2$-category of categories}, and we've just seen why: $\cat{Cat}^{(2)}$ not only knows about categories and functors, but through $\Hom_{\cat{Cat}^{(2)}}(\Cc,\Dd)\simeq \N(\core\Fun(\Cc,\Dd))$ it also contains information about natural equivalences between functors. In general, a quasi-category $\Ee$ is said to be an \emph{$n$-category} if for all objects $x,y\in \Ee$ and all morphisms $f\in\Hom_\Ee(x,y)$ one has $\pi_i(\Hom_\Ee(x,y),f)\cong 0$ whenever $i\geqslant n$. Here $\pi_i$ refers to the homotopy groups introduced in \cref{con:HomotopyGroups} and we've used implicitly that $\Hom_\Ee(x,y)$ is a Kan complex, as will be shown in \cref{cor:AnimaKanComplexes,cor:HomAnima}. It is not hard to check that $\cat{Cat}^{(2)}$ is indeed a $2$-category. Indeed, we've seen that $\Hom_{\cat{Cat}^{(2)}}(\Cc,\Dd)\simeq \N(\core\Fun(\Cc,\Dd))$. By the observation in the proof of \cref{lem:FullyFaithfulAnimae}, we get
	\begin{equation*}
		\pi_i\bigl(\N(\core\Fun(\Cc,\Dd)),F\bigr)\cong \pi_{i-1}\bigl(\Hom_{\N(\core\Fun(\Cc,\Dd))}(F,F),\id_F\bigr)
	\end{equation*}
	for all $F\in \N(\core\Fun(\Cc,\Dd))$. But now $\Hom_{\N(\core\Fun(\Cc,\Dd))}(F,F)$ is a discrete simplicial set, because it is the $\Hom$ anima in the nerve of an ordinary category. So the right-hand side vanishes for $i-1\geqslant 1$, as desired.
	
	You might have expected the $2$-category of categories to encompass all natural transformations, not only the natural equivalences. The reason for this confusion is an unfortunate oversimplification of language on our part: What we call \emph{$\infty$-categories} (or \emph{$n$-categories}) should more accurately be called $(\infty,1)$-categories (or \emph{$(n,1)$-categories}). The first entry of the pair \enquote{$(\infty,1)$} signifies that such an object contains \enquote{$d$-morphisms} for every dimension $0\leqslant d<\infty$, whereas the second entry refers to the fact that all $d$-morphisms for $d>1$ are invertible. This is evidenced by the fact that $\Hom_\Ee(x,y)$ is a Kan complex for any quasi-category $\Ee$ and all $x,y\in \Ee$. Thanks to the effort of many mathematicians, we now have well-studied notions of \emph{$(\infty,k)$-categories} (with $(\infty,0)$-categories corresponding to animae and $(\infty,1)$-categories corresponding to what we call \emph{$\infty$-categories} in these notes), in which only $d$-morphisms for $d>k$ need to be invertible. These have become important tools in modern mathematics---for example, it's sometimes necessary to use the fact that $\cat{Cat}_\infty$ can be enhanced to an $(\infty,2)$-category---but this goes beyond the scope of these notes.}
	
	Thanks to \cref{lem:SimplicialHoNerveAdjunction}, the nerve functor $\N\colon \cat{Cat}\rightarrow\cat{QCat}$ defines a fully faithful functor of simplicially enriched categories $\N\colon \cat{Cat}^\Delta\rightarrow \cat{QCat}^\Delta$. Accordingly, we can regard $\cat{Cat}^{(2)}$ as the full sub-quasi-category of $\cat{Cat}_\infty$ spanned by those quasi-categories that are nerves of ordinary categories.
	
	In a similar way, one can define equip the category of groupoids $\cat{Grpd}$ with a Kan enrichment $\cat{Grpd}^\Delta$ (simply given by restriction from $\cat{Cat}^\Delta$) and we let
	\begin{equation*}
		\cat{Grpd}^{(2)}\coloneqq \N^\Delta(\cat{Grpd}^\Delta)
	\end{equation*}
	denotes its simplicial nerve. As above, $\cat{Grpd}^{(2)}$ is the full sub-quasi-category of $\cat{Cat}_\infty$ spanned by the nerves of groupoids. Since every nerve of a groupoid is a Kan complex (which follows from \cref{cor:AnimaKanComplexes}, but can also be checked by hand), we see that $\cat{Grpd}^{(2)}$ is also a full sub-quasi-category of $\cat{An}$.
\end{exm}

\newpage
\section{Simplicial homotopy theory}\label{sec:SimplicialHomotopyTheory}
The goal of this section is to describe how to do homotopy theory with simplicial sets instead of topological spaces. This doesn't quite work on the nose, since simplicial sets are much more rigid than topological spaces. For example, consider the naive definition of homotopies: Two maps $f,g\colon X\rightarrow Y$ are said to be \emph{homotopic}, $f\simeq g$, if there exists a map $\eta\colon \Delta^1\times X\rightarrow Y$ such that the diagram
\begin{equation*}
	\begin{tikzcd}
		\{0\}\times X\dar\dar[phantom,""{name=A}]\arrow[from=2-2,to=1-1,commutes,xshift=-1ex]\drar[bend left,"f"]& \\
		\Delta^1\times X\rar["\eta"]& Z\\
		\{1\}\times X\uar\uar[phantom,""{name=A}]\arrow[from=2-2,to=3-1,commutes,xshift=-1ex]\urar[bend right, "g"'] & 
	\end{tikzcd}
\end{equation*}
commutes. This relation is \emph{not} an equivalence relation! For example, if $d_1\colon\Delta^0\simeq\{0\}\rightarrow\Delta^1$ and $d_0\colon \Delta^0\simeq\{1\}\rightarrow \Delta^1$ are the two maps from the $0$-simplex to the $1$-simplex, then $d_1\simeq d_0$, but $d_0\not\simeq d_1$. So the relation is not symmetric (nor transitive). However, as we will see, everything works fine as long as we work with Kan complexes!

So the upshot of this section will be that instead of replacing topological spaces by arbitrary simplicial sets as a habitat for homotopy theory, we should replace them with Kan complexes. In view of \cref{thm:AnimaeAreKanComplexes}, this fits perfectly with Grothendieck's \emph{homotopy hypothesis} that $\infty$-groupoids should essentially be topological spaces.

\subsection{Fibrations and lifting properties}\label{subsec:Fibrations}
We start with several definitions that generalise the horn filling properties from \cref{def:QuasiCategory}.
\begin{defi}\label{def:Lifting}
	We say that a map $f\colon X\rightarrow Y$ of simplicial sets \emph{has lifting against $i\colon A\rightarrow B$} if every lifting problem
	\begin{equation*}
		\begin{tikzcd}
			A\rar\dar["i"']& X\dar["f"]\\
			B\rar\urar[dashed] & Y
		\end{tikzcd}
	\end{equation*}
	has a solution.
\end{defi}
\begin{defi}\label{def:Fibration}
	Let $f\colon X\rightarrow Y$ be a map of simplicial sets.
	\begin{alphanumerate}
		\item We call $f$ a \emph{Kan fibration} if it has lifting agains all horn inclusions $\Lambda_i^n\rightarrow \Delta^n$ for $n\geqslant 1$ and $0\leqslant i\leqslant n$. We call $f$ a \emph{left}, \emph{right}, or \emph{inner fibration}, if it has lifting against all horn inclusions for $0\leqslant i<n$, all $0<i\leqslant n$, or $0<i<n$, respectively.\label{enum:KanFibration}
		\item We call $f$ a \emph{trivial fibration} if it has lifting against all boundary inclusions $\partial\Delta^n\rightarrow\Delta^n$ for all $n\geqslant 0$.\label{enum:TrivialFibration}
	\end{alphanumerate}
\end{defi}
\begin{exm}\label{exm:KanFibration}
	A simplicial set $X$ is a Kan complex if and only if $X\rightarrow *$ is a Kan fibration, and a quasi-category if and only if $X\rightarrow *$ is an inner fibration. Here and in the following we put $*\coloneqq\Delta^0$ for convenience. Furthermore, if $f\colon X\rightarrow Y$ is a Kan fibration and $Y$ is a Kan complex, then $X$ is a Kan complex too. Similarly, if $f$ is an inner fibration and $Y$ is a quasi-category, then $X$ is a quasi-category too.
\end{exm}
To analyse lifting properties, we need to introduce yet another technical notion.
\begin{defi}\label{def:Saturated}
	A class $\Sigma$ of morphisms of simplicial sets is called \emph{saturated} if the following conditions are satisfied:
	\begin{alphanumerate}
		\item $\Sigma$ is \emph{closed under pushouts}: If $(A\rightarrow B)\in\Sigma$ and $A\rightarrow C$ is an arbitrary map of simplicial sets, then $(C\rightarrow B\sqcup_AC)\in\Sigma$.
		\item $\Sigma$ is \emph{closed under retracts}: If we're given a commutative diagram
		\begin{equation*}
			\begin{tikzcd}
				A'\rar\dar["i'"']\drar[commutes]\ar[rr,bend left=42,"\id_{A'}"{name=A}]\arrow[from=1-2,to=A,commutes,pos=0.46] & A\dar["i"] \rar\drar[commutes] &A'\dar["i'"]\\
				B'\rar\ar[rr,bend right=42,"\id_{B'}"{swap,name=B}]\arrow[from=2-2,to=B,commutes,pos=0.46] & B\rar & B'
			\end{tikzcd}
		\end{equation*}
		such that $(i\colon A\rightarrow B)\in\Sigma$, then also $(i'\colon A'\rightarrow B')\in\Sigma$.
		\item $\Sigma$ is \emph{closed under coproducts}: If $(A_i\rightarrow B_i)\in\Sigma$, then also $\left(\coprod A_i\rightarrow\coprod B_i\right)\in\Sigma$.
		\item $\Sigma$ is \emph{closed under \embrace{countable} infinite compositions}: If $A_0\rightarrow A_1\rightarrow A_2\rightarrow \dotsb$ are all in $\Sigma$, then also $(A_0\rightarrow\colimit_{n\geqslant 0}A_n)\in\Sigma$.
	\end{alphanumerate}
	For an arbitrary class $\Sigma$ of morphisms in $\cat{sSet}$, the \emph{saturation of $\Sigma$}, $\operatorname{sat}(\Sigma)$, is the smallest saturated class containing $\Sigma$.
\end{defi}
\begin{lem}\label{lem:LiftingSaturated}
	A morphism $f\colon X\rightarrow Y$ of simplicial sets has lifting against all $(A\rightarrow B)\in\Sigma$ if and only $f$ has lifting against all $(A\rightarrow B)\in\operatorname{sat}(\Sigma)$.
\end{lem}
\begin{proof}[Proof sketch]
	It's straightforward to check that the class of morphisms that $f$ has lifting against is saturated as in \cref{def:Saturated}.
\end{proof}
\begin{defi}\label{def:Anodyne}
	\begin{alphanumerate}
		\item A morphism of simplicial sets is called \emph{anodyne} if it is contained in $\operatorname{sat}\left\{\Lambda_i^n\rightarrow\Delta^n\ \middle|\ n\geqslant 1,\,0\leqslant i\leqslant n\right\}$, the saturation of all horn inclusions. Similarly, a morphism is called \emph{left}, \emph{right}, or \emph{inner anodyne} if it is contained in the saturation of those horn inclusions where $0\leqslant i<n$, $0<i\leqslant n$, or $0<i<n$, respectively.
		\item A morphism of simplicial set is a \emph{cofibration} if it is contained in $\operatorname{sat}\left\{\partial\Delta^n\rightarrow\Delta^n\ \middle|\ n\geqslant 0\right\}$, the saturation of all boundary inclusions.
	\end{alphanumerate}
\end{defi}
\begin{exm}
	Using \cref{lem:LiftingSaturated}, we see that Kan fibrations have lifting against all anodyne morphisms and left/right/inner fibrations have lifting against all left/right/inner anodyne morphisms. Furthermore, trivial fibrations have lifting against all cofibrations.
\end{exm}	
\begin{lem}\label{lem:Cofibration}
	A map $i\colon A\rightarrow B$ is simplicial sets is a cofibration if and only if $i$ is injective in every degree.
\end{lem}
\begin{proof}[Proof sketch]
	It's straightforward to check that degree-wise injectivity is closed under pushouts, retracts, coproducts, and infinite compositions, whence all cofibrations are degree-wise injective. Conversely, a degree-wise injective map can be built from boundary inclusions by successively adding simplices. This successive procedures needs pushouts (to add new simplices), coproducts (to add arbitrarily many simplices at once), and infinite compositions.
\end{proof}
\begin{lem}\label{lem:AnodynePushout}
	If $A\rightarrow B$ is anodyne and $A'\rightarrow B'$ is a cofibration, then
	\begin{equation*}
		A\times B'\sqcup_{A\times A'}B\times A'\longrightarrow B\times B'
	\end{equation*}
	is anodyne again. Analogous assertions are true for left/right/inner anodyne maps.
\end{lem}
\begin{proof}[Proof sketch]
	Fix $A'\rightarrow B'$ and consider the class $\Sigma$ of all morphisms $A\rightarrow B$ for which $A\times B'\sqcup_{A\times A'}B\times A'\rightarrow B\times B'$ is anodyne. Then $\Sigma$ is easily checked to be saturated. Hence it suffices to consider the case where $A\rightarrow B$ is a horn inclusion $\Lambda_i^n\rightarrow \Delta^n$. By the same argument, we can reduce to the case where $A'\rightarrow B'$ is a boundary inclusion $\partial \Delta^m\rightarrow \Delta^m$. So it suffices to check that $\Lambda_i^n\times \Delta^m\sqcup_{\Lambda_i^n\times \partial\Delta^m}\Delta^n\times \partial\Delta^m\rightarrow \Delta^n\times \Delta^m$ is anodyne. This can be done by hand, explicitly writing said map as a sequence of horn inclusions. For a complete proof in all its gory details, see \cite[Lemma~1.3.31]{Land}.
\end{proof}
\begin{cor}\label{cor:FKanFibration}
	If $i\colon A\rightarrow B$ is a cofibration and $f\colon X\rightarrow Y$ is a Kan fibration, then
	\begin{equation*}
		\F(B,X)\longrightarrow\F(B,Y)\times_{\F(A,Y)}\F(A,X)
	\end{equation*}
	is a Kan fibration. If $i\colon A\rightarrow B$ is anodyne, then the map above is even a trivial fibration. Analogous conclusions are true for left/right/inner fibrations and left/right/inner anodyne cofibrations.
\end{cor}
\begin{proof}[Proof sketch]
	By playing around with the universal properties of pushouts and pullbacks as well as the adjunction from \cref{par:FInternalHom}, we find that the following lifting problems are equivalent:
	\begin{equation*}
		\begin{tikzcd}
			\Lambda_i^n\rar\dar & \F(B,X)\dar\\
			\Delta^n\rar\urar[dashed] & \F(B,Y)\times_{\F(A,Y)}\F(A,X)
		\end{tikzcd}\quad\text{and}\quad
		\begin{tikzcd}
			\Lambda_i^n\times B\sqcup_{\Lambda_i^n\times A}\Delta^n\times A\rar\dar & X\dar["f"]\\
			\Delta^n\times B\urar[dashed]\rar & Y
		\end{tikzcd}
	\end{equation*}
	Since $\Lambda_i^n\times B\sqcup_{\Lambda_i^n\times A}\Delta^n\times  A\rightarrow \Delta^n\times B$ is anodyne by \cref{lem:AnodynePushout} and $f\colon X\rightarrow Y$ has lifting against all anodyne maps by \cref{lem:LiftingSaturated}, the lifting problem on the right can be solved, proving that $\F(B,X)\rightarrow \F(B,Y)\times_{\F(A,Y)}\F(A,X)$ indeed has lifting against all horn inclusions. If $A\rightarrow B$ is anodyne, then the same argument shows that we even get lifting against all boundary inclusions. The other assertions are entirely analogous.
\end{proof}
\begin{cor}\label{cor:FIsKanComplex}
	Let $X$ be a Kan complex, $\Cc$ a quasi-category, and $B$ an arbitrary simplicial set. Then $\F(B,X)$ is a Kan complex and $\F(B,\Cc)$ is a quasi-category. In particular, $\Ar(\Cc)$ is a quasi-category again, and if $x\in \Cc$ is an object, then the slice $\Cc_{x/}$ from \cref{par:HomInQuasiCategories} is a quasi-category too.
\end{cor}
\begin{proof}
	For the first two assertions, apply \cref{cor:FKanFibration} to the cofibration $\emptyset\rightarrow B$ and the Kan fibration $X\rightarrow *$ or the inner fibration $\Cc\rightarrow *$, respectively. The assertion about $\Ar(\Cc)$ is just the case $B=\Delta^1$. Finally, for $\Cc_{x/}$ we use that $(s,t)\colon \Ar(\Cc)\rightarrow \Cc\times\Cc$ is an inner fibration by \cref{cor:FKanFibration} applied to the cofibration $\partial\Delta^1\rightarrow\Delta^1$. Hence its pullback $\Cc_{x/}\rightarrow \{x\}\times \Cc$ must be an inner fibration too and so $\Cc_{x/}$ is a quasi-category by \cref{exm:KanFibration}.
\end{proof}
We conclude this subsection with an immensely useful lemma.
\begin{lem}[\enquote{Quillen's small object argument}]\label{lem:SmallObjectArgument}
	Every morphism of simplicial sets $f\colon X\rightarrow Y$ can be factored as
	\begin{equation*}
		f\colon X\overset{i}{\longrightarrow}\ov X\overset{\ov f}{\longrightarrow}Y\,,
	\end{equation*}
	where $i$ is anodyne and $\ov f$ is a Kan fibration. Similarly, every morphism of simplicial sets can be factored into a left/right/inner anodyne map followed by a left/right/inner fibration, and also into a cofibration followed by a trivial fibration.
\end{lem}
\begin{proof}
	We only prove the first assertion; the others are completely analogous. Let
	\begin{equation*}
		\Sigma(f)\coloneqq \ScaledBraces{\!\left.\sigma=\begin{tikzcd}[baseline=(A.base),ampersand replacement=\&]
			\Lambda_i^n\rar\dar\drar[commutes]\drar[phantom,""{name=A}] \& X\dar["f"]\\
			\Delta^n\rar \& Y 
		\end{tikzcd}\ \middle|\ n\geqslant 1 ,\,0\leqslant i\leqslant n\right.\!}
	\end{equation*}
	and consider the simplicial set $S(f)$ defined as the pushout
	\begin{equation*}
		\begin{tikzcd}
			\coprod_{\sigma\in\Sigma(f)}\Lambda_i^n\dar\rar\drar[pushout] & X\dar\\
			\coprod_{\sigma\in\Sigma(f)}\Delta^n\rar & S(f)
		\end{tikzcd}
	\end{equation*}
	Then $X\rightarrow S(f)$ is anodyne, because it is a pushout of a coproduct of horn inclusions, and $f$ factors as $f\colon X\rightarrow S(f)\rightarrow Y$. Let $X_0\coloneqq X$ and $f_0\coloneqq f$. Inductively putting $X_{n+1}\coloneqq S(f_n)$, we get factorisations
	\begin{equation*}
		f\colon X\longrightarrow X_n\overset{f_n}{\longrightarrow}Y
	\end{equation*}
	for all $n\geqslant 0$, where $X\rightarrow X_n$ is anodyne. Now let $\ov X\coloneqq \colimit_{n\geqslant 0}X_n$ and let $\ov f\colon \ov X\rightarrow Y$ be the induced map. Since anodyne maps are closed under infinite compositions, $X\rightarrow \ov X$ is anodyne. So it suffices to show that $\ov f$ is a Kan fibration. Note that $\Lambda_i^n$ is built from finitely many simplices, which are in turn glued along finitely many subsimplices. Hence, for every map $\sigma\colon \Lambda_i^n\rightarrow\ov X$, each of these finitely many simplices must occur at some finite stage of the colimit $\ov X\coloneqq \colimit_{n\geqslant 0}X_n$, and each gluing condition must be satisfied at some finite stage. Consequently, every $\sigma\colon \Lambda_i^n\rightarrow\ov X$ must factor through $X_m\rightarrow\ov X$ for $m\gge 0$. Consequently, by construction of $X_{m+1}$, every lifting problem involving $\sigma$ can be solved as
	\begin{equation*}
		\begin{tikzcd}
			\Lambda_i^n\rar\dar& X_m\rar & X_{m+1}\rar &\ov X\dar["\ov f"]\\
			\Delta^n\ar[rrr]\ar[urr,dashed] & & & Y
		\end{tikzcd}
	\end{equation*}
	which proves that $\ov f\colon \ov X\rightarrow Y$ is a Kan fibration, as desired.
\end{proof}

\subsection{Homotopy groups}
The goal of this subsection is to introduce homotopy groups of Kan complexes (\cref{con:HomotopyGroups}) and to prove an analogue of Whitehead's theorem (\cref{thm:Whitehead}). We start noting that the naive definition of homotopies from the beginning of \cref{sec:SimplicialHomotopyTheory} works fine if $X$ is Kan.
\begin{defi}\label{def:Homotopy}
	Let $X$ be a Kan complex.
	\begin{alphanumerate}
		\item We say that $x,y\in X$ \emph{belong to the same connected component} and write $x\simeq y$ if there is a $1$-simplex $\Delta^1\rightarrow X$ from $x$ to $y$. By \cref{thm:AnimaeAreKanComplexes}, this is an equivalence relation and the notation is compatible with \cref{par:Equivalence}. We let $\pi_0(X)\coloneqq X_0/\!\simeq$ denote the set of \emph{connected components of $X$}.\label{enum:Pi0}
		\item Let $A$ be an arbitrary simplicial set. We say that $f,g\colon A\rightarrow X$ are \emph{homotopic} and write $f\simeq g$ if and only if they belong to the same connected component of $\F(A,X)$, which is a Kan complex by \cref{cor:FIsKanComplex}. A \emph{homotopy} $\eta\colon f\Rightarrow g$ is a $1$-simplex $\Delta^1\rightarrow \F(A,X)$ from $f$ to $g$.\label{enum:Homotopy}
	\end{alphanumerate}
\end{defi}
\begin{con}\label{con:FOfPairs}
	Let $A\subseteq B$ be an inclusion of arbitrary simplicial sets and $X\subseteq Y$ be an inclusion of Kan complexes. Consider the following pullback (taken in $\cat{sSet}$):
	\begin{equation*}
		\begin{tikzcd}
			\F\bigl((B,A),(Y,X)\bigr)\dar\rar\drar[pullback] & \F(B,Y)\dar\\
			\F(A,X)\rar & \F(A,Y)
		\end{tikzcd}
	\end{equation*}
	Note that $\F(B,Y)\rightarrow\F(A,Y)$ is a Kan fibration by \cref{cor:FKanFibration} and $\F(A,X)$ is a Kan complex by \cref{cor:FIsKanComplex}. Therefore $\F((B,A),(Y,X))$ is a Kan complex too.
\end{con}
\begin{con}\label{con:HomotopyGroups}
	Let $X$ be a Kan complex, $x\in X$ a point, and $n\geqslant 1$. Furthermore, recall from \cref{con:SimplicialNerve} that we use $\square^n$ and $\partial\square^n$ to denote the $n$-cube $(\Delta^1)^n$ and its boundary $\bigcup_{i=1}^n\square^{i-1}\times(\{0\}\sqcup\{1\})\times\square^{n-i}$. We define the \emph{$n$\textsuperscript{th} homotopy group of $X$ with basepoint $x$} as
	\begin{equation*}
		\pi_n(X,x)\coloneqq\pi_0\F\bigl((\square^n,\partial\square^n),(X,x)\bigr)\,.
	\end{equation*}
	As the name suggests, $\pi_n(X,x)$ should be a group, so let's construct a group operation! Given elements $[\alpha],[\beta]\in\pi_n(X,x)$, represented by maps of pairs $\alpha,\beta\colon (\square^n,\partial\square^n)\rightarrow (X,x)$, we can define a map $(\alpha,\beta)\colon \Lambda_1^2\times\square^{n-1}\rightarrow X$ by $(\alpha,\beta)|_{\Delta^{\{0,1\}}\times\square^{n-1}}\coloneqq \alpha$ and $(\alpha,\beta)|_{\Delta^{\{1,2\}}\times\square^{n-1}}\coloneqq \beta$; this is possible since $\alpha$ and $\beta$ agree on the \enquote{overlap} $\{1\}\times\square^{n-1}$, as they're both equal to $\const x$ there. Now consider the extension problem
	\begin{equation*}
		\begin{tikzcd}[column sep=5.2em]
			\Lambda_1^2\times\square^{n-1}\sqcup_{\Lambda_1^2\times\partial\square^{n-1}}\Delta^2\times\partial\square^{n-1}\dar\rar["{(\alpha,\,\beta)\,\cup\, \const x}"] & X\\
			\Delta^2\times\square^{n-1}\urar[dashed,"\vartheta"',end anchor=202]
		\end{tikzcd}
	\end{equation*}
	Since the vertical arrow is anodyne by \cref{lem:AnodynePushout}, this extension problem has a solution $\vartheta$. By construction, $\vartheta|_{\partial(\Delta^{\{0,2\}}\times\square^{n-1})}=\const x$. We then define $[\alpha]\mathbin{\boldsymbol{\cdot}}[\beta]\coloneqq [\vartheta|_{\Delta^{\{0,2\}}\times\square^{n-1}}]$.
\end{con}
\begin{rem}\label{rem:HomotopyGroupsTopology}
	Let us explain how \cref{con:HomotopyGroups} is related to the usual construction of the group structure on $\pi_n(X,x)$ from topology, as this nicely illustrates the \enquote{rigidity} of simplicial sets and how said rigidity is overcome by the Kan condition. First, observe that $\Lambda_1^2\times\square^{n-1}\cong \Delta^{\{0,1\}}\times\square^{n-1}\sqcup_{\{1\}\times \square^{n-1}}\Delta^{\{1,2\}}\times\square^{n-1}$ is simply given by \enquote{stacking one cube on top of another}. In topological spaces, we can identify two stacked cubes with another cube, which immediately yields the group operation. In simplicial sets, this identification no longer works; in fact, there isn't even a suitable map $\Delta^1\times\square^{n-1}\rightarrow \Lambda_1^2\times \square^{n-1}$. But instead we can use the zigzag $\Delta^{\{0,2\}}\times\square^{n-1}\rightarrow \Delta^2\times\square^{n-1}\leftarrow \Lambda_1^2\times\square^{n-1}$, thanks to the Kan condition.
\end{rem}
\begin{lem}\label{lem:HomotopyGroups}
	Let $X$ be a Kan complex, let $x\in X$ be a point, and let $n\geqslant 1$.
	\begin{alphanumerate}
		\item The operation $\cdot$ from \cref{con:HomotopyGroups} is well-defined \embrace{that is, independent of the choices of $\alpha$, $\beta$, and $\vartheta$} and defines a group structure on $\pi_n(X,x)$.\label{enum:HomotopyGroupsWellDefined}
		\item Let $n\geqslant 2$. By \enquote{permuting the coordinates of the cube $\square^n$} we obtain operations $\boldsymbol{\cdot}_1,\boldsymbol{\cdot}_2,\dotsc,\boldsymbol{\cdot}_n$, where $\boldsymbol{\cdot}_1=\boldsymbol{\cdot}$. Then these operations all coincide and are commutative.\label{enum:EckmannHilton}
	\end{alphanumerate}
\end{lem}
\begin{proof}[Proof sketch]
	All assertions in \cref{enum:HomotopyGroupsWellDefined} can be proved by solving extension problems of the form
	\begin{equation}\label{eq:HomotopyGroups}\tag{$*$}
		\begin{tikzcd}
			A\times\square^{n-1}\sqcup_{A\times\partial\square^{n-1}}B\times\partial\square^{n-1}\dar\rar & X\\
			B\times\square^{n-1}\urar[dashed,end anchor=202]
		\end{tikzcd}
	\end{equation}
	where $A\rightarrow B$ is anodyne (so that a solution always exists by \cref{lem:AnodynePushout}).\footnote{Also note that the diagram from \cref{con:HomotopyGroups} is of this form too, with $(A\rightarrow B)=(\Lambda_1^2\rightarrow\Delta^2)$}
	
	Let's start with independence of the choice of $\vartheta$. So let $\vartheta'$ be another choice. Using the same idea as in \cref{par:Composition}, we can pose an extension problem \cref{eq:HomotopyGroups}, with $(A\rightarrow B)=(\Lambda_1^3\rightarrow \Delta^3)$. Restricting any solution to $\Delta^{\{0,2,3\}}\times \square^{n-1}$ yields a homotopy of pairs $\vartheta|_{\Delta^{\{0,2\}}\times\square^{n-1}}\simeq\vartheta'|_{\Delta^{\{0,2\}}\times\square^{n-1}}$. To show that the choices of $\alpha$ and $\beta$ don't matter, suppose we're given homotopies of pairs $\alpha\simeq\alpha'$ and $\beta\simeq\beta'$ and let $[\alpha']\mathbin{\boldsymbol{\cdot}}[\beta']=[\vartheta'|_{\Delta^{\{0,2\}}\times\square^{n-1}}]$. Using the given homotopies, we can write down an extension problem \cref{eq:HomotopyGroups}, with $(A\rightarrow B)=(\Delta^1\times\Lambda_1^2\rightarrow \Delta^1\times\Delta^2)$. Restricting to $\Delta^1\times\Delta^{\{0,2\}}\times\square^{n-1}$ yields a homotopy  of pairs $\vartheta|_{\Delta^{\{0,2\}}\times\square^{n-1}}\simeq\vartheta'|_{\Delta^{\{0,2\}}\times\square^{n-1}}$. This shows well-definedness. To show associativity, choose $(A\rightarrow B)=(\Delta^{\{0,1\}}\cup\Delta^{\{1,2\}}\cup\Delta^{\{2,3\}}\rightarrow\Delta^3)$. A neutral element is $\const x\colon (\square^n,\partial\square^n)\rightarrow (X,x)$; to show $[\alpha]\mathbin{\boldsymbol{\cdot}}[\const x]=[\alpha]=[\const x]\mathbin{\boldsymbol{\cdot}}[\alpha]$ for all $\alpha$, simply solve the corresponding lifting problem via degenerate simplices. Finally, to construct inverses, we take inspiration from \cref{par:Equivalence} and write down extension problems \cref{eq:HomotopyGroups} with $(A\rightarrow B)=(\Lambda_0^2\rightarrow\Delta^2)$ and $(A\rightarrow B)=(\Lambda_2^2\rightarrow\Delta^2)$ to construct a left and a right inverse. This finishes the proof sketch of \cref{enum:HomotopyGroupsWellDefined}.
	
	For \cref{enum:EckmannHilton}, we use the \emph{Eckmann--Hilton trick}: We can show simultaneously that $\boldsymbol{\cdot}_1=\boldsymbol{\cdot}_2$ and that both operations are commutative by verifying the single identity
	\begin{equation*}
		\bigl([\alpha]\mathbin{\boldsymbol{\cdot}_1}[\beta]\bigr)\mathbin{\boldsymbol{\cdot}_2}\bigl([\alpha']\mathbin{\boldsymbol{\cdot}_1}[\beta']\bigr)=\bigl([\alpha]\mathbin{\boldsymbol{\cdot}_2}[\alpha']\bigr)\mathbin{\boldsymbol{\cdot}_1}\bigl([\beta]\mathbin{\boldsymbol{\cdot}_2}[\beta']\bigr)
	\end{equation*}
	for all $\alpha$, $\alpha'$, $\beta$, and $\beta'$!\footnote{If you haven't seen this trick before, it will probably blow your mind.} To show the Eckmann--Hilton identity, consider the extension problem
	\begin{equation*}
		\begin{tikzcd}[column sep=8.5em]
			\Lambda_1^2\times\Lambda_1^2\times\square^{n-2}\sqcup_{\Lambda_1^2\times\Lambda_1^2\times\partial\square^{n-2}}\Delta^2\times\Delta^2\times\partial\square^{n-2}\dar\rar["{((\alpha,\,\beta),\,(\alpha',\,\beta'))}\,\cup\,{\const x}"] & X\\
			\Delta^2\times\Delta^2\times\square^{n-1}\urar[dashed,"\rho"',end anchor=202]
		\end{tikzcd}
	\end{equation*}
	which has a solution by \cref{lem:AnodynePushout}. Then observe that for any solution $\rho$, both sides of the Eckmann--Hilton identity are given by $[\rho|_{\Delta^{\{0,2\}}\times \Delta^{\{0,2\}}\times\square^{n-2}}]$.
\end{proof}
%The rest of this subsection will be devoted to prove an analogue of Whitehead's theorem for Kan complexes.
\begin{thm}[\enquote{Whitehead's theorem for Kan complexes}]\label{thm:Whitehead}
	Let $f\colon X\rightarrow Y$ be a morphism of Kan complexes. Then $f$ is a homotopy equivalence if and only if it induces a bijection $\pi_0(X)\cong \pi_0(Y)$ and isomorphisms $\pi_n(X,x)\cong \pi_n(Y,f(x))$ for all $x\in X$ and all $n\geqslant 1$.
\end{thm}
The proof of \cref{thm:Whitehead} will occupy the rest of this subsection. The first step is an analogue of the long exact sequence of a Serre fibration.
\begin{lem}[\enquote{Long exact sequence of a fibration}]\label{lem:FibrationSequence}\label{lem:LongExactFibrationSequence}
	Let $f\colon X\rightarrow Y$ be a Kan fibration between Kan complexes. Let $x\in X$, let $y\coloneqq f(x)$ be its image, and let $F\coloneqq f^{-1}\{y\}=\{y\}\times_YX$ be the fibre over $y$. Then there exists a long exact sequence of groups/pointed sets
	\begin{multline*}
		\dotsb\longrightarrow\pi_n(F,x)\longrightarrow \pi_n(X,x)\longrightarrow\pi_n(Y,y)\overset{\partial}{\longrightarrow}\pi_{n-1}(F,x)\longrightarrow\dotsb\\
		\dotsb\longrightarrow\pi_1(X,x)\longrightarrow\pi_1(Y,y)\overset{\partial}{\longrightarrow}\pi_0(F)\longrightarrow\pi_0(X)\longrightarrow\pi_0(Y)\,.
	\end{multline*}
	In low degrees, exactness means the following:
	\begin{alphanumerate}
		\item There is an action $\pi_1(Y,y)\times\pi_0(F)\rightarrow\pi_0(F)$ in such a way that the boundary map $\partial\colon \pi_1(Y,y)\rightarrow \pi_0(F)$ is given by acting on $[x]\in \pi_0(F)$, the stabiliser of $[x]$ is precisely the image of $\pi_1(X,x)\rightarrow\pi_1(Y,y)$, and two elements of $\pi_0(F)$ map to the same element in $\pi_0(X)$ if and only if they lie in the same orbit of the $\pi_1(Y,y)$-action.\label{enum:ActionOfPi1}
		\item An element in $\pi_0(X)$ maps to the class $[y]\in\pi_0(Y)$ if and only if it lies in the image of $\pi_0(F)\rightarrow \pi_0(X)$.
	\end{alphanumerate}
\end{lem}
\begin{proof}[Proof sketch]
	You can take any proof of the long exact sequence of a Serre fibration, like \cite[Theorem~\href{https://pi.math.cornell.edu/~hatcher/AT/AT.pdf\#page=385}{4.41}]{Hatcher} and adapt the arguments to the simplicial setting. To illustrate how this can be done, we'll explain how to construct the boundary map $\partial$. So let $[\alpha]\in\pi_{n+1}(Y,y)$, where $\alpha\colon(\square^{n+1},\partial\square^{n+1})\rightarrow(Y,y)$ is a map of pairs as usual. Consider the lifting problem
	\begin{equation*}
		\begin{tikzcd}
			\{0\}\times\square^n\sqcup_{\{0\}\times\square^n}\Delta^1\times\partial\square^n\rar["\const x"]\dar & X\dar["f"]\\
			\Delta^1\times\square^n\rar["\alpha"]\urar[dashed,"\vartheta"'] & Y
		\end{tikzcd}
	\end{equation*}
	which has a solution $\vartheta$ by \cref{lem:AnodynePushout}. Then $\vartheta|_{\{1\}\times\square^n}\colon \{1\}\times\square^n\rightarrow X$ factors through $F\rightarrow X$ and it maps $\{1\}\times \partial\square^n$ to $x$. Thus we can define $\partial[\alpha]\coloneqq [\vartheta|_{\{1\}\times\square^n}]\in\pi_n(F,x)$.
\end{proof}
\begin{rem}\label{rem:ExactnessInLowDegrees}
	We will often use \cref{lem:FibrationSequence} in conjunction with the five lemma to deduce that a map of Kan complexes induces a bijection on $\pi_0$ and isomorphisms on $\pi_n$ for all basepoints and all $n\geqslant 1$ (and is thus a homotopy equivalence by \cref{thm:Whitehead}). But the five lemma only applies for exact sequences of groups, not pointed sets. However, these arguments can be saved using the group action from \cref{lem:FibrationSequence}\cref{enum:ActionOfPi1}. We will usually skip the verification in low degrees and just cite the five lemma.
\end{rem}
We also need an alternative description of homotopy groups. This is how Goerss and Jardine define them in \cite[\S \href{http://dodo.pdmi.ras.ru/~topology/books/goerss-jardine.pdf\#page=37}{I.7}]{GoerssJardine}; we chose the cubical approach since it makes the group multiplication easier to visualise.
\begin{lem}\label{lem:HomotopyGroupsSimplex}
	Let $X$ be a Kan complex, let $x\in X$, and let $n\geqslant 0$. Then there is a bijection
	\begin{equation*}
		\pi_n(X,x)\cong \pi_0\F\bigl((\Delta^n,\partial\Delta^n),(X,x)\bigr)\,.
	\end{equation*}
\end{lem}
\begin{proof}[Proof sketch]
	By cutting out a single $n$-simplex from $\square^n$, we can obtain a sub-simplicial set $C^n\subseteq\square^n$ such that $\partial\square^n\subseteq C^n$ is anodyne (in fact, it can be obtained by successively filling horns) and $\square^n/C^n\cong \Delta^n/\partial\Delta^n$. For example, in the case $n=2$, we can choose $C^n$ as in the following picture:
	\begin{equation*}
		\begin{tikzpicture}[commutative diagrams/every diagram,baseline=(mid.base), decoration={markings,mark=at position 0.5 with {\arrow{to}}}]
			\path node[outer sep=0.25ex] (00) at (0,0) {$\bullet$} ++(3.8em,0) node (10) {$\bullet$} ++ (0,3.8em) node (11) {$\bullet$} ++(-3.8em,0) node (01) {$\bullet$};
			\path[commutative diagrams/.cd, every arrow, every label]
			(00) edge[-,postaction={decorate}] node[below=1ex] {$\displaystyle\partial\square^2$} (10)
			(10) edge[-,postaction={decorate}] (11)
			(00) edge[-,postaction={decorate}] (01)
			(01) edge[-,postaction={decorate}] (11);
		\end{tikzpicture}\subseteq
		\begin{tikzpicture}[commutative diagrams/every diagram,baseline=(mid.base), decoration={markings,mark=at position 0.5 with {\arrow{to}}}]
			\path node[outer sep=0.25ex] (00) at (0,0) {$\bullet$} ++(3.8em,0) node (10) {$\bullet$} ++ (0,3.8em) node (11) {$\bullet$} ++(-3.8em,0) node (01) {$\bullet$};
			\path[commutative diagrams/.cd, every arrow, every label]
			(00) edge[-,postaction={decorate}] node[below=1ex] {$\displaystyle C^2$} (10)
			(10) edge[-,postaction={decorate}] (11)
			(00) edge[-,postaction={decorate}] (01)
			(01) edge[-,postaction={decorate}] (11)
			(00) edge[-,postaction={decorate}] (11);
			\path
			(01) to node[pos=0.25] {$\scriptscriptstyle/\!/\!/$} (10);
		\end{tikzpicture}\subseteq
		\begin{tikzpicture}[commutative diagrams/every diagram,baseline=(mid.base), decoration={markings,mark=at position 0.5 with {\arrow{to}}}]
			\path node[outer sep=0.25ex] (00) at (0,0) {$\bullet$} ++(3.8em,0) node (10) {$\bullet$} ++ (0,3.8em) node (11) {$\bullet$} ++(-3.8em,0) node (01) {$\bullet$};
			\path[commutative diagrams/.cd, every arrow, every label]
			(00) edge[-,postaction={decorate}] node[below=1ex] {$\displaystyle \square^2$} (10)
			(10) edge[-,postaction={decorate}] (11)
			(00) edge[-,postaction={decorate}] (01)
			(01) edge[-,postaction={decorate}] (11)
			(00) edge[-,postaction={decorate}] (11);
			\path
			(01) to node[pos=0.25] {$\scriptscriptstyle/\!/\!/$} node[pos=0.75] {$\scriptscriptstyle/\!/\!/$} (10);
		\end{tikzpicture}
	\end{equation*}
	In general, the $n$-simplex $\Delta^n\rightarrow \square^n$ that we cut out to obtain $C^n$ sends the vertex $\{i\}$ to the vertex $\{1\}^i\times\{0\}^{n-i}$.
	
	Now observe that since $x$ is just a point, we have $\F((B,A),(X,x))\cong \F((B/A,*),(X,x))$ for every inclusion $A\subseteq B$ of simplicial sets. Since $\square^n/C^n\cong \Delta^n/\partial\Delta^n$, we only need to prove $\pi_0\F((\square^n,\partial\square^n),(X,x))\cong\pi_0\F((\square^n,C^n),(X,x))$. This follows from a more general claim:
	\begin{alphanumerate}\itshape
		\item[\boxtimes] Let $A'\subseteq A$ be anodyne and let $A\subseteq B$ be any inclusion of simplicial sets. Then we have a bijection $\pi_0\F((B,A),(X,x))\cong \pi_0\F((B,A'),(X,x))$.\label{claim:Annoying}
	\end{alphanumerate}
	To prove \cref{claim:Annoying}, put $F\coloneqq \F((B,A),(X,x))$ and $F'\coloneqq \F((B,A'),(X,x))$ for short. Consider the pullback $P\coloneqq \F(A',\{x\})\times_{\F(A',X)}\F(A,X)$. Then $F'\rightarrow P$ is a Kan fibration, since it is a pullback of $\F(B,X)\rightarrow\F(A,X)$, which is Kan by \cref{cor:FKanFibration}. Manipulating pullbacks, we find $F\cong \F(A,\{x\})\times_PF'$. Now $\F(A,\{x\})\cong *$ is just a point, so $F$ is a fibre of the Kan fibration $F'\rightarrow P$. Furthermore, $P\rightarrow \F(A',\{x\})\cong *$ is a trivial fibration, since it is a pullback of $\F(A,X)\rightarrow\F(A',X)$, which is a trivial fibration by \cref{cor:FKanFibration}. By \cref{lem:TrivialFibrationHomotopyEquivalence} below, this means that $P\rightarrow *$ is a homotopy equivalence and so all homotopy groups of $P$ vanish. Using the long exact sequence from \cref{lem:LongExactFibrationSequence} (for every basepoint in $F'$; a single basepoint won't suffice), we can conclude $\pi_0(F)\cong \pi_0(F')$, as claimed. Note that this works even though we only have an exact sequence of pointed sets on $\pi_0$. This finishes the proof. Another proof of (a more general version of) \cref{claim:Annoying} is in \cite[Lemma~V.3.13]{HigherCatsI}.
\end{proof}
\begin{lem}\label{lem:TrivialFibrationHomotopyEquivalence}
	If $f\colon X\rightarrow Y$ is a trivial fibration between Kan complexes\footnote{The only reason why we restrict ourselves to Kan complexes (or quasi-categories) is that we haven't defined what a homotopy equivalence of arbitrary simplicial sets would be. The lifting problems in the proof can be solved for arbitrary trivial fibrations $f\colon X\rightarrow Y$, with no assumptions on $X$ or $Y$.}, then $f$ is a homotopy equivalence. Similarly, if $F\colon \Cc\rightarrow\Dd$ is a trivial fibration between quasi-categories, then $F$ is an equivalence as in \cref{exm:SimplicialNerve}.
\end{lem}
\begin{proof}%[Proof of \cref{lem:TrivialFibrationHomotopyEquivalence}]
	Since trivial fibrations have lifting against all cofibrations, we can use the lifting problems
	\begin{equation*}
		\begin{tikzcd}
			\emptyset\rar\dar & X\dar["f"]\\
			Y\eqar[r]\urar[dashed,"g"'] & Y
		\end{tikzcd}\quad\text{and}\quad
		\begin{tikzcd}
			\{0\}\times X\sqcup \{1\}\times X\ar[rr,"{(g\circ f,\,\id_X)}"]\dar & & X\dar["f"]\\
			\Delta^1\times X\rar\ar[urr,dashed,"\eta"',end anchor=202] & X\rar["f"] &Y
		\end{tikzcd}
	\end{equation*}
	to first construct a map $g\colon Y\rightarrow X$ such that $f\circ g=\id_Y$ and then to construct a homotopy $\eta\colon g\circ f\Rightarrow \id_X$. Similarly, if $F\colon \Cc\rightarrow \Dd$ is a trivial fibration between quasi-categories, we get a functor $G\colon \Dd\rightarrow\Cc$ such that $F\circ G=\id_\Dd$ and a natural transformation $\eta\colon G\circ F\Rightarrow \id_\Cc$. To show that $\eta$ is an equivalence in $\F(\Cc,\Cc)$ (and thus prove that $F$ and $G$ are mutually inverse equivalences of quasi-categories), we lift furthermore against $\Delta^1\times\Cc\rightarrow\N(J)\times \Cc$, where $J\coloneqq \left\{\InlineJ\right\}$ is the \enquote{free-living isomorphism}, the category with two objects and a pair of mutually inverse isomorphisms between them. 
\end{proof}
The crucial step in the proof of \cref{thm:Whitehead} is to show a \enquote{compression lemma}, as in the proof of Whitehead's theorem in topology (compare to \cite[Lemma~\href{https://pi.math.cornell.edu/~hatcher/AT/AT.pdf\#page=356}{4.6}]{Hatcher}). 
\begin{lem}[\enquote{Compression lemma}]\label{lem:CompressionLemma}
	Let $X$ be a connected\footnote{That is, $\pi_0(X)=*$.} Kan complex such that $\pi_n(X,x)\cong0$ for all $x\in X$ and all $n\geqslant 1$. Let $A\subseteq B$ be an inclusion of simplicial sets, $f\colon B\rightarrow X$ a map and $\eta\colon \Delta^1\times A\rightarrow X$ a homotopy from $f|_A$ to $\const x$. Then $\eta$ can be extended to a homotopy $\ov\eta\colon \Delta^1\times B\rightarrow X$ from $f$ to $\const x$.
\end{lem}
\begin{proof}
	We can construct $\ov\eta$ simplex by simplex, so it suffices to treat the case $A=\partial\Delta^n$ and $B=\Delta^n$ for some $n\geqslant 0$. Consider the extension problem
	\begin{equation*}
		\begin{tikzcd}
			\{0\}\times\Delta^n\sqcup_{\{0\}\times\partial\Delta^n}\Delta^1\times\partial\Delta^n\rar["{(f,\,\eta)}"]\dar & X\\
			\Delta^1\times\Delta^n\urar[dashed,"\vartheta"'] & 
		\end{tikzcd}
	\end{equation*}
	which has a solution $\vartheta$ by \cref{lem:AnodynePushout}. Then $\vartheta|_{\{1\}\times\partial\Delta^n}=\const x$, hence $\vartheta|_{\{1\}\times\Delta^n}$ defines an element in $\pi_0\F((\Delta^n,\partial\Delta^n),(X,x))\cong \pi_n(X,x)\cong0$ using \cref{lem:HomotopyGroupsSimplex} and our assumption on $X$. Hence there is a homotopy $\vartheta'\colon \Delta^1\times\Delta^n\rightarrow X$ such that $\vartheta'|_{\Delta^1\times\partial\Delta^n}=\const x$ as well as $\vartheta'|_{\{0\}\times\Delta^n}=\vartheta|_{\{1\}\times\Delta^n}$ and $\vartheta'|_{\{1\}\times\Delta^n}=\const x$ (in other words, $\vartheta'$ is a homotopy $\vartheta|_{\{1\}\times\Delta^n}\Rightarrow \const x$ relative to the boundary $\partial \Delta^n$). To construct $\ov\eta$, we can now simply compose the homotopies $\vartheta$ and $\vartheta'$ (which we do similarly to \cref{con:HomotopyGroups} and \cref{rem:HomotopyGroupsTopology}, by solving an extension problem along the anodyne map $\Lambda_1^2\times\Delta^n\rightarrow\Delta^2\times\Delta^n$ and then restricting to $\Delta^{\{0,2\}}\times \Delta^n$).
\end{proof}
\begin{lem}\label{lem:ContractibleKanComplex}
	If $X$ is a Kan complex as in \cref{lem:CompressionLemma}, then $X\rightarrow *$ is a trivial fibration.
\end{lem}
\begin{proof}
	We have to show that every extension problem of the following form is solvable:
	\begin{equation*}
		\begin{tikzcd}
			\partial\Delta^n\rar["\sigma"]\dar& X\\
			\Delta^n\urar[dashed] &
		\end{tikzcd}
	\end{equation*}
	Using \cref{lem:CompressionLemma} (applied to $A=\emptyset$ and $B=\partial\Delta^n$), there is a homotopy $\eta\colon \Delta^1\times\partial\Delta^n\rightarrow X$ from $\sigma$ to $\const x$. Now consider the extension problem
	\begin{equation*}
		\begin{tikzcd}[column sep=4em]
			\Delta^1\times\partial\Delta^n\sqcup_{\{1\}\times\partial\Delta^n}\{1\}\times\Delta^n\dar\rar["{(\eta,\,\const x)}"] & X\\
			\Delta^1\times\Delta^n\urar[dashed,"\vartheta"',end anchor=202] &
		\end{tikzcd}
	\end{equation*}
	which has a solution $\vartheta$ by \cref{lem:AnodynePushout} as usual. Then $\vartheta|_{\{0\}\times\Delta^n}$ provides a solution of the original extension problem.
\end{proof}
\begin{lem}\label{lem:TrivialFibration}
	Let $f\colon X\rightarrow Y$ be a Kan fibration between Kan complexes and assume $f$ satisfies the condition from \cref{thm:Whitehead}. Then $f$ is a trivial fibration.
\end{lem}
\begin{proof}
	We have to show that every extension problem of the following form is solvable:
	\begin{equation*}
		\begin{tikzcd}
			\partial\Delta^n\rar["\ov\sigma"]\dar& X\dar["f"]\\
			\Delta^n\urar[dashed]\rar["\sigma"] & Y
		\end{tikzcd}
	\end{equation*}
	Let $\eta\colon\Delta^1\times\Delta^n\rightarrow\Delta^n$ be a homotopy from $\id_{\Delta^n}$ to the constant map $\const n$ (such a homotopy can easily be constructed by hand). Then $\sigma\circ \eta\colon\Delta^1\times\Delta^n\rightarrow Y$ is a homotopy from $\sigma$ to $\const y$, where $y=\sigma(n)$. Now let $F\coloneqq f^{-1}\{y\}=\{y\}\times_YX$ be the fibre over $y$ and consider the lifting problem
	\begin{equation*}
		\begin{tikzcd}[column sep=huge]
			\{0\}\times\partial\Delta^n\rar["\ov\sigma"]\dar & X\dar["f"]\\
			\Delta^1\times\partial\Delta^n\urar[dashed,"\vartheta"']\rar["\sigma\circ\eta|_{\Delta^1\times\partial\Delta^n}"] & Y
		\end{tikzcd}
	\end{equation*}
	which can be solved by \cref{lem:AnodynePushout}. Then $\vartheta|_{\{1\}\times\partial\Delta^n}\colon \{1\}\times\partial\Delta^n\rightarrow X$ factors through $F\rightarrow X$. Using the long exact sequence from \cref{lem:FibrationSequence} and the assumption on $f$, we see $\pi_n(F,x)\cong0$ for all $x\in F$ and all $n\geqslant 0$. Hence $F\rightarrow *$ is a trivial fibration by \cref{lem:ContractibleKanComplex} and so $\vartheta|_{\{1\}\times\partial\Delta^n}\colon \{1\}\times\partial\Delta^n\rightarrow F$ can be extended to a map $\ov\vartheta\colon \{1\}\times\Delta^n\rightarrow F$. Finally, consider the lifting problem
	\begin{equation*}
		\begin{tikzcd}
			\Delta^1\times\partial\Delta^n\sqcup_{\{1\}\times\partial\Delta^n}\{1\}\times\Delta^n\rar["{(\vartheta,\,\ov\vartheta)}"]\dar & X\dar["f"]\\
			\Delta^1\times\Delta^n\urar[dashed,"\rho"']\rar & Y
		\end{tikzcd}
	\end{equation*}
	which can be solved by \cref{lem:AnodynePushout}. Then $\rho|_{\{0\}\times\Delta^n}$ provides a solution for the original lifting problem and we're done.
\end{proof}
\begin{proof}[Proof of \cref{thm:Whitehead}]
	Let's first assume that $f\colon X\rightarrow Y$ is a homotopy equivalence. Then $f$ clearly induces a bijection $\pi_0(X)\cong \pi_0(Y)$. But to get isomorphisms $\pi_n(X,x)\cong \pi_n(Y,y)$ for all $x\in X$, $y=f(x)$, and all $n\geqslant 1$, we have to show that $f\colon (X,x)\rightarrow(Y,y)$ is also a pointed homotopy equivalence, which is not entirely trivial. 
	
	It suffices to show that $\pi_0\F((Y,y),(Z,z))\rightarrow \pi_0\F((X,x),(Z,z))$ is surjective for every pointed Kan complex $(Z,z)$. Indeed, if this is true, then plugging in $(Z,z)=(X,x)$ yields a pointed map $g\colon (Y,y)\rightarrow (X,x)$ together with a pointed homotopy $g\circ f\simeq\id_{(X,x)}$. In particular, $g$ is a homotopy equivalence too. Repeating the argument with $g$, we obtain $h\colon (X,x)\rightarrow (Y,y)$ together with $h\circ g\simeq\id_{(Y,y)}$. Then $g$ is a pointed homotopy equivalence and thus $f$ must be a pointed homotopy equivalence too. To show that $\pi_0\F((Y,y),(Z,z))\rightarrow \pi_0\F((X,x),(Z,z))$ is surjective, first note that we have Kan fibrations
	\begin{equation*}
		\ev_x\colon \F(X,Z)\longrightarrow\F\bigl(\{x\},Z\bigr)\cong Z\quad\text{and}\quad\ev_y\colon \F(Y,Z)\longrightarrow \F\bigl(\{y\},Z\bigr)\cong Z
	\end{equation*}
	by \cref{cor:FKanFibration}. Using \cref{con:FOfPairs}, we see that the fibres of these fibrations are given by $\ev_x^{-1}\{z\}\cong \F((X,x),(Z,z))$ and $\ev_y^{-1}\{z\}\cong \F((Y,y),(Z,z))$. Using \cref{lem:FibrationSequence}, we obtain a diagram of exact sequences
	\begin{equation*}
		\begin{tikzcd}
			\dotsb\rar & \pi_1(Z,z)\eqar[d]\rar & \pi_0\F\bigl((Y,y),(Z,z)\bigr)\dar\rar & \pi_0\F(Y,Z)\dar["\cong"] \rar & \pi_0(Z)\rar\eqar[d] & \dotsb\\
			\dotsb\rar & \pi_1(Z,z)\rar & \pi_0\F\bigl((X,x),(Z,z)\bigr)\rar & \pi_0\F(X,Z)\rar & \pi_0(Z)\rar& \dotsb
		\end{tikzcd}
	\end{equation*}
	Since we assume $f\colon X\rightarrow Y$ to be an unpointed homotopy equivalence, it induces a bijection $\pi_0\F(Y,Z)\cong\pi_0\F(X,Z)$, as indicated above. Then a diagram chase involving \cref{lem:FibrationSequence}\cref{enum:ActionOfPi1} shows that $\pi_0\F((Y,y),(Z,z))\rightarrow \pi_0\F((X,x),(Z,z))$ is surjective. As argued above, this is what we need.
	
	Conversely, assume that $f\colon X\rightarrow Y$ induces a bijection $\pi_0(X)\cong \pi_0(Y)$ and isomorphisms $\pi_n(X,x)\cong \pi_n(Y,y)$ for all $x\in X$, $y=f(x)$, and all $n\geqslant 1$. \cref{lem:SmallObjectArgument} allows us to choose a factorisation
	\begin{equation*}
		f\colon X\overset{i}{\longrightarrow} \ov X\overset{\ov f}{\longrightarrow}Y
	\end{equation*}
	where $i$ is anodyne and $\ov f$ is a Kan fibration. Then $i$ and $\ov f$ are homotopy equivalences. Indeed, \cref{cor:FKanFibration} shows that $\F(\ov X,Z)\rightarrow\F(X,Z)$ is a trivial fibration for every Kan complex $Z$, hence a bijection on $\pi_0$ by \cref{lem:TrivialFibrationHomotopyEquivalence}. Plugging in $Z=X$ and $Z=\ov X$ shows that $i$ is a homotopy equivalence, as claimed.  The Kan fibration $\ov f\colon \ov X\rightarrow Y$ is a trivial fibration by \cref{lem:TrivialFibration}, hence a homotopy equivalence by \cref{lem:TrivialFibrationHomotopyEquivalence}. We are done!
\end{proof}

\subsection{Simplicial approximation and model categories}

\begin{thm}[Simplicial approximation]\label{thm:SimplicialApproximation}
	For every Kan complex $X$ we have a bijection $\pi_0(X)\cong \pi_0(\abs*{X})$ and isomorphisms $\pi_n(X,x)\cong \pi_n(\abs*{X},x)$ for all $x\in X$ and all $n\geqslant 1$. Similarly, for every topological space $Y$ we have a bijection $\pi_0(Y)\cong \pi_0(\Sing Y)$ and isomorphisms $\pi_n(Y,y)\cong \pi_n(\Sing Y,y)$ for all $y\in Y$ and all $n\geqslant 1$. In particular, the adjunction
	\begin{equation*}
		\abs*{\,\cdot\,}\colon \cat{Kan}\doublelrmorphism \cat{Top}\noloc {\Sing}
	\end{equation*}
	from \cref{par:GeometricRealisation} induces homotopy equivalences $u_X\colon X\overset{\simeq}{\longrightarrow} \Sing{\abs*{X}}$ for all Kan complexes $X$ and weak equivalences $c_Y\colon \abs*{\Sing Y}\rightarrow Y$ for every topological space $Y$.\hfill$\blacksquare$
\end{thm}
The proof of \cref{thm:SimplicialApproximation} is a technical headache. For a full proof, have a look at Fabian's and Christoph Winges' lecture notes \cite[\S V.5]{HigherCatsI}; several versions of this theorem can also be found in \cite[\S \href{https://pi.math.cornell.edu/~hatcher/AT/AT.pdf\#page=186}{2.C}]{Hatcher}.

\cref{thm:SimplicialApproximation} is an incarnation of Grothendieck's \emph{homotopy hypothesis}. It tells us, essentially, that as long as we're only interested in topological spaces up to weak equivalence, or CW-complexes up to homotopy equivalence, we can safely pass to the category of Kan complexes, or better yet, to the quasi-category $\cat{An}$ from \cref{exm:SimplicialNerve}\cref{enum:An}. In particular, everything we would ever like to know about homotopy groups (or homology groups etc.) will be captured by $\cat{An}$! We'll see through many examples how this point of view leads to clean, abstract, and conceptually satisfying proofs of many classical topological results and ultimately to a deeper understanding of homotopy theory.

At this point it seems natural to leave a few words about \emph{model categories}. Historically, these have played a dominating role in the development of $\infty$-category theory and to this day they are an indispensible tool in the foundations of the topic (especially in the proof of Lurie's straightening/unstraightening equivalence, \cref{thm:Straightening}) as well as in many other areas of topology. So dismissing them as a tool of the past would be blatantly ignorant and outright disrespectful. Still, model categories run contrary to the modern point of view that I'm trying to get across in these notes, and so I'll try to avoid them entirely---which is, of course, only achievable by conveniently hiding their unavoidable uses in black boxes. But at the very least, I should tell you the definition.	
\begin{defi}\label{def:ModelCategory}
	Let $\Aa$ be a category with finite limits and colimits. A \emph{model structure on $\Aa$} consists of 3 classes of morphisms $C$, $F$, and $W$ (\emph{cofibrations}, \emph{fibrations}, and \emph{weak equivalences}) satisfying the following properties:
	\begin{alphanumerate}
		\item All isomorphisms of $\Aa$ are contained in each of the classes $C$, $F$, $W$, and these classes are all closed under retracts.\label{enum:ModelCategoryCFW}
		\item $W$ is closed under $2$-out-of-$3$. That is, if two of $f$, $g$, and $g\circ f$ are weak equivalences, then so is the third.\label{enum:ModelCategory2OutOf3}
		\item A lifting problem\label{enum:ModelCategoryLifting}
		\begin{equation*}
			\begin{tikzcd}
				a\rar\dar["i"'] & x\dar["f"]\\
				b\urar[dashed]\rar & y
			\end{tikzcd}
		\end{equation*}
		with $i\in C$ a cofibration and $f\in F$ a fibration always has a solution provided that $i$ is a \emph{trivial cofibration} (a cofibration that is also a weak equivalence) or $f$ is a \emph{trivial fibration} (a fibration that is also a weak equivalence).
		\item Every morphism in $\Aa$ can be factored into a cofibration followed by a trivial fibration and into a trivial cofibration followed by a fibration. That is, if $a\rightarrow y$ is a morphism in $\Aa$, then there exist factorisations\label{enum:ModelCategoryFactorisations}
		\begin{equation*}
			a\longrightarrow x\longrightarrow y\quad\text{and}\quad a\longrightarrow b\longrightarrow y\,,
		\end{equation*}
		where $(a\rightarrow x)\in C$ and $(x\rightarrow y)\in F\cap W$ as well as $(a\rightarrow b)\in C\cap W$ and $(b\rightarrow y)\in F$. Sometimes these factorisations are required to be functorial (which is satisfied in virtually all examples).
	\end{alphanumerate}
	A category $\Aa$ equipped with a model structure is called a \emph{model category}. If $\Aa$ is a model category, then $x\in \Aa$ is called \emph{cofibrant} if the map from the initial object to $x$ is a cofibration, and \emph{fibrant} if the map from $x$ to the terminal object is a fibration. We call $x$ \emph{bifibrant} if it is both fibrant and cofibrant.
\end{defi}
\begin{exm}\label{exm:KanQuillenModelStructure}
	Basically, the entirety of \cref{subsec:Fibrations} can be summarised by saying that $\cat{sSet}$ carries a model structure in which cofibrations are exactly that, fibrations are Kan fibrations, and weak equivalences are morphisms that can be factored into an anodyne map followed by a trivial fibration. This model structure is called the \emph{Kan--Quillen model structure}.
\end{exm}
\begin{exm}\label{exm:JoyalModelStructure}
	As the Kan--Quillen model structure \enquote{models} the quasi-category $\cat{An}$ from  \cref{exm:SimplicialNerve}, it seems natural to ask whether there is another model structure on $\cat{sSet}$ that \enquote{models} $\cat{Cat}_\infty$. The naive attempt would be to ask that fibrations be inner fibrations and that trivial cofibrations be inner anodyne maps. But there are examples of cofibrations between quasi-categories that are equivalences in $\Cat_\infty$, but not inner anodyne; for example, the functor $\{0\}\rightarrow \N(J)$, where $J=\left\{\InlineJ\right\}$ is the \enquote{free-living isomorphism}. It was an insight of Joyal how this can be fixed: There is a model structure on $\cat{sSet}$, called the \emph{Joyal model structure} such that cofibrations are just that and weak equivalences are those maps $A\rightarrow B$ such that $\pi_0\core\F(B,\Cc)\rightarrow \pi_0\core\F(A,\Cc)$ is bijective for every quasi-category $\Cc$. Here $\pi_0\core$ means the set of equivalence classes of objects; once we've proved the hard part of \cref{thm:AnimaeAreKanComplexes}, this notation will be consistent with \cref{def:Homotopy}\cref{enum:Pi0}. Weak equivalences in the Joyal model structure are called \emph{Joyal equivalences}. We'll give another characterisation in \cref{lem:JoyalEquivalence} below.
	
	Fibrant objects in the Joyal model structure are precisely quasi-categories. General fibrations in the Joyal model structure are harder to pin down. However, fibrations between quasi-categories are characterised by a lifting property: They are those inner fibrations that also have lifing against $\{0\}\rightarrow\N(J)$. We'll call these \emph{isofibrations} and we'll meet them again in model category fact~\cref{par:HomotopyPullback}\cref{enum:HomotopyPullbackOfQuasicategories}. For proofs see \cite[Theorem~\href{https://mat.uab.cat/~kock/crm/hocat/advanced-course/Quadern45-2.pdf\#page=153}{6.12}]{JoyalQuasiCategoriesAndApplications} or \cite[Theorem~VIII.23]{HigherCatsII}.
\end{exm}
\begin{lem}\label{lem:JoyalEquivalence}
	A map $A\rightarrow B$ of simplicial sets is a Joyal equivalence if and only if $\F(B,\Cc)\rightarrow\F(A,\Cc)$ is an equivalence in $\cat{Cat}_\infty$ for every quasi-category $\Cc$.
\end{lem}
\begin{proof}
	The \enquote{if} part is trivial, so assume $A\rightarrow B$ is a Joyal equivalence as in \cref{exm:JoyalModelStructure}.  By \cref{lem:SmallObjectArgument}, we may choose an inner anodyne map $B\rightarrow\Bb$ into a quasi-category and a factorisation $A\rightarrow\Aa\rightarrow\Bb$ into an inner anodyne map followed by an inner fibration. Then $\Aa$ is a quasi-category too. Note that $\F(\Aa,\Cc)\rightarrow \F(A,\Cc)$ is a trivial fibration by \cref{cor:FKanFibration} and thus an equivalence of quasi-categories by \cref{lem:TrivialFibrationHomotopyEquivalence}; the same is true for $\F(\Bb,\Cc)\rightarrow \F(B,\Cc)$. So it's enough to show that $\F(\Bb,\Cc)\rightarrow\F(\Aa,\Cc)$ is an equivalence of quasi-categories, and for this, it's enough to show that our functor $F\colon \Aa\rightarrow\Bb$ is an equivalence of quasi-categories.
	
	We know that $F^*\colon \pi_0\core\F(\Bb,\Cc)\rightarrow\pi_0\core\F(\Aa,\Cc)$ is bijective for every quasi-category $\Cc$. Plugging in $\Cc=\Aa$ and choosing a preimage of $\id_\Aa$ yields a functor $G\colon \Bb\rightarrow\Aa$ together with an equivalence $G\circ F\simeq \id_\Aa$. Since $F^*$ and $(G\circ F)^*$ are bijective, it follows that $G^*\colon \pi_0\core\F(\Aa,\Cc)\rightarrow\pi_0\core\F(\Bb,\Cc)$ must too be bijective for every quasi-category $\Cc$. By the same argument, we obtain $H\colon \Aa\rightarrow \Bb$ together with an equivalence $H\circ G\simeq \id_\Bb$. Then $G$ must be an isomorphism in $\operatorname{ho}(\cat{Cat}_\infty)$ and so $F$ must be too. This shows that $F$ is an equivalence in $\cat{Cat}_\infty$, as desired.
\end{proof}
\begin{exm}\label{exm:QuillenAdjunction}
	There are also several model structures on $\cat{Top}$. For example, there is the \emph{Serre--Quillen model structure}, in which cofibrations are retracts of relative CW-inclusions, weak equivalences are just that, and fibrations are Serre fibrations.
	
	An adjunction $L\colon \Aa\shortdoublelrmorphism \Bb\noloc R$ between model categories is called a \emph{Quillen adjunction} if the left adjoint $L$ preserves cofibrations and trivial cofibrations, or equivalently, if the right adjoint $R$ preserves fibrations and trivial fibrations. It is called a \emph{Quillen equivalence} if, additionally, the following conditions hold:
	\begin{alphanumerate}
		\item For every cofibrant object $x\in\Aa$ and every trivial cofibration $i\colon L(x)\rightarrow y$ into a fibrant object in $\Bb$, the composition $R(i)\circ u_x\colon x\rightarrow RL(x)\rightarrow R(y)$ is a weak equivalence in $\Aa$.
		\item For every fibrant object $y\in\Bb$ and every trivial fibration $f\colon x\rightarrow R(y)$ from a cofibrant object in $\Aa$, the composition $c_y\circ L(f)\colon L(x)\rightarrow LR(y)\rightarrow y$ is a weak equivalence in $\Bb$.
	\end{alphanumerate}
	Then one way to understand \cref{thm:SimplicialApproximation} is that the adjunction $\abs*{\,\cdot\,}\colon\cat{sSet}\shortdoublelrmorphism \cat{Top}\noloc \Sing$ from \cref{par:GeometricRealisation} is a Quillen equivalence.
\end{exm}

\newpage
\section{Joyal's lifting theorem}\label{sec:JoyalLifting}
Let's begin by stating the theorem that this section owes its name to. We won't give a proof; the proof is not too difficult, at least compared to our later black box \cref{thm:Straightening}, but it uses some constructions (joins and thin slices) that we've avoided so far and will continue to avoid. If you're interested, Joyal's original proof \cite[Theorem~\href{https://people.math.rochester.edu/faculty/doug/otherpapers/Joyal-QCKC.pdf\#page=5}{2.2}]{JoyalLifting} as well as the accounts in \cite[Theorem~2.1.8]{Land} or \cite[Tag~\href{https://kerodon.net/tag/01H0}{01H0}]{Kerodon} are all very readable.
\begin{thm}[Joyal's lifting theorem]\label{thm:JoyalLifting}
	Let $p\colon \Cc\rightarrow \Dd$ be an inner fibration of quasi-categories. Then for all $n\geqslant 2$, every lifting problem of the form
	\begin{equation*}
		\begin{tikzcd}
			\Lambda_0^n\rar\dar & \Cc\dar["p"]\\
			\Delta^n\rar\urar[dashed] & \Dd
		\end{tikzcd}\quad\text{or}\quad
		\begin{tikzcd}
			\Lambda_n^n\rar\dar & \Cc\dar["p"]\\
			\Delta^n\rar\urar[dashed] & \Dd
		\end{tikzcd}
	\end{equation*}
	in which the $1$-simplex $\Delta^{\{0,1\}}\subseteq \Lambda_0^n\rightarrow\Cc$ or $\Delta^{\{n-1,n\}}\subseteq \Lambda_n^n\rightarrow\Cc$ is sent to an equivalence in $\Cc$, admits a solution.\hfill$\blacksquare$
\end{thm}

\subsection{Consequences of Joyal's lifting theorem}
This subsection is devoted to convincing you what a ridiculously strong result \cref{thm:JoyalLifting} actually is. We begin with some simple corollaries and work our way up to two highly non-trivial theorems.
\begin{cor}[\enquote{Animae and Kan complexes are the same}]\label{cor:AnimaKanComplexes}
	A quasi-category $\Cc$ is a Kan complex if and only if it is an anima, that is, if and only if all its morphisms are equivalences.
\end{cor}
\begin{proof}
	We've seen in \cref{thm:AnimaeAreKanComplexes} that Kan complexes are animae. So let's assume $\Cc$ is an anima. Since $\Cc$ is a quasi-category, it suffices to show that all outer horns $\Lambda_0^n\rightarrow \Cc$ and $\Lambda_n^n\rightarrow \Cc$ have fillers. For $n=1$, this is clear, since we can extend $\{0\}\rightarrow \Cc$ or $\{1\}\rightarrow\Cc$ to a degenerate simplex $\Delta^1\rightarrow\Cc$. For $n\geqslant 2$, we can apply \cref{thm:JoyalLifting} to the inner fibration $p\colon \Cc\rightarrow *$.
\end{proof}
\begin{cor}[\enquote{Left fibrations over animae are Kan fibrations}]\label{cor:LeftFibrationsOverAnima}
	Let $Y$ be a Kan complex and let $f\colon X\rightarrow Y$ be a left fibration. Then $f$ is a Kan fibration and thus $X$ is a Kan complex. A dual assertion holds for right fibrations.
\end{cor}
\begin{proof}[Proof sketch]
	We must show that for all $n\geqslant1$ every lifting problem
	\begin{equation*}
		\begin{tikzcd}
			\Lambda_n^n\rar\dar & X\dar["f"]\\
			\Delta^n\rar\urar[dashed] & Y
		\end{tikzcd}
	\end{equation*}
	has a solution. Let's first consider the case $n=1$. Since every morphism of $Y$ is an equivalence by \cref{cor:AnimaKanComplexes}, the map $\Delta^1\rightarrow Y$ extends to a map $\N(J)\rightarrow Y$, where $J\coloneqq \{\InlineJ\}$ is the \enquote{free-living isomorphism}, the category with two objects and a pair of mutually inverse isomorphisms between them. It can be shown via explicit horn filling that $\{1\}\rightarrow \N(J)$ is both left and right anodyne. Since $f$ is a left fibration, we get a lift $\N(J)\rightarrow X$, which upon restriction along $\Delta^1\rightarrow \N(J)$ yields a solution of our original lifting problem.
	
	Now let $n\geqslant 2$. It suffices to show that every morphism in $X$ is an equivalence, because then \cref{thm:JoyalLifting} will solve our lifting problem. So let $\alpha\colon x\rightarrow y$ be a morphism in $X$ and consider the map $\sigma\colon\Lambda_0^2\rightarrow X$ represented by
	\begin{equation*}
		\sigma=\begin{tikzpicture}[commutative diagrams/every diagram,baseline=(mid.base)]
			\path node[outer sep=0.25ex] (0) at (0,0) {$x$} ++(0:3.8em) node[text depth=0pt,outer sep=0.25ex] (1) {$y$} ++ (120:3.8em) node[outer sep=0.25ex] (2) {$x$};
			\path (0) to node[pos=0.5] (mid) {} (2);
			\path[commutative diagrams/.cd, every arrow, every label]
			(0) edge node[swap] {$\alpha$} (1)
			(1) edge[dotted] (2)
			(0) edge node {$\id_x$} (2);
		\end{tikzpicture}
	\end{equation*}
	Since $Y$ is an anima, $f(\alpha)$ is an equivalence and so $\vartheta\coloneqq f\circ\sigma \colon \Lambda_0^2\rightarrow Y$ can be extended to a map $\ov\vartheta\colon \Delta^2\rightarrow Y$. Since $f\colon X\rightarrow Y$ is a left fibration, we can lift $\ov\vartheta$ to a map $\ov\sigma\colon \Delta^2\rightarrow X$ such that $\ov\sigma|_{\Lambda_0^2}=\sigma$ and $f\circ \ov\sigma=\ov\vartheta$. The $2$-simplex $\ov\sigma$ shows that $\alpha$ has a left inverse $\beta$. Repeating the argument with $\beta$, we see that $\beta$ itself has a left inverse. Then $\beta$ must be an equivalence. Hence its right inverse $\alpha$ must be an equivalence too. 
\end{proof}
\begin{cor}[\enquote{$\Hom_\Cc$ takes values in animae}]\label{cor:HomAnima}
	Let $\Cc$ be a quasi-category. Then for all $x,y\in\Cc$, the slice category projection $t\colon \Cc_{x/}\rightarrow \Cc$ from \cref{par:HomInQuasiCategories} is a left fibration and $\Hom_\Cc(x,y)$ is an anima.
\end{cor}
\begin{proof}[Proof sketch]
	By \cref{par:HomInQuasiCategories}, $t\colon \Cc_{x/}\rightarrow \Cc$ is a pullback of $(s,t)\colon \Ar(\Cc)\rightarrow \Cc\times\Cc$, which is an inner fibration by \cref{cor:FKanFibration}. Hence $t\colon \Cc_{x/}\rightarrow\Cc$ is an inner fibration too and we only need to solve outer horn lifting problems
	\begin{equation*}
		\begin{tikzcd}
			\Lambda_0^n\rar\dar & \Cc_{x/}\dar["t"]\\
			\Delta^n\urar[dashed]\rar & \Cc
		\end{tikzcd}
	\end{equation*}
	for all $n\geqslant 1$. Write $\Cc_{x/}\cong \{x\}\times_{\Cc,s}\Ar(\Cc)$ as in \cref{par:HomInQuasiCategories}. By the usual adjunction tricks, a horn lifting problem as above is equivalent to an extension problem
	\begin{equation*}
		\begin{tikzcd}
			\Lambda_0^n\times\Delta^1\sqcup_{\Lambda_0^n\times\{1\}}\Delta^n\times\{1\}\rar["f"]\dar & \Cc\\
			\Delta^n\times\Delta^1\urar[dashed,"\ov f"'] & 
		\end{tikzcd}
	\end{equation*}
	with the additional condition that $f$ satisfies $f|_{\Lambda_0^n\times\{0\}}=\const x$ and the extension must satisfy $\ov f|_{\Delta^n\times\{0\}}=\const x$. Such an extension problem can be written as a sequence of horn filling problems. Each horn is either an inner horn, which can be filled by \cref{def:QuasiCategory}, or a horn whose first edge is sent to $\const x$, which can be filled by \cref{thm:JoyalLifting}, or a horn that can be filled with a degenerate simplex. Up to the horn filling combinatorics, which we skip as usual, this proves that $t\colon \Cc_{x/}\rightarrow\Cc$ is a left fibration. 
	
	To prove that $\Hom_\Cc(x,y)$ is an anima, recall the pullback diagram
	\begin{equation*}
		\begin{tikzcd}
			\Hom_\Cc(x,y)\rar\dar\drar[pullback] & \Cc_{x/}\dar["t"]\\
			\{y\}\rar & \Cc
		\end{tikzcd}
	\end{equation*}
	from \cref{par:HomInQuasiCategories}. It follows that $\Hom_\Cc(x,y)\rightarrow\{y\}$ is a left fibration. Hence $\Hom_\Cc(x,y)$ is a Kan complex by \cref{cor:LeftFibrationsOverAnima}.
\end{proof}
%Next, we'll use \cref{thm:JoyalLifting} to prove some very non-trivial and very useful theorems.
\begin{thm}[\enquote{Equivalences of functors can be checked pointwise}]\label{thm:EquivalencePointwise}
	Let $F,G\colon \Cc\rightarrow\Dd$ be functors of quasi-categories and let $\eta\colon F\Rightarrow G$ be a natural transformation \embrace{that is, a $1$-simplex $\Delta^1\rightarrow\F(\Cc,\Dd)$ from $F$ to $G$}. Then $\eta$ is an equivalence of functors if and only if $\eta_x\colon F(x)\rightarrow G(x)$ is an equivalence in $\Dd$ for all $x\in\Cc$.
\end{thm}
If all $\eta_x\colon F(x)\rightarrow G(x)$ are equivalences, we can choose inverses $\vartheta_x\colon G(x)\rightarrow F(x)$, but already that step is non-canonical, since inverses are no longer unique in quasi-categories. To assemble the $\vartheta_x$ into a natural transformation $\vartheta\colon G\Rightarrow F$ involves infinitely more non-canonical choices, and we have to make them all in a coherent way. This is an impossible task to do by hand, but incredibly, \cref{thm:EquivalencePointwise} does it for us!
\begin{proof}[Proof sketch of \cref{thm:EquivalencePointwise}]
	The \enquote{only if} part is clear. To prove the \enquote{if} part, we start with some general observations. Let $i\colon A\rightarrow B$ be a cofibration of simplicial sets and consider lifting problems of the form
	\begin{equation}\tag*{}\label{toast}
		\tabcolsep0pt
		\noindent\begin{tabularx}{\textwidth}{l X c X c X l X c X}
			$(*)$ & & $\begin{tikzcd}[ampersand replacement=\&]
				\Lambda_0^2\dar\rar \& \F(B,\Dd)\dar\\
				\Delta^2\urar[dashed]\rar \& \F(A,\Dd)
			\end{tikzcd}$ & & or equivalently & & $(**)$ & & $\begin{tikzcd}[ampersand replacement=\&]
				\Lambda_0^2\times B\sqcup_{\Lambda_0^2\times A}\Delta^2\times A\dar\rar \& \Dd\\
				\Delta^2\times B\urar[dashed]\&
			\end{tikzcd}$ &
		\end{tabularx}
	\end{equation}
	Consider those (\hyperref[toast]{$**$}) for which the $1$-simplex $\Delta^{\{0,1\}}\times\{b\}\rightarrow\Lambda_0^2\times B\rightarrow \Dd$ is an equivalence in $\Dd$ for all $b\in B_0$. We claim:
	\begin{alphanumerate}\itshape
		\item[\boxtimes] Let $\Sigma$ be the class of all cofibrations $i\colon A\rightarrow B$ such that every extension problem \embrace{\hyperref[toast]{$**$}}, for which $\Delta^{\{0,1\}}\times\{b\}\rightarrow\Lambda_0^2\times B\rightarrow \Dd$ is an equivalence in $\Dd$ for all $b\in B_0$, can be solved. Then $\Sigma$ is saturated and contains $\partial \Delta^n\rightarrow\Delta^n$ for all $n\geqslant 0$.\label{claim:Saturated}
	\end{alphanumerate}
	Saturatedness of $\Sigma$ is straightforward to check. To see that $\Sigma$ contains $\partial \Delta^n\rightarrow\Delta^n$, one uses \cref{thm:JoyalLifting}; as usual, we skip the horn filling combinatorics. A full argument is in Fabian's notes \cite[Lemma~VII.2]{HigherCatsI}.
	
	By \cref{claim:Saturated} and \cref{lem:Cofibration}, $\Sigma$ contains all cofibrations of simplicial sets. In particular, $\Sigma$ contains $i\colon \coprod_{x\in\Cc}\{x\}\rightarrow\Cc$. Now let $\eta\colon F\Rightarrow G$ be a natural transformation such that $\eta_x\colon F(x)\rightarrow G(x)$ is an equivalence for all $x\in \Cc$. To construct a left inverse of $\eta$, consider the map $\sigma\colon\Lambda_0^2\rightarrow\F(\Cc,\Dd)$ represented by
	\begin{equation*}
		\sigma=\begin{tikzpicture}[commutative diagrams/every diagram,baseline=(mid.base)]
			\path node[outer sep=0.25ex] (0) at (0,0) {$F$} ++(0:3.8em) node[text depth=0pt,outer sep=0.25ex] (1) {$G$} ++ (120:3.8em) node[outer sep=0.25ex] (2) {$F$};
			\path (0) to node[pos=0.5] (mid) {} (2);
			\path[commutative diagrams/.cd, every arrow, every label]
			(0) edge[white,double, double equal sign distance,-{implies[black]}] (1)
			(1) edge[white,double, double equal sign distance,-{implies[black]}] (2)
			(0) edge[white,double, double equal sign distance,-{implies[black]}] (2);	\path[commutative diagrams/.cd, every arrow, every label,shift right=0.1em]
			(0) edge[shorten >=0.22em,-] node[swap] {$\eta$} (1)
			(1) edge[dotted,shorten >=0.22em,-] (2)
			(0) edge[shorten >=0.22em,-] (2);
			\path[commutative diagrams/.cd, every arrow, every label,shift left=0.1em]
			(0) edge[shorten >=0.22em,-] (1)
			(1) edge[dotted,shorten >=0.22em,-] (2)
			(0) edge[shorten >=0.22em,-] node {$\id_F$} (2);
		\end{tikzpicture}
	\end{equation*}
	Our assumption on $\eta$ means that its image under $i^*\colon \F(\Cc,\Dd)\rightarrow\F\left(\coprod_{x\in\Cc}\{x\},\Dd\right)\cong \prod_{x\in\Cc}\Dd$ is an equivalence. Hence $i^*\circ \sigma$ can be extended to a $2$-simplex $\Delta^2\rightarrow \F\left(\coprod_{x\in\Cc}\{x\},\Dd\right)$ and we obtain a lifting diagram
	\begin{equation*}
		\begin{tikzcd}
			\Lambda_0^2\rar\dar & \F(\Cc,\Dd)\dar\\
			\Delta^2\rar\urar[dashed] & \F\left(\coprod_{x\in\Cc}\{x\},\Dd\right)
		\end{tikzcd}
	\end{equation*}
	which has a solution by what the above arguments. Hence $\eta$ has a left inverse $\vartheta\colon G\Rightarrow F$. Again, $\vartheta_x\colon G(x)\rightarrow F(x)$ must be equivalences for all $x\in\Cc$. Repeating the argument with $\vartheta$ shows that $\vartheta$ must have a left inverse too. Then $\vartheta$ must be an equivalence and so its right inverse $\eta$ must be an equivalence too.
\end{proof}
A similar miracle as \cref{thm:EquivalencePointwise} is the following theorem.

\begin{thm}[\enquote{Fully faithful \&\ essentially surjective implies equivalence}]\label{thm:EquivalenceFullyFaithfulEssentiallySurjective}
	A functor $F\colon \Cc\rightarrow \Dd$ of $\infty$-categories is an equivalence if and only if the following conditions are satisfied:
	\begin{alphanumerate}
		\item $F$ is fully faithful. That is, $F$ induces homotopy equivalences of animae
		\begin{equation*}
			\Hom_\Cc(x,y)\overset{\simeq}{\longrightarrow}\Hom_\Dd\bigl(F(x),F(y)\bigr)
		\end{equation*}
		for all $x,y\in\Cc$.
		\item $F$ is essentially surjective. That is, $F$ induces a surjection $\pi_0\core (\Cc)\rightarrow\pi_0\core(\Dd)$.
	\end{alphanumerate}
\end{thm}
\begin{rem}\label{rem:FullyFaithfulImpliesInjectiveOnPi0Core}
	The \enquote{only if} part of \cref{thm:EquivalenceFullyFaithfulEssentiallySurjective} is easy. For later use, we remark that $F\colon \Cc\rightarrow\Dd$ being fully faithful implies that $\pi_0\core(\Cc)\rightarrow\pi_0\core(\Dd)$ is injective. %Indeed, we have to show that $x\simeq y$ in $\Cc$ if and only if $F(x)\simeq F(y)$ in $\Dd$, which follows from the homotopy equivalences $\Hom_\Cc(x,x)\simeq \Hom_\Dd(F(x),F(x))$, $\Hom_\Cc(x,y)\simeq \Hom_\Dd(F(x),F(y))$, $\Hom_\Cc(y,y)\simeq \Hom_\Dd(F(y),F(y))$, and $\Hom_\Cc(y,x)\simeq \Hom_\Dd(F(y),F(x))$.
	Indeed, this is purely an assertion about the homotopy categories of $\Cc$ and $\Dd$ and it follows from the fact that if $F\colon \Cc\rightarrow\Dd$ is a fully faithful functor of quasi-categories, then $\operatorname{ho}(F)\colon \operatorname{ho}(\Cc)\rightarrow \operatorname{ho}(\Dd)$ is a fully faithful functor of ordinary categories. This in turn follows from the fact that $\Hom_{\operatorname{ho}(\Cc)}(x,y)\cong \pi_0\Hom_\Cc(x,y)$, which is straightforward to check from \cref{par:HomotopyCategory}.
\end{rem}
To prove the \enquote{if} part of \cref{thm:EquivalenceFullyFaithfulEssentiallySurjective}, let's first consider the case where $\Cc$ and $\Dd$ are animae.
\begin{lem}\label{lem:FullyFaithfulAnimae}
	Let $F\colon \Cc\rightarrow\Dd$ be a fully faithful and essentially surjective functor of animae. Then $F$ is a homotopy equivalence.
\end{lem}
\begin{proof}
	Since $\Cc$ and $\Dd$ are animae, we have $\Cc=\core(\Cc)$ and $\Dd=\core(\Dd)$. By \cref{rem:FullyFaithfulImpliesInjectiveOnPi0Core} and the fact that $F$ is essentially surjective, we see that $\Cc\rightarrow\Dd$ is a bijection on path components. Hence we may assume without loss of generality that $\Cc$ and $\Dd$ are connected. Now choose $x\in\Cc$ and observe that
	\begin{equation*}
		\pi_{n+1}(\Cc,x)\cong \pi_n\bigl(\Hom_\Cc(x,x),\id_x\bigr)
	\end{equation*}
	for all $n\geqslant 0$. Indeed, by the pullback square from \cref{par:HomInQuasiCategories}, a map $(\square^n,\partial\square^n)\rightarrow (\Hom_\Cc(x,x),\id_x)$ is equivalently a morphism $\square^n\times\Delta^1\rightarrow \Cc$ such that $\partial \square^n\times\Delta^1\cup\square^n\times\{0,1\}\rightarrow \Cc$ is constant on $x$. But that's just a map $(\square^{n+1},\partial\square^{n+1})\rightarrow(\Cc,x)$, as claimed.
	
	Hence $F$ being fully faithful implies that $\pi_{n+1}(\Cc,x)\cong\pi_{n+1}(\Dd,F(x))$ is an isomorphism for all $n\geqslant 0$. But then $F$ is a homotopy equivalence by \cref{thm:Whitehead}.
\end{proof}
Furthermore we need:
\begin{lem}\label{lem:NonFullSubcategory}
	Let $\Cc$ be a quasi-category and let $\Cc[S_1]\subseteq \Cc$ be a \embrace{not necessarily full} sub-quasi-category spanned by a collection $S_1\subseteq \Cc_1$ of morphisms as in \cref{par:SubQuasiCategories}. Then for all $x,y\in\Cc$
	\begin{equation*}
		\Hom_{\Cc[S_1]}(x,y)\longrightarrow \Hom_\Cc(x,y)
	\end{equation*}
	is an equivalence onto the set of path components of morphisms from $S_1$.
\end{lem}
\begin{proof}[Proof sketch]
	By unravelling \cref{par:HomInQuasiCategories}, an $n$-simplex $\Delta^n\rightarrow \Hom_\Cc(x,y)$ is the same as a map $\sigma\colon \Delta^1\times\Delta^n\rightarrow \Cc$ such that $\sigma|_{\{0\}\times \Delta^n}=\sigma|_{\{1\}\times\Delta^n}=\const x$. Then $\sigma$ defines an $n$-simplex $\Delta^n\rightarrow \Hom_{\Cc[S_1]}(x,y)$ if and only if $\sigma$ maps all morphisms in $\Delta^1\times\Delta^n$ to $S_1$. Note that all morphisms in $\{0\}\times\Delta^n$ and $\{1\}\times\Delta^n$ are mapped to $\id_x$, which is contained $S_1$ because we assume that $S_1$ contains all identities. So it suffices to check that $\sigma|_{\Delta^1\times\{i\}}\colon \Delta^1\times\{i\}\rightarrow \Cc$ is contained in $S_1$ for all $i=0,\dotsc,n$, because all other morphisms in $\Delta^1\times\Delta^n$ are generated under compositions by these as well as the morphisms in $\{0\}\times \Delta^n$ and $\{1\}\times\Delta^n$. This means that an $n$-simplex $\Delta^n\rightarrow \Hom_\Cc(x,y)$ belongs to $\Hom_{\Cc[S_1]}(x,y)$ if and only if all its vertices correspond to morphisms in $S_1$. In other words, $\Hom_{\Cc[S_1]}(x,y)\subseteq\Hom_\Cc(x,y)$ is the collection of path components of morphisms from $S_1$, as desired.
\end{proof}
\begin{proof}[Proof sketch of \cref{thm:EquivalenceFullyFaithfulEssentiallySurjective}]
	Assume $F$ is fully faithful and essentially surjective. We'll show that $\core \F(K,\Cc)\rightarrow\core\F(K,\Dd)$ is a homotopy equivalence of animae for all simplicial sets $K$ (note that both $\F(K,\Cc)$ and $\F(K,\Dd)$ are indeed quasi-categories by \cref{cor:FIsKanComplex}). Once we have this, plugging in $K=\Dd$ yields a functor $G\colon \Dd\rightarrow\Cc$ with an equivalence $G\circ F\simeq\id_\Cc$. It's straightforward to see that $G$ is again fully faithful and essentially surjective, so repeating the argument with $G$ shows that $G$ has a left inverse too. Then $G$ must be an equivalence and so its right inverse $F$ must be an equivalence too.
	
	\emph{Case $K=*$.} Since $\core \F(*,\Cc)\cong \core(\Cc)$, we must show that $\core(\Cc)\rightarrow\core(\Dd)$ is a homotopy equivalence of animae. By \cref{lem:NonFullSubcategory}, $\Hom_{\core (\Cc)}(x,y)\rightarrow \Hom_\Cc(x,y)$ is an equivalence onto those path components that correspond to equivalences from $x$ to $y$. The same is true for $\Dd$, whence $\core (\Cc)\rightarrow\core(\Dd)$ is fully faithful again. Clearly, it is essentially surjective too, so \cref{lem:FullyFaithfulAnimae} shows that $\core (\Cc)\rightarrow\core(\Dd)$ must be a homotopy equivalence.
	
	\emph{Case $K=\Delta^n$, $n\geqslant1$.} Let $I^n\coloneqq\bigcup_{i=0}^{n-1}\Delta^{\{i-1,i\}}\subseteq \Delta^n$. It's straightforward to check that $I^n\rightarrow\Delta^n$ is inner anodyne, so $\F(\Delta^n,\Cc)\rightarrow\F(I^n,\Cc)$ is a trivial fibration by \cref{cor:FKanFibration}. The same is true for $\Dd$. We may thus replace $K=\Delta^n$ by $K=I^n$. Now we claim:
	\begin{alphanumerate}\itshape
		\item[\boxtimes] If $i\colon A\rightarrow B$ is a cofibration of simplicial sets, then $i^*\colon\core \F(B,\Cc)\rightarrow\core\F(A,\Cc)$ is a Kan fibration. Furthermore, for all $x_0,x_1,\dotsc,x_n\in\Cc$, the following diagram is a pullback diagram of Kan complexes and its vertical arrows are Kan fibrations:\label{claim:Pullback}
		\begin{equation*}
			\begin{tikzcd}
				\Hom_\Cc(x_0,x_1)\times\dotsb \times\Hom_\Cc(x_{n-1},x_n)\dar\rar\drar[pullback] & \core \F(I^n,\Cc)\dar\\
				\{x_0\}\times\dotsb\times\{x_n\}\rar & \core (\Cc)\times\dotsb\times\core (\Cc)
			\end{tikzcd}
		\end{equation*}
	\end{alphanumerate}
	We know that $F$ induces a homotopy equivalence $(\core (\Cc))^{n+1}\simeq(\core(\Dd))^{n+1}$ by the case $K=*$. Furthermore, since we assume $F$ to be fully faithful, we know that $F$ induces homotopy equivalences $\prod_{j=1}^n\Hom_\Cc(x_{j-1},x_j)\simeq \prod_{j=1}^n\Hom_\Dd(F(x_{j-1}),F(x_j))$. So if we believe \cref{claim:Pullback} (and its analogue for $\Dd$), then \cref{lem:FibrationSequence} plus the five lemma (plus \cref{rem:ExactnessInLowDegrees}) show that $\core \F(I^n,\Cc)\rightarrow\core \F(I^n,\Dd)$ induces a bijection on $\pi_0$ and isomorphisms on $\pi_n$ for all basepoints and all $n\geqslant1$. Hence $\core \F(I^n,\Cc)\rightarrow\core \F(I^n,\Dd)$ must be a homotopy equivalence by \cref{thm:Whitehead}.
	
	To prove \cref{claim:Pullback}, first note that $\F(B,\Cc)\rightarrow \F(A,\Cc)$ is an inner fibration by \cref{cor:FKanFibration}. Furthermore, if $m\geqslant 2$ and $\sigma\colon\Lambda_j^m\rightarrow \core \F(B,\Cc)$ is any $m$-dimensional horn (we allow $j=0$ or $j=m$), then any $m$-simplex $\ov\sigma\colon \Delta^m\rightarrow \F(B,\Cc)$ with $\ov\sigma|_{\Lambda_j^m}=\sigma$ is already contained in $\core \F(B,\Cc)$. Indeed, equivalences in $\Cc$ are closed under $2$-out-of-$3$, hence the edges of $\Delta^m\smallsetminus\Lambda_j^m$ will automatically be mapped to equivalences too. This observation immediately shows that $i^*\colon \core\F(B,\Cc)\rightarrow \core\F(A,\Cc)$ is an inner fibration again. Furthermore, \cref{thm:JoyalLifting} shows that $i^*$ has lifting against $\Lambda_0^m\rightarrow\Delta^m$ and $\Lambda_m^m\rightarrow \Delta^m$ for all $m\geqslant 2$. It remains to deal with the case $m=1$, that is, to show lifting agains $\{0\}\rightarrow\Delta^1$ and $\{1\}\rightarrow\Delta^1$. Let's sketch how to prove the former; the latter is analogous. Building $B$ from $A$ by successively attaching simplices, we can reduce to the case where $i\colon \partial \Delta^k\rightarrow\Delta^k$ is a simplex boundary inclusion. The case $k=0$ is trivial. For $k\geqslant 1$, the map $\partial\Delta^k\rightarrow\Delta^k$ is bijective on $0$-simplices and so it suffices to show that any extension problem
	\begin{equation*}
		\begin{tikzcd}
			\partial\Delta^k\times\Delta^1\sqcup_{\partial\Delta^k\times\{0\}}\Delta^k\times\{0\}\rar["\sigma"]\dar & \Cc\\
			\Delta^k\times\Delta^1\urar[dashed,"\ov\sigma"'] & 
		\end{tikzcd}
	\end{equation*}
	in which $\sigma|_{\{j\}\times\Delta^1}\colon \{j\}\times\Delta^1\rightarrow\Cc$ is an equivalence in $\Cc$ for every $0$-simplex $j\in(\partial\Delta^k)_0$, admits a solution. Indeed, it follows from \cref{thm:EquivalencePointwise} that any extension $\ov\sigma\colon \Delta^k\times\Delta^1\rightarrow\Cc$ will automatically define a map $\Delta^1\rightarrow\core\F(\Delta^k,\Cc)$. To construct the desired extension, write it as a sequence of horn filling problems; each inner horn can be filled by \cref{def:QuasiCategory} and each outer horn by \cref{thm:JoyalLifting}. As usual, we skip the horn filling combinatorics. This finishes the proof that $i^*\colon \core\F(B,\Cc)\rightarrow\F(A,\Cc)$ is a Kan fibration.
	
	Choosing $i$ to be the cofibration $\{0\}\sqcup\dotsb\sqcup\{n\}\rightarrow I^n$, we see that $\core\F(I^n,\Cc)\rightarrow (\core(\Cc))^{n+1}$ is indeed a Kan fibration. It remains to show that we get a pullback diagram. We can write $I^n$ as an iterated pushout $I^n\cong \Delta^{\{0,1\}}\sqcup_{\{1\}}\dotsb\sqcup_{\{n-1\}}\Delta^{\{n-1,n\}}$ and thus $\F(I^n,\Cc)$ as an iterated pullback $\F(I^n,\Cc)\cong \Ar(\Cc)\times_{t,\Cc,s}\dotsb\times_{t,\Cc,s}\Ar(\Cc)$. Plugging in the definition of $\Hom_\Cc(x_{i-1},x_i)$ from \cref{par:HomInQuasiCategories} yields the desired pullback diagram---except for one problem: The left vertical arrow reads $\F(I^n,\Cc)\rightarrow\Cc^{n+1}$ instead of $\core \F(I^n,\Cc)\rightarrow (\core(\Cc))^{n+1}$. To get $\core$ into the picture, observe that as a consequence of \cref{cor:AnimaKanComplexes}, $\core\colon \cat{QCat}\rightarrow\cat{Kan}$ is a right adjoint to the inclusion $\cat{Kan}\subseteq\cat{QCat}$. Hence $\core$ turns pullbacks in $\cat{QCat}$ into pullbacks in $\cat{Kan}$. However, the pullbacks at hand are supposed to be taken in $\cat{sSet}$, and in general it's not true that pullbacks in $\cat{QCat}$ or $\cat{Kan}$ coincide with those in $\cat{sSet}$.\footnote{It's not even true that pullbacks always exist in $\cat{QCat}$ and $\cat{Kan}$.} But if a pullback of quasi-categories, taken in $\cat{sSet}$, happens to be a quasi-category again, then it's automatically a pullback in $\cat{QCat}$ too, and likewise for a pullback of Kan complexes that happens to be Kan again. Since we've seen that $\F(I^n,\Cc)\rightarrow\Cc^{n+1}$ is an inner fibration and $\core \F(I^n,\Cc)\rightarrow(\core (\Cc))^{n+1}$ is a Kan fibration, this is is true in our situation. So $\core$ preserves the pullback at hand and we conclude that
	\begin{equation*}
		\begin{tikzcd}
			\core\bigl(\Hom_\Cc(x_0,x_1)\times\dotsb \times\Hom_\Cc(x_{n-1},x_n)\bigr)\dar\rar\drar[pullback] & \core \F(I^n,\Cc)\dar\\
			\core\bigl(\{x_0\}\times\dotsb\times\{x_n\}\bigr)\rar & \core (\Cc)\times\dotsb\times\core (\Cc)
		\end{tikzcd}
	\end{equation*}
	is a pullback of simplicial sets. But $\{x_0\}\times\dotsb\times\{x_n\}$ and $\Hom_\Cc(x_0,x_1)\times\dotsb\times\Hom_\Cc(x_{n-1},x_n)$ are Kan complexes (the latter by \cref{cor:HomAnima}), hence coincide with their cores. This shows that we get a pullback as desired, thus finishing the proof of \cref{claim:Pullback} and the case $K=\Delta^n$.
	
	\emph{Case $K$ is finite-dimensional.} A simplicial set $K$ is called \emph{finite-dimensional} if it has non-degenerate simplices in only finitely many degrees. We use induction on maximal dimension $d$ of a non-degenerate simplex.  The case $d=0$ follows from the case $K=\Delta^0$ above. For the inductive step, we can write a $(d+1)$-dimensional simplicial set $K$ as a pushout of some $d$-dimensional simplicial set along a disjoint union $\coprod\partial\Delta^{d+1}\rightarrow\coprod\Delta^{d+1}$ of simplex boundary inclusions. Accordingly, $\F(K,\Cc)$ and $\F(K,\Dd)$ can be written as pullbacks. By arguments as in \cref{claim:Pullback}, we still get pullbacks after applying $\core$ and the legs $\core \F\left(\coprod\Delta^{d+1},\Cc\right)\rightarrow\F\left(\coprod\partial\Delta^{d+1},\Cc\right)$ and $\core \F\left(\coprod\Delta^{d+1},\Dd\right)\rightarrow\F\left(\coprod\partial\Delta^{d+1},\Dd\right)$ are Kan fibrations. Using the inductive hypothesis and the case $K=\Delta^{d+1}$ together with \cref{lem:FibrationSequence} and the five lemma (plus \cref{rem:ExactnessInLowDegrees}), we see that $\core\F(K,\Cc)\rightarrow\core\F(K,\Dd)$ induces a bijection on $\pi_0$ and isomorphisms on $\pi_n$ for all basepoints and all $n\geqslant 1$. Hence $\core\F(K,\Cc)\rightarrow\core\F(K,\Dd)$ must be a homotopy equivalence by \cref{thm:Whitehead}.
	
	\emph{General case.} Write $K\cong \colimit_{d\geqslant 0}\operatorname{sk}_dK$, where $\operatorname{sk}_dK$ is the \emph{$d$-skeleton of $K$}. It is defined as the left Kan extension 
	\begin{equation*}
		\operatorname{sk}_dK\coloneqq \Lan_{\IDelta_{\leqslant d}^\op\rightarrow\IDelta^\op}\left(K|_{\IDelta_{\leqslant d}^\op}\right)\,,
	\end{equation*}
	where $\IDelta_{\leqslant d}^\op\subseteq\IDelta^\op$ is the full subcategory spanned by $[0],\dotsc,[d]$. It's straightforward to see, using the Kan extension formula from \cref{lem:1KanExtensionFormula}, that $\operatorname{sk}_dK$ is $d$-dimensional and the transition maps $\operatorname{sk}_dK\rightarrow\operatorname{sk}_{d+1}K$ are cofibrations. By the finite-dimensional case, $F$ induces equivalences $\core \F(\operatorname{sk}_dK,\Cc)\overset{\simeq}{\longrightarrow}\core\F(\operatorname{sk}_dK,\Dd)$ for all $d\geqslant 0$.
	
	By the colimit above, $\F(K,\Cc)\cong\limit_{d\geqslant 0}\F(\operatorname{sk}_dK,\Cc)$. This limit is preserved by $\core$. Indeed, \cref{claim:Pullback} shows that $\core \F(\operatorname{sk}_{d+1}K,\Cc)\rightarrow \core \F(\operatorname{sk}_dK,\Cc)$ is a Kan fibration and we can apply an argument as above. The same applies to $\Dd$ instead of $\Cc$. So it remains to see that equivalences of Kan complexes are preserved under limits along Kan fibrations. This can be shown using a Milnor sequence for homotopy groups, for example, or by hand, using a straightforward, but technical argument. See \cite[Lemma~VII.12]{HigherCatsI} for example.
\end{proof}

\subsection{Localisations of \texorpdfstring{$\infty$}{Infinity}-categories}
\begin{con}\label{con:Localisation}
	Let $\Cc$ be a quasi-category and $W\subseteq \Cc_1$ a subset of morphisms. We wish to construct the localisation $\Cc\rightarrow\Cc[W^{-1}]$, that is, the universal functor of quasi-categories that sends the morphisms from $W$ to equivalences. To do so, consider the the pushout
	\begin{equation*}
		\begin{tikzcd}
			\coprod_W\Delta^1\rar\dar\drar[pushout] & \Cc\dar\\
			\coprod_W\N(J)\rar & \ov\Cc
		\end{tikzcd}
	\end{equation*}
	in simplicial sets, where $J\coloneqq \{\InlineJ\}$ is the \enquote{free-living isomorphism}, the category with two objects and a pair of mutually inverse isomorphisms between them. By \cref{lem:SmallObjectArgument}, we can choose an inner anodyne map $\ov\Cc\rightarrow\Cc[W^{-1}]$ into a quasi-category. We call the composition $p\colon \Cc\rightarrow\Cc[W^{-1}]$ the \emph{localisation of $\Cc$ at $W$}. We'll check in a moment that $p$ is independent of the choices (up to equivalence), so the definite article is justified.
\end{con}
\begin{lem}\label{lem:Localisation}
	For every quasi-category $\Dd$, the functor $p\colon \Cc\rightarrow\Cc[W^{-1}]$ from \cref{con:Localisation} above induces an equivalence
	\begin{equation*}
		p^*\colon \Hom_{\cat{Cat}_\infty}\bigl(\Cc[W^{-1}],\Dd\bigr)\overset{\simeq}{\longrightarrow}\Hom_{\cat{Cat}_\infty}^W(\Cc,\Dd)\subseteq \Hom_{\cat{Cat}_\infty}(\Cc,\Dd)\,,
	\end{equation*}
	where $\Hom_{\cat{Cat}_\infty}^W(\Cc,\Dd)\subseteq \Hom_{\cat{Cat}_\infty}(\Cc,\Dd)$ is the collection of path components of those functors $F\colon \Cc\rightarrow\Dd$ that send $W$ to equivalences in $\Dd$.
\end{lem}
\begin{proof}
	Let $\F^W(\Cc,\Dd)\subseteq\F(\Cc,\Dd)$ be the full sub-quasi-category (as in \cref{par:SubQuasiCategories}) spanned by those functors $F\colon \Cc\rightarrow\Dd$ that send $W$ to equivalences in $\Dd$. We know from \cref{thm:CordierPorter} that $\Hom_{\cat{Cat}_\infty}(\Cc[W^{-1}],\Dd)\simeq \core\F(\Cc[W^{-1}],\Dd)$ and $\Hom_{\cat{Cat}_\infty}(\Cc,\Dd)\simeq \core\F(\Cc,\Dd)$; it's then straightforward to check that
	\begin{equation*}
		\Hom_{\cat{Cat}_\infty}^W(\Cc,\Dd)\simeq \core\F^W(\Cc,\Dd)\,.
	\end{equation*}
	Since $\ov\Cc\rightarrow\Cc[W^{-1}]$ is inner anodyne by \cref{con:Localisation}, $\F(\Cc[W^{-1}],\Dd)\rightarrow\F(\ov\Cc,\Dd)$ is a trivial fibration by \cref{cor:FKanFibration}.
	
	We'll show that $\core\F(\ov\Cc,\Dd)\rightarrow\core\F^W(\Cc,\Dd)$ is a trivial fibration too to finish the proof. This is straightforward, but a little annoying thanks to technicalities. The pushout from \cref{con:Localisation} shows that
	\begin{equation*}
		\begin{tikzcd}
			\F(\ov\Cc,\Dd)\rar\dar\drar[pullback] & \F(\Cc,\Dd)\dar\\
			\prod_W\F\bigl(\N(J),\Dd\bigr)\rar & \prod_W\F\bigl(\Delta^1,\Dd\bigr)
		\end{tikzcd}
	\end{equation*}
	is a pullback of simplicial sets. Note that $\F(\ov\Cc,\Dd)\rightarrow \F(\Cc,\Dd)$ factors through the full sub-quasi-category $\F^W(\Cc,\Dd)\subseteq \F(\Cc,\Dd)$ and $\F(\N(J),\Dd)\rightarrow\F(\Delta^1,\Dd)$ factors through the full sub-quasi-category $\F^{\{0\rightarrow 1\}}(\Delta^1,\Dd)\subseteq \F(\Delta^1,\Dd)$. Since pullbacks behave well under passing to sub-simplicial sets, the following diagram is a pullback too:
	\begin{equation*}
		\begin{tikzcd}
			\F(\ov\Cc,\Dd)\rar\dar\drar[pullback] & \F^W(\Cc,\Dd)\dar\\
			\prod_W\F\bigl(\N(J),\Dd\bigr)\rar & \prod_W\F^{\{0\rightarrow 1\}}\bigl(\Delta^1,\Dd\bigr)
		\end{tikzcd}
	\end{equation*}
	To finish the proof, it's enough to show the following two claims:
	\begin{alphanumerate}\itshape
		\item[\boxtimes_1] The pullback above stays a pullback after applying $\core$ everywhere.\label{claim:PullbackAfterCore}
		\item[\boxtimes_2] The map $\core \F(\N(J),\Dd)\rightarrow \core\F^{\{0\rightarrow 1\}}(\Delta^1,\Dd)$ is a trivial fibration.\label{claim:TrivialFibration}
	\end{alphanumerate}
	To prove \cref{claim:PullbackAfterCore}, observe that $\F(\N(J),\Dd)\rightarrow \F(\Delta^1,\Dd)$ is an inner fibration by \cref{cor:FKanFibration} and $\core \F(\N(J),\Dd)\rightarrow \core \F(\Delta^1,\Dd)$ is a Kan fibration by claim~\cref{claim:Pullback} in the proof of \cref{thm:EquivalenceFullyFaithfulEssentiallySurjective}. By an argument similar to \cref{lem:NonFullSubcategory}, the fact that $\F^{\{0\rightarrow 1\}}(\Delta^1,\Dd)\subseteq \F(\Delta^1,\Dd)$ is a full sub-quasi-category implies that $\core\F^{\{0\rightarrow 1\}}(\Delta^1,\Dd)\subseteq \core\F(\Delta^1,\Dd)$ is a collection of path components. By inspection, this means that $\F(\N(J),\Dd)\rightarrow \F^{\{0\rightarrow 1\}}(\Delta^1,\Dd)$ must be an inner fibration too and $\core \F(\N(J),\Dd)\rightarrow \core \F^{\{0\rightarrow 1\}}(\Delta^1,\Dd)$ must be a Kan fibration too. By the same argument as in the proof of \cref{thm:EquivalenceFullyFaithfulEssentiallySurjective} it follows that $\core$ preserves the pullback, as required.
	
	To prove \cref{claim:TrivialFibration}, we claim $\core \F(\N(J),\Dd)\cong \core\F(\N(J),\core(\Dd))$. Indeed, an $n$-simplex $\Delta^n\rightarrow\core \F(\N(J),\Dd)$ is the same as an $n$-simplex $\Delta^n\rightarrow \F(\N(J),\Dd)$ all of whose edges are mapped to equivalences; by \cref{par:FInternalHom} and \cref{thm:EquivalencePointwise}, that's the same as a map $\sigma\colon \N(J)\times \Delta^n\rightarrow \Dd$ such that $\sigma|_{\{x\}\times \Delta^{\{i,j\}}}\colon \{x\}\times \Delta^{\{i,j\}}\rightarrow \Dd$ maps to an equivalence for all $x\in \N(J)$ and all edges $\Delta^{\{i,j\}}\subseteq \Delta^n$. But then all morphisms in $\N(J)\times \Delta^n$ must be mapped to equivalences, because every morphism in $\N(J)$ is already an equivalence. So $\sigma$ necessarily factors through $\core(\Dd)\subseteq \Dd$, as desired.
	
	Since $\core(\Dd)$ is a Kan complex by \cref{cor:AnimaKanComplexes}, $\F(\N(J),\core(\Dd))$ is a Kan complex by \cref{cor:FIsKanComplex} and so $\core\F(\N(J),\core(\Dd))\cong \F(\N(J),\core(\Dd))$. By analogous arguments, we get isomorphisms $\core\F^{\{0\rightarrow 1\}}(\Delta^1,\Dd)\cong \core\F^{\{0\rightarrow 1\}}(\Delta^1,\core (\Dd))\cong \F(\Delta^1,\core(\Dd))$. Now $\Delta^1\rightarrow \N(J)$ is anodyne (in fact, both left and right anodyne) by an explicit horn filling argument. Hence $\F(\N(J),\core(\Dd))\rightarrow\F(\Delta^1,\core(\Dd))$ is a trivial fibration by \cref{cor:FKanFibration}. This finishes the proof of \cref{claim:TrivialFibration} and we are done.
\end{proof}
\begin{numpar}[Corollary/Warning.]\label{cor:Localisation}\itshape
	If $\Cc$ is a \embrace{small} ordinary category and $W$ a collection of morphisms in $\Cc$, then the localisation $\N(\Cc)[W^{-1}]$ from \cref{con:Localisation} is not necessarily the nerve of an ordinary category. But the homotopy category $\operatorname{ho}(\N(\Cc)[W^{-1}])$ is equivalent to the localisation of $\Cc$ at $W$ in the world of ordinary categories.
\end{numpar}
\begin{proof}[Proof sketch]
	For counterexamples see \cref{thm:AnAsALocalisation} or the discussion in \cref{con:DerivedCategoryI} below. The assertion about $\operatorname{ho}(\N(\Cc)[W^{-1}])$ follows easily from a combination of \cref{lem:Localisation} and \cref{lem:SimplicialHoNerveAdjunction} as well as the universal property of localisations in ordinary category theory.
\end{proof}

So localisations provide another way to construct non-trivial examples of quasi-categories. In fact, both $\cat{An}$ and $\cat{Cat}_\infty$ can be constructed in this way:
\begin{thm}\label{thm:AnAsALocalisation}
	If $\cat{Kan}^\Delta$ and $\cat{QCat}^\Delta$ are the Kan-enriched categories from \cref{exm:SimplicialNerve}, then there are canonical equivalences of quasi-categories
	\begin{align*}
		\N(\cat{Kan})\left[\{\text{homotopy equivalences}\}^{-1}\right]&\overset{\simeq }{\longrightarrow}\N^\Delta(\cat{Kan}^\Delta)=\cat{An}\,,\\
		\N(\cat{QCat})\left[\{\text{equivalences of quasi-categories}\}^{-1}\right]&\overset{\simeq }{\longrightarrow}\N^\Delta(\cat{QCat}^\Delta)=\cat{Cat}_\infty\,.\equationblackbox
	\end{align*}
\end{thm}
\begin{rem}\label{rem:SimplicialModelCategory}
	It's not hard to construct the functors in \cref{thm:AnAsALocalisation}: By a direct inspection of their constructions, we can build a map $\N(\cat{Kan})\rightarrow\N^\Delta(\cat{Kan}^\Delta)$ of simplicial sets (or rather simplicial \emph{classes}, but we'll ignore the set-theoretic difficulties). Using \cref{lem:Localisation}, we only need to check that this map sends homotopy equivalences in $\cat{Kan}$ to equivalences in $\N^\Delta(\cat{Kan}^\Delta)$, which is clear from the unravelling in \cref{exm:SimplicialNerve}. An analogous argument works of course for $\N^\Delta(\cat{QCat}^\Delta)$.
	
	However, proving that these functors are equivalences is not easy. There is a general notion of \emph{simplicial model categories}: These are model categories $\Aa$ (\cref{def:ModelCategory}) together with a simplicial enrichment $\Aa^\Delta$ that interacts with the model structure in a certain way. One can show that the model structures on $\cat{sSet}$ from \cref{exm:KanQuillenModelStructure,exm:JoyalModelStructure} can be made into simplicial model structures. In general, if $\Aa$ is a simplicial model category and $\Aa^\mathrm{cf}\subseteq \Aa$, $(\cat{\Aa}^\Delta)^\mathrm{cf}\subseteq \Aa^\Delta$ is the full subcategory respectively the full sub-simplicially enriched category spanned by the bifibrant objects, there is an equivalence of quasi-categories
	\begin{equation*}
		\N(\Aa^\mathrm{cf})\left[\{\text{weak equivalences}\}^{-1}\right]\overset{\simeq}{\longrightarrow}\N^\Delta\bigl((\Aa^\Delta)^\mathrm{cf}\bigr)\,.
	\end{equation*}
	A proof can be found in \cite[Theorem~\HAthm{1.3.4.20}]{HA}.
\end{rem}
\begin{rem}\label{rem:ModelCategoryUnderlyingInftyCategory}
	For a general model category $\Aa$, it's customary to call 
	\begin{equation*}
		\Aa_\infty\coloneqq \N(\Aa^\mathrm{cf})\left[\{\text{weak equivalences}\}^{-1}\right]
	\end{equation*}
	the \emph{underlying quasi-category of $\Aa$}. Its homotopy category $\operatorname{ho}(\Aa_\infty)$ is called the \emph{homotopy category of $\Aa$}. By Corollary/Warning~\cref{cor:Localisation}, this agrees with the ordinary localisation of $\Aa^\mathrm{cf}$ at the weak equivalences. Furthermore, if the factorisations from \cref{def:ModelCategory}\cref{enum:ModelCategoryFactorisations} can be chosen functorially (which is always the case in practice), then $\Aa_\infty$ could be obtained equally well by inverting the weak equivalences in either of $\Aa^\mathrm{c}$, $\Aa^\mathrm{f}$, or $\Aa$ itself, where $\Aa^\mathrm{c},\Aa^\mathrm{f}\subseteq \Aa$ denote the full subcategories spanned by the cofibrant or fibrant objects, respectively. So in practice, all possible alternative definitions of $\Aa_\infty$ agree. 
	
	We'll sketch the argument why $\N(\Aa^\mathrm{c})\rightarrow \N(\Aa)$ becomes an equivalences after localisation at all weak equivalences; the other cases are entirely analogous. Let's assume that $\Aa$ has functorial cofibrant replacements. That is, for $x\in \Aa$ the map from the initial object to $x$ factors functorially through a trivial fibration $\eta_x\colon c(x)\rightarrow x$, where $c(x)$ is cofibrant. Then we get a natural transformation $\eta\colon c(-)\Rightarrow \id_{\N(\Aa)}$ of endofunctors of $\N(\Aa)$. Using \cref{lem:Localisation}, we can show that this natural transformation passes to the localisation at all weak equivalences.\footnote{Here's the full argument: Put $W\coloneqq\{\text{weak equivalences}\}$ for short; we wish to construct a natural transformation $\N(\Aa)[W^{-1}]\times \Delta^1\rightarrow \N(\Aa)[W^{-1}]$. It's clear from the construction that $\N(\Aa)[W^{-1}]\times\Delta^1$ can also be described as the localisation of $\N(\Aa)\times \Delta^1$ at $W\times\{\id_0\}\cup W\times\{\id_1\}$. Thus, by \cref{lem:Localisation}, it's enough to provide a natural transformation $\N(\Aa)\times\Delta^1\rightarrow \N(\Aa)[W^{-1}]$ that sends these morphisms to equivalences. Now the composition of $\eta\colon \N(\Aa)\times\Delta^1\rightarrow \N(\Aa)$ with the localisation functor $\N(\Aa)\rightarrow \N(\Aa)[W^{-1}]$ does just that.} After the localisation, $\eta$ becomes an equivalence of endofunctors by \cref{thm:EquivalencePointwise}. Then $\N(\Aa^\mathrm{c})\rightarrow \N(\Aa)$ and $c\colon \N(\Aa)\rightarrow \N(\Aa^\mathrm{c})$ become equivalences of quasi-categories after localisation at all weak equivalences, as desired. 
	
	
	
	
	In general, it's hard to describe morphisms in any localisation. However, if $\Aa$ is a simplicial model category, then \cref{rem:SimplicialModelCategory} and \cref{thm:CordierPorter} provide convenient access to the $\Hom$ animae in $\Aa_\infty$. 
\end{rem}



\newpage
\section{Lurie's straightening equivalence}\label{sec:Straightening}
We've seen in~\cref{par:HomInQuasiCategories} how to construct the $\Hom$ animae $\Hom_\Cc(x,y)$ in a quasi-category $\Cc$. But we never explained how to assemble these values into a functor $\Hom_\Cc\colon \Cc^\op\times\Cc\rightarrow\cat{An}$ (where $\Cc^\op$ is as in \cref{par:Opposite}). In this section, we give such a construction and prove the Yoneda lemma. To do this, we'll use Lurie's \emph{straightening/unstraightening equivalence}, which deals with the problem of constructing functors $F\colon \Cc\rightarrow\cat{An}$ and $F\colon \Cc\rightarrow\cat{Cat}_\infty$. In the end, straightening/unstraightening will not only allow us to prove Yoneda's lemma, but the statement itself will be indispensible for developing quasi-category theory as a higher analogue of ordinary category theory.

\subsection{Cocartesian fibrations and the straightening equivalence}\label{subsec:Straightening}
%\setcounter{theorem}{-1}
\begin{numpar}[Some informal motivation.]\label{par:StraighteningMotivation}
	Let's think about what a functor $F\colon \Cc\rightarrow\cat{Cat}_\infty$ looks like. Suppose $x,y\in \Cc$ are objects and $\alpha\colon x\rightarrow y$ is a morphism. Then $F(x)$, $F(y)$ will be quasi-categories and $F(\alpha)\colon F(x)\rightarrow F(y)$ will be a functor between them. So for every $u\in F(x)$, there will be an associated object $v\simeq F(\alpha)(u)\in F(y)$. In a picture, this could look as follows:
	\begin{center}
		%\vspace{-1ex}
		\begin{tikzpicture}[line cap=round, line join=round, line width=rule_thickness, decoration={markings,mark=at position 0.5 with {\arrow{to}}},scale=0.95]
			\begin{scope}[yshift=-3.5cm]
				\begin{scope}[xscale=0.64,xshift=-0.15cm]
					\draw[dashed,shift={(0,-0.25)},fill=white!93!black]%,preaction={pattern={Lines[xshift=-0.4em,angle=150, line width=0.2em, distance=0.4em]}}, pattern color=white!93!black]
					 (-0.8,0) to[out=35,in=270] (-0.6,0.2) to[out=90,in=305] (-0.8,0.6) to[out=125,in=180]  (-0.2,1) to[out=0,in=140] (0.4,0.65) to[out=320,in=100] (0.8,0.45) to[out=280,in=45] (0.6,0) to[out=225,in=90] (0.45,-0.3) to[out=270,in=135] (0.5,-0.6) to[out=315,in=90] (0.6,-0.85) to[out=270,in=70] (0.5,-1) to[out=250,in=0] (0.1,-1.2) to[out=180,in=315] (-0.6,-1) to[out=135,in=340] (-0.8,-0.7) to[out=160,in=270] (-0.9,-0.5) to[out=90,in=270] (-0.8,-0.25) to[out=90,in=205] cycle;
				\end{scope}
				\begin{scope}[xscale=0.64,xshift=2.1cm]
					\draw[dashed,shift={(3.5,-0.25)}, dash phase=3,fill=white!93!black]%preaction={pattern={Lines[xshift=-0.4em,angle=150, line width=0.2em, distance=0.4em]}}, pattern color=white!93!black]
					(-0.9,0) to[out=35,in=270] (-0.8,0.2) to[out=90,in=305] (-0.9,0.6) to[out=125,in=180]  (-0.2,1.1) to[out=0,in=140] (0.4,0.8) to[out=320,in=100] (0.85,0.6) to[out=280,in=45] (0.7,0) to[out=225,in=90] (0.6,-0.3) to[out=270,in=90] (0.65,-0.6) to[out=270,in=90] (0.75,-0.85) to[out=270,in=70] (0.65,-1.1) to[out=250,in=0] (0.1,-1.2) to[out=180,in=0] (-0.4,-1.3) to[out=180,in=315] (-0.8,-1) to[out=135,in=340] (-0.9,-0.7) to[out=160,in=270] (-1.1,-0.5) to[out=90,in=270] (-1,-0.25) to[out=90,in=205] cycle;
				\end{scope}
				\fill (0,0) circle (0.45ex) node[outer sep=0.5ex] (u) {} node[above left] {$u$};
				\fill (3.5,0) circle (0.45ex) node[outer sep=0.5ex] (v) {} node[above right] {$v$};
				\fill (3.5,-1) circle (0.45ex) node[outer sep=0.5ex] (w) {} node[below right] {$w$};
				\draw[postaction={decorate}] (v) to node[pos=0.5] (mid) {} (w);
				\draw[|-to] (u) to (v);
				\draw[-to] (0.4,-0.5) to node[pos=0.5,below,outer sep=0.25ex] {$\scriptstyle F(\alpha)$} (2.75,-0.5);
				\node at (-1.15,-0.5) {$F(x)$};
				\node at (4.55,-0.5) {$F(y)$};
			\end{scope}
			\draw[dotted] (-4,-5) to[out=90,in=270] (-3.5,-4) to[out=90,in=195] (-3,-3.6) to[out=15,in=290] (-2,-3) to[out=110,in=180] (0,-2.2) to[out=0,in=180] (1.75,-2) to[out=0,in=180] (3,-2.1) to[out=0,in=135] (4.75,-2.5) to[out=315,in=100] (5.4,-2.8) to[out=280,in=85] (5.2,-3.1) to[out=265,in=160] (5.4,-3.3) to[out=340,in=90] (6,-3.5) to[out=270,in=80] (5.7,-3.8) to[out=260,in=90] (6.6,-4.3) to[out=270,in=90] (7.5,-5);
			\node at (-2.9,-3.1) {$\cat{Cat}_\infty$};
			\begin{scope}[yshift=3.65cm]
				\begin{scope}[yscale=0.3,xscale=0.7,shift={(1.2,-12.7)}]
					\draw[dotted] (-3,0) to[out=90,in=270] (-2.4,0.5) to[out=90,in=300] (-2,1) to[out=120,in=270] (-2.2,1.6) to[out=90,in=180] (-0.8,2) to[out=0,in=180] (1,2.5) to[out=0,in=180] (1.95,2.2) to[out=0,in=135] (4.5,1.4) to[out=315,in=160] (4.7,0.8) to[out=340,in=90] (5.7,0) to[out=270,in=60] (4.9,-0.8) to[out=240,in=135] (5.2,-1.2) to[out=315,in=90] (4.7,-1.7) to[out=270,in=90] (4.8,-1.9) to[out=270,in=0] (3.6,-2.2) to[out=180,in=0] (2.75,-2.5) to[out=180,in=305] (0,-2.5) to[out=125,in=275] (-2,-1.75) to [out=95,in=270] (-2.5,-0.75) to[out=90,in=270] cycle;
				\end{scope}
				\node (Cc) at (-1.15,-3.4) {$\Cc$};
				\fill (0,-3.8) circle (0.45ex) node[outer sep=0.5ex] (x) {} node[left=0.5ex] (xlabel) {$x$};
				\fill (3.5,-3.8) circle (0.45ex) node[outer sep=0.5ex] (y) {} node[right=0.5ex] {$\smash{y}\vphantom{x}$};
				\draw[postaction={decorate}] (x) to node[pos=0.5,above,outer sep=0.25ex] (alpha) {$\scriptstyle\alpha$} (y);
				\draw[|-to,shorten >=4.5ex] (x) to (u);
				\draw[|-to,shorten >=4.5ex] (y) to (v);
			\end{scope}
			%\draw[very thick,-to] (alpha) ++ (0,-1) to ++(0,-2);
			%\draw[dotted] (-0.95,0.5) to[out=10,in=180] (-0.25,0.85) to[out=0,in=170] (0.25,0.7) to[out=350,in=190] (2,0.7) to[out=10,in=200] (3.15,0.85) to[out=20,in=180] (3.45,0.95) to[out=0,in=170] (4.2,0.75) to[out=350,in=120] (4.9,0.3) to[out=300,in=90] (5.5,-0.1) to[out=270,in=60] (5,-0.7) to[out=240,in=135] (5.2,-1) to[out=315,in=90] (4.9,-1.3) to[out=270,in=120] (4.95,-1.4) to[out=300,in=350] (3.74,-1.57) to[out=170,in=0] (3.33,-1.65) to[out=180,in=350] (3,-1.5) to[out=170,in=35] (2.2,-1.7) to[out=215,in=0] (0,-1.57) to[out=180,in=285] (-0.78,-1.25) to [out=105,in=270] (-1.2,-0.75) to[out=90,in=270] (-2,-0.2) to[out=90,in=270] (-1.5,0.2) to[out=90,in=300] (-1.3,0.4) to[out=120,in=190] cycle;
			%\begin{scope}[scale=0.9,shift={(0.4,-0.1)}]
			%\draw[dotted] (-3,0) to[out=90,in=270] (-2.4,0.5) to[out=90,in=300] (-2,1) to[out=120,in=270] (-2.2,1.6) to[out=90,in=180] (-0.8,2) to[out=0,in=180] (0,2.2) to[out=0,in=180] (1.75,2) to[out=0,in=135] (4.5,1.4) to[out=315,in=160] (4.7,0.8) to[out=340,in=90] (5.7,0) to[out=270,in=60] (4.9,-0.8) to[out=240,in=135] (5.2,-1.2) to[out=315,in=90] (4.7,-1.7) to[out=270,in=90] (4.8,-1.9) to[out=270,in=0] (3.6,-2.2) to[out=180,in=0] (2.75,-2.5) to[out=180,in=305] (0,-2.5) to[out=125,in=275] (-2,-1.25) to [out=95,in=270] (-2.5,-0.75) to[out=90,in=270] cycle;
			%\end{scope}
			%\draw[|-to] (0,-1.65) to (x);
			%\node (Uu) at (-2,0.75) {$\Uu$};
			%\draw[very thick,-to] (1.75,-2.1) to (alpha);
			%\draw[dashed, shorten <=1.25ex] (-0.9,-0.8) to (x);
			%\draw[dashed, shorten <=0.75ex,dash phase=1.5] (0.6,-1.1) to (x);
			%\draw[dashed,shorten <=1.5ex, dash phase=0] (2.595,-0.8) to (y);
			%\draw[dashed, shorten >=0.75ex,dash phase=0] (y) to (4.245,-1.15);
			%\draw[|-to] (3.5,-1.65) to (y);
		\end{tikzpicture}
	\end{center}
	Now let's turn this picture upside down! Take $F(x)$ and $F(y)$ and place them above $x$ and $y$, respectively. We would like to think of them as the fibres over $x$ and $y$ in some kind of fibration $p\colon \Uu\rightarrow \Cc$:
	\begin{center}
		\vspace{-1ex}
		\begin{tikzpicture}[line cap=round, line join=round, line width=rule_thickness, decoration={markings,mark=at position 0.5 with {\arrow{to}}},scale=0.95]
			\begin{scope}[xscale=0.64,xshift=-0.15cm]
				\draw[dashed,shift={(0,-0.25)},fill=white!93!black]%preaction={pattern={Lines[xshift=-0.4em,angle=150, line width=0.2em, distance=0.4em]}}, pattern color=white!93!black]
				(-0.8,0) to[out=35,in=270] (-0.6,0.2) to[out=90,in=305] (-0.8,0.6) to[out=125,in=180]  (-0.2,1) to[out=0,in=140] (0.4,0.65) to[out=320,in=100] (0.8,0.45) to[out=280,in=45] (0.6,0) to[out=225,in=90] (0.45,-0.3) to[out=270,in=135] (0.5,-0.6) to[out=315,in=90] (0.6,-0.85) to[out=270,in=70] (0.5,-1) to[out=250,in=0] (0.1,-1.2) to[out=180,in=315] (-0.6,-1) to[out=135,in=340] (-0.8,-0.7) to[out=160,in=270] (-0.9,-0.5) to[out=90,in=270] (-0.8,-0.25) to[out=90,in=205] cycle;
			\end{scope}
			\begin{scope}[xscale=0.64,xshift=2.1cm]
				\draw[dashed,shift={(3.5,-0.25)}, dash phase=3,fill=white!93!black]%,preaction={pattern={Lines[xshift=-0.4em,angle=150, line width=0.2em, distance=0.4em]}}, pattern color=white!93!black]
				(-0.9,0) to[out=35,in=270] (-0.8,0.2) to[out=90,in=305] (-0.9,0.6) to[out=125,in=180]  (-0.2,1.1) to[out=0,in=140] (0.4,0.8) to[out=320,in=100] (0.85,0.6) to[out=280,in=45] (0.7,0) to[out=225,in=90] (0.6,-0.3) to[out=270,in=90] (0.65,-0.6) to[out=270,in=90] (0.75,-0.85) to[out=270,in=70] (0.65,-1.1) to[out=250,in=0] (0.1,-1.2) to[out=180,in=0] (-0.4,-1.3) to[out=180,in=315] (-0.8,-1) to[out=135,in=340] (-0.9,-0.7) to[out=160,in=270] (-1.1,-0.5) to[out=90,in=270] (-1,-0.25) to[out=90,in=205] cycle;
			\end{scope}
			\fill (-0.1,0) circle (0.45ex) node[outer sep=0.5ex] (u) {} node[above left,xshift=0.4ex] {$u$};
			\fill (3.5,0) circle (0.45ex) node[outer sep=0.5ex] (v) {} node[above right] {$v$};
			\fill (3.5,-1) circle (0.45ex) node[outer sep=0.5ex] (w) {} node[below right] {$w$};
			\draw[postaction={decorate}] (u) to node[pos=0.5,above,outer sep=0.25ex] {$\scriptstyle\varphi$} (v);
			\draw[postaction={decorate}] (v) to node[pos=0.5] (mid) {} (w);
			\draw[postaction={decorate}] (u) to (w);
			\begin{scope}[yscale=0.3,xscale=0.7,shift={(1.2,-12.7)}]
				\draw[dotted] (-3,0) to[out=90,in=270] (-2.4,0.5) to[out=90,in=300] (-2,1) to[out=120,in=270] (-2.2,1.6) to[out=90,in=180] (-0.8,2) to[out=0,in=180] (1,2.5) to[out=0,in=180] (1.95,2.2) to[out=0,in=135] (4.5,1.4) to[out=315,in=160] (4.7,0.8) to[out=340,in=90] (5.7,0) to[out=270,in=60] (4.9,-0.8) to[out=240,in=135] (5.2,-1.2) to[out=315,in=90] (4.7,-1.7) to[out=270,in=90] (4.8,-1.9) to[out=270,in=0] (3.6,-2.2) to[out=180,in=0] (2.75,-2.5) to[out=180,in=305] (0,-2.5) to[out=125,in=275] (-2,-1.75) to [out=95,in=270] (-2.5,-0.75) to[out=90,in=270] cycle;
			\end{scope}
			\node at (0,1.25) {$F(x)$};
			\node at (3.5,1.25) {$F(y)$};
			\fill (-0.1,-3.8) circle (0.45ex) node[outer sep=0.5ex] (x) {} node[below=0.5ex] {$x$};
			\fill (3.5,-3.8) circle (0.45ex) node[outer sep=0.5ex] (y) {} node[below=0.5ex] {$y$};
			\draw[postaction={decorate}] (x) to node[pos=0.5,above,outer sep=0.25ex] (alpha) {$\scriptstyle\alpha$} (y);
			%\draw[dotted] (-0.95,0.5) to[out=10,in=180] (-0.25,0.85) to[out=0,in=170] (0.25,0.7) to[out=350,in=190] (2,0.7) to[out=10,in=200] (3.15,0.85) to[out=20,in=180] (3.45,0.95) to[out=0,in=175] (4.5,0.75) (4.6,-1.7) to[out=185,in=350] (3.74,-1.57) to[out=170,in=0] (3.33,-1.65) to[out=180,in=350] (3,-1.5) to[out=170,in=35] (2.2,-1.7) to[out=215,in=0] (0,-1.57) to[out=180,in=285] (-0.7,-1.25) to [out=105,in=340] (-1.35,-1);
			\draw[dotted] (-0.95,0.5) to[out=10,in=180] (-0.25,0.85) to[out=0,in=170] (0.25,0.7) to[out=350,in=190] (2,0.7) to[out=10,in=200] (3.15,0.85) to[out=20,in=180] (3.45,0.95) to[out=0,in=170] (4.2,0.75) to[out=350,in=120] (4.9,0.3) to[out=300,in=90] (5.5,-0.1) to[out=270,in=60] (5,-0.7) to[out=240,in=135] (5.2,-1) to[out=315,in=90] (4.9,-1.3) to[out=270,in=120] (4.95,-1.4) to[out=300,in=350] (3.74,-1.57) to[out=170,in=0] (3.33,-1.65) to[out=180,in=350] (3,-1.5) to[out=170,in=35] (2.2,-1.7) to[out=215,in=0] (0,-1.57) to[out=180,in=285] (-0.7,-1.25) to [out=105,in=270] (-1.2,-0.75) to[out=90,in=270] (-2,-0.2) to[out=90,in=270] (-1.5,0.2) to[out=90,in=300] (-1.3,0.4) to[out=120,in=190] cycle;
			%\begin{scope}[scale=0.9,shift={(0.4,-0.1)}]
			%\draw[dotted] (-3,0) to[out=90,in=270] (-2.4,0.5) to[out=90,in=300] (-2,1) to[out=120,in=270] (-2.2,1.6) to[out=90,in=180] (-0.8,2) to[out=0,in=180] (0,2.2) to[out=0,in=180] (1.75,2) to[out=0,in=135] (4.5,1.4) to[out=315,in=160] (4.7,0.8) to[out=340,in=90] (5.7,0) to[out=270,in=60] (4.9,-0.8) to[out=240,in=135] (5.2,-1.2) to[out=315,in=90] (4.7,-1.7) to[out=270,in=90] (4.8,-1.9) to[out=270,in=0] (3.6,-2.2) to[out=180,in=0] (2.75,-2.5) to[out=180,in=305] (0,-2.5) to[out=125,in=275] (-2,-1.25) to [out=95,in=270] (-2.5,-0.75) to[out=90,in=270] cycle;
			%\end{scope}
			%\draw[|-to] (0,-1.65) to (x);
			%\node (Uu) at (-2,0.75) {$\Uu$};
			\node (Uu) at (-1.7,0.55) {$\Uu$};
			\node (Cc) at (-1.15,-3.4) {$\Cc$};
			%\draw[very thick,-to] (1.75,-2.1) to (alpha);
			\draw[dashed, shorten >=0.25ex] (x) to (-0.675,-0.8);
			\draw[dashed] (x) to (0.29,-1.1);
			\draw[dashed,shorten >=0.25ex] (y) to (2.88,-0.8);
			\draw[dashed,shorten >=1.25ex] (y) to (4.06,-1.15);
			\path (u) to node[pos=0.75] {$\scriptscriptstyle/\!/\!/$} (mid);
			%\draw[dashed, shorten <=1.25ex] (-0.9,-0.8) to (x);
			%\draw[dashed, shorten <=0.75ex,dash phase=1.5] (0.6,-1.1) to (x);
			%\draw[dashed,shorten <=1.5ex, dash phase=0] (2.595,-0.8) to (y);
			%\draw[dashed, shorten >=0.75ex,dash phase=0] (y) to (4.245,-1.15);
			%\draw[|-to] (3.5,-1.65) to (y);
		\end{tikzpicture}
	\end{center}
	But, of course, $\Uu$ shouldn't just be a disjoint union of some fibres. Instead, we need to capture somehow that the values $F(x)$ of the functor $F$ \enquote{vary functorially in $x$}. To do this, we connect every $u\in F(x)$ to its image $v\simeq F(\alpha)(u)$ by a new $1$-simplex $\varphi\colon u\rightarrow v$. Then we keep adding further simplices to make sure that the object we end up with is a quasi-category. For example, in our picture we have a morphism $v\rightarrow w$ in $F(y)$, so we have to add a $2$-simplex $\sigma\colon \Delta^2\rightarrow \Uu$ in such a way that $\sigma|_{\Delta^{\{0,2\}}}\colon u\rightarrow w$ is a composition of $\varphi$ and $v\rightarrow w$.
	
	To summarise, we've given some vague motivation why functors $F\colon \Cc\rightarrow\cat{Cat}_\infty$ should correspond to certain fibrations $p\colon \Uu\rightarrow \Cc$, in such a way that the values $F(x)$ correspond to the fibres $p^{-1}\{x\}$. Furthermore, we've motivated that for every $\alpha\colon x\rightarrow y$ in $\Cc$ and every $u\in p^{-1}\{x\}\simeq F(x)$, there should be a special $1$-simplex $\varphi\colon u\rightarrow v$ that connects $u$ to its image under $F(\alpha)$. Every other $1$-simplex from $u$ to an object in $p^{-1}\{y\}$ should arise as a composition with some morphism $v\rightarrow w$ in $p^{-1}\{y\}\simeq F(y)$. These vague ideas are captured in a precise sense by the following definition:
\end{numpar}
\begin{defi}\label{def:Cocartesian}
	Let $p\colon \Uu\rightarrow\Cc$ be an inner fibration of quasi-categories.
	\begin{alphanumerate}
		\item A morphism $\varphi\colon u\rightarrow v$ in $\Uu$ is called \emph{$p$-cocartesian} if, for every $n\geqslant 2$, every lifting problem\label{enum:CocartesianMorphism}
		\begin{equation*}
			\begin{tikzcd}
				\Lambda_0^n\rar\dar & \Uu\dar["p"]\\
				\Delta^n\urar[dashed]\rar & \Cc
			\end{tikzcd}
		\end{equation*}
		in which $\Delta^{\{0,1\}}\subseteq \Lambda_0^n$ is sent to $\varphi$, has a solution.
		\item We call $p$ a \emph{cocartesian fibration} if every lifting problem\label{enum:CocartesianFibration}
		\begin{equation*}
			\begin{tikzcd}
				\{0\}\rar\dar & \Uu\dar["p"]\\
				\Delta^1\urar[dashed]\rar & \Cc
			\end{tikzcd}
		\end{equation*}
		has a solution in which $\Delta^1$ is sent to a $p$-cocartesian morphism.
	\end{alphanumerate}
	There are dual notions of \emph{$p$-cartesian morphisms} and \emph{cartesian fibrations}, in which we use $\Delta^{\{n-1,n\}}\subseteq \Lambda_n^n\rightarrow \Delta^n$ and $\{1\}\rightarrow \Delta^1$ instead.
\end{defi}
It's easy to identify those cocartesian fibrations that correspond to functors $F\colon \Cc\rightarrow \cat{An}$.
\begin{lem}[\enquote{Left fibrations are cocartesian fibrations whose fibres are animae}]\label{lem:CocartesianLeft}
	For a cocartesian fibration $p\colon \Uu\rightarrow\Cc$, the following conditions are equivalent:
	\begin{alphanumerate}
		\item Every morphism in $\Uu$ is $p$-cocartesian.\label{enum:EveryMorphismCocartesian}
		\item $p\colon \Uu\rightarrow \Cc$ is a left fibration.\label{enum:CocartesianLeft}
		\item All fibres $p^{-1}\{x\}$ for $x\in\Cc$ are animae.\label{enum:FibresAreAnimae}
	\end{alphanumerate}
\end{lem}
\begin{proof}[Proof sketch]
	The equivalence \cref{enum:EveryMorphismCocartesian} $\Leftrightarrow$ \cref{enum:CocartesianLeft} is clear and the implication \cref{enum:CocartesianLeft} $\Rightarrow$ \cref{enum:FibresAreAnimae} follows from \cref{cor:LeftFibrationsOverAnima}. To prove \cref{enum:FibresAreAnimae} $\Rightarrow$ \cref{enum:EveryMorphismCocartesian}, let $\varphi\colon u\rightarrow v$ be a morphism in $\Uu$. We wish to show that $\varphi$ is $p$-cocartesian. Suppose we're given a lifting problem of the sort we're interested in: a diagram
	\begin{equation*}
		\begin{tikzcd}
			\Lambda_0^n\rar["\sigma"]\dar & \Uu\dar["p"]\\
			\Delta^n\urar[dashed]\rar & \Cc
		\end{tikzcd}
	\end{equation*}
	such that $\sigma|_{\Delta^{\{0,1\}}}$ is $\varphi\colon u\rightarrow v$. We will construct a new lifting problem
	\begin{equation*}
		\begin{tikzcd}
			\Lambda_0^n\dar\drar[commutes]\rar["d_1"] & \Lambda_1^{n+1}\dar\rar["\ov\sigma"] & \Uu\dar["p"]\\
			\Delta^n\rar["d_1"] & \Delta^{n+1}\urar[dashed]\rar &\Cc
		\end{tikzcd}
	\end{equation*}
	such that $\sigma=\ov\sigma\circ d_1$ (note that $d_1$ maps $\Delta^{\{0,1\}}$ to $\Delta^{\{0,2\}}$, so $\varphi$ is now the image of $\Delta^{\{0,2\}}$ under $\ov\sigma$). Since $p$ is an inner fibration, we'll be able to solve the new lifting problem and get a solution for our original one.
	
	
	Let's construct $\ov\sigma$! By \cref{def:Cocartesian}\cref{enum:CocartesianFibration}, applied to $p(\varphi)\colon \Delta^1\rightarrow \Cc$, we can choose a $p$-cocartesian morphism $\varphi'\colon u\rightarrow v'$ such that $v'\in p^{-1}\{p(v)\}$. By \cref{def:Cocartesian}\cref{enum:CocartesianMorphism}, applied to a suitable $\Lambda_0^2\rightarrow \Uu$, we can find a morphism $\psi\colon v'\rightarrow v$ such that $\varphi\simeq \psi\circ \varphi'$. Note that $\psi$ is an equivalence since $p^{-1}\{p(v)\}$ is an anima by assumption. Now we construct $\ov\sigma$ piece by piece. We put $\ov\sigma|_{d_1(\Lambda_0^n)}\coloneqq \sigma$ and we send $\{1\}$ to $v'$ as well as $\Delta^{\{0,1\}}$ to $\varphi'$. Furthermore, we send $\Delta^{\{0,1,2\}}$ to the $2$-simplex witnessing $\varphi\simeq \psi\circ \varphi'$. The rest of $\Lambda_1^{n+1}\smallsetminus (d_1(\Lambda_0^n)\cup \Delta^{\{0,1,2\}})$ can be filled by a sequence of horn filling problems in which either the first edge is $\varphi'$, so a filler exists by \cref{def:Cocartesian}\cref{enum:CocartesianMorphism}, or the first edge is $\psi\colon v\rightarrow v'$, so a filler exists by Joyal's lifting theorem (\cref{thm:JoyalLifting}) since $\psi$ is an equivalence. As usual, we skip the horn filling combinatorics.
\end{proof}
We can now state the straightening/unstraightening equivalence. As was, unfortunately, clear from the beginning, we won't give a proof here. The most readable proof available is probably due to Gijs Heuts \cite{HeutsStraightening} with contributions by Fabian Hebestreit and Jaco Ruit, building on previous work by Cisinski and Nguyen. Lurie's original proof can be found in \cite[\S\href{https://people.math.harvard.edu/~lurie/papers/HTT.pdf\#section.3.2}{3.2}]{HTT}. There's also another approach by Cisinski \cite{Cisinski} in which straightening/unstraightening is much easier to obtain, but much more work is needed to identify $\cat{An}\subseteq \cat{Cat}_\infty$ with the full sub-quasi-category spanned by the Kan complexes.
\begin{thm}[Straightening/unstraightening]\label{thm:Straightening}
	Let $\Cc$ be a quasi-category.
	\begin{alphanumerate}
		\item Let $\cat{Cocart}(\Cc)\subseteq\cat{Cat}_{\infty/\Cc}$ be the \embrace{non-full!} sub-quasi-category spanned by cocartesian fibrations over $\Cc$ and those maps that preserve cocartesian morphisms \embrace{see \cref{par:SubQuasiCategories}}. Then there are inverse equivalences of quasi-categories\label{enum:CocartesianStraightening}
		\begin{equation*}
			\operatorname{St}^{(\mathrm{cocart})}\colon \cat{Cocart}(\Cc) \underset{\simeq}{\overset{\simeq}{\doublelrmorphism}}\F(\Cc,\cat{Cat}_\infty)\noloc \operatorname{Un}^{(\mathrm{cocart})}\vphantom{\overset{\simeq}{\overline{x}}}
		\end{equation*}
		called \enquote{straightening} and \enquote{unstraightening}. For a cocartesian fibration $p\colon \Uu\rightarrow \Cc$, the value of $\operatorname{St}^{(\mathrm{cocart})}(p)\colon \Cc\rightarrow\cat{Cat}_\infty$ at $x\in \Cc$ is given by the fibre $p^{-1}\{x\}$. Furthermore, $F\colon \Cc\rightarrow \Dd$ is a functor, then the unstraightening equivalence sends the precomposition functor $-\circ F\colon \F(\Dd,\cat{Cat}_\infty)\rightarrow \F(\Cc,\cat{Cat}_\infty)$ to the pullback $F^*\colon \cat{Cocart}(\Dd)\rightarrow\cat{Cocart}(\Cc)$.
		\item Let $\cat{Left}(\Cc)\subseteq \cat{Cat}_{\infty/\Cc}$ be the full sub-quasi-category spanned by the left fibrations over $\Cc$ \embrace{see \cref{par:SubQuasiCategories}}. Then the equivalences from \cref{enum:CocartesianStraightening} restrict to equivalences\label{enum:LeftStraightening}
		\begin{equation*}
			\operatorname{St}^{(\mathrm{left})}\colon \cat{Left}(\Cc) \underset{\simeq}{\overset{\simeq}{\doublelrmorphism}}\F(\Cc,\cat{An})\noloc \operatorname{Un}^{(\mathrm{left})}\vphantom{\overset{\simeq}{\overline{x}}}\,.
		\end{equation*}
	\end{alphanumerate}
	Dually, there are equivalences $\cat{Cart}(\Cc)\simeq \F(\Cc^\op,\cat{Cat}_\infty)$ and $\cat{Right}(\Cc)\simeq \F(\Cc^\op,\cat{An})$. Here $\Cc^\op$ is the opposite quasi-category from \cref{par:Opposite}.\hfill$\blacksquare$
\end{thm}
Most of the time, one can treat \cref{thm:Straightening} as a black box and work purely with the statement, without knowing how exactly and we don't need to know how exactly the functors $\operatorname{St}^{(\mathrm{cocart})}$ and $\operatorname{Un}^{(\mathrm{cocart})}$ are constructed! 

Still, we'll spend the rest of \cref{subsec:Straightening} to give you some idea how the construction works. In \cref{par:StraighteningOnMorphisms}, we'll explain the effect of straightening on morphisms. After that, we'll discuss two (hopefully enlightening) classical examples in the language of straightening/unstraightening in~\cref{par:Stacks} and~\cref{par:Coverings}. But let's begin by giving some examples.
\begin{exm}\label{exm:Straightening}
	Let $\Cc$ be a quasi-category. The following are examples of cocartesian fibrations and their unstraightenings.
	\begin{alphanumerate}
		\item For every quasi-category $\Dd$, the unique functor $\Dd\rightarrow *$ is a cocartesian fibrations, with the cocartesian morphisms given by the equivalences in $\Dd$. This is an easy application of Joyal's lifting theorem (\cref{thm:JoyalLifting}). Furthermore, since cocartesian fibrations are clearly preserved under pullbacks, we see that $\pr_2\colon \Dd\times \Cc\rightarrow\Cc$ is a cocartesian fibration for every quasi-category $\Cc$. The $\pr_2$-cocartesian morphisms in $\Dd\times\Cc$ are precisely those that are equivalences in the $\Dd$-component. The straightening of $\pr_2\colon \Dd\times \Cc\rightarrow\Cc$ is the constant functor $\const \Dd\colon \Cc\rightarrow \cat{Cat}_\infty$; this follows from the pullback statement in \cref{thm:Straightening}\cref{enum:CocartesianStraightening}, but it's probably also pretty clear intuitively.\label{enum:ProjectionsStraightenToConstantFunctors}
		\item For every $x\in \Cc$, we've seen in \cref{cor:HomAnima} that $t\colon \Cc_{x/}\rightarrow \Cc$ is even a left fibration. The fibre of $t$ over $y\in\Cc$ is $\Hom_\Cc(x,y)$ by \cref{par:HomInQuasiCategories}, so we can use the straightening of $t$ as our definition of the Hom functor $\Hom_\Cc(x,-)\colon \Cc\rightarrow \cat{An}$. Analogously, the dual construction $s\colon \Cc_{/y}\rightarrow \Cc$ is a right fibration and its cartesian straightening is, by definition, the contravariant Hom functor $\Hom_\Cc(-,y)\colon \Cc^\op\rightarrow \cat{An}$. This still leaves the question how to construct the two-variable Hom functor $\Hom_\Cc\colon \Cc^\op\times\Cc\rightarrow\cat{An}$, which we'll discuss in \cref{con:HomInTwoVariables,con:HomTwAr} below.\label{enum:SliceLeftFibration}
		\item The target projection $t\colon \Ar(\Cc)\rightarrow \Cc$ from \cref{par:HomInQuasiCategories} is a cocartesian fibration, and its is our definition of the functor $\Cc_{/-}\colon \Cc\rightarrow\cat{Cat}_\infty$ that sends $x\in\Cc$ to the slice quasi-category $\Cc_{/x}$. A morphism $\varphi\colon (\alpha\colon u\rightarrow u')\rightarrow (\beta\colon v\rightarrow v')$ in $\Ar(\Cc)$, that is, a commutative diagram\label{enum:ArCocartesianFibration}
		\begin{equation*}
			\begin{tikzcd}
				u\rar\dar["\alpha"']\drar[commutes] & v\dar["\beta"]\\
				u'\rar & v'
			\end{tikzcd}
		\end{equation*}
		in $\Cc$, is $t$-cocartesian if and only if $u\rightarrow v$ is an equivalence in $\Cc$. Proving this is a somewhat subtle and will lead us on a detour in \cref{subsec:HomotopyPullbacks}. One way to see the \enquote{if}-part (which is the difficult part) would be to reformulate a lifting problem for $t$ against $\Lambda_0^n\rightarrow \Delta^n$ into a lifting problem for $\Cc\rightarrow *$ against $\Lambda_0^n\times \Delta^1\sqcup_{\Lambda_0^n\times\{1\}}\Delta^n\times\{1\}\rightarrow \Delta^n\times\Delta^1$, as in the proof of \cref{cor:FKanFibration}. Then one proves, using Joyal's lifting problem (\cref{thm:JoyalLifting}), that a lifting problem of the latter kind is always solvable if the original lifting problem maps $\Delta^{\{0,1\}}\subseteq\Lambda_0^n$ to a morphism $\varphi$ as above.
		
		However, a much nicer proof of the \enquote{if}-part  is provided by \cref{lem:HomInArrowCategories} and \cref{lem:CocartesianMorphisms} below (except that there are some black boxes involved \ldots). For the \enquote{only if}-part, it's enough to write down the correct lifting diagrams; we leave this to you.
	\end{alphanumerate}
\end{exm}
\begin{numpar}[Straightening/unstraightening on morphisms]\label{par:StraighteningOnMorphisms}
	Suppose we're given a cocartesian fibration $p\colon \Uu\rightarrow \Cc$ and let $F\colon \Cc\rightarrow \cat{Cat}_\infty$ be its straightening. We know what $F$ does on objects: It sends $x\in \Cc$ to the fibre $p^{-1}\{x\}$. We'll now explain what $F$ does on morphisms. To this end, let $\Ar^{(\mathrm{cocart})}(\Uu)\subseteq \Ar(\Uu)$ denote the full sub-quasi-category spanned by the $p$-cocartertesian morphisms. Then 
	\begin{equation*}
		\Ar^{(\mathrm{cocart})}(\Uu)\longrightarrow \Ar(\Cc)\times_{s,\Cc}\Uu
	\end{equation*}
	is a trivial fibration.\footnote{Intuitively, this says that given a morphism $\alpha\colon x\rightarrow y$ in $\Cc$ and an object $u\in p^{-1}\{x\}$, then lifting $\alpha$ to a $p$-cocartesian morphism $\varphi\colon u\rightarrow v$ can not only be done, but even in a unique way (up to contractible ambiguity). This fits perfectly into the picture from \cref{par:StraighteningMotivation}: Such a $p$-cocartesian lift $\varphi$ connects $u\in p^{-1}\{x\}\simeq F(x)$ to its image under $F(\alpha)\colon F(x)\rightarrow F(y)$. So $\varphi$ should be unique.} To see this, first consider the case where $p$ is a left fibration. Then $\Ar^{(\mathrm{cocart})}(\Uu)= \Ar(\Uu)$ by \cref{lem:CocartesianLeft}\cref{enum:EveryMorphismCocartesian}. Furthermore, $\{0\}\rightarrow \Delta^1$ is left anodyne. Hence the map above is a trivial fibration by \cref{cor:FKanFibration}. In general, we can adapt the proof of \cref{cor:FKanFibration} to show that $\Ar^{(\mathrm{cocart})}(\Uu)\rightarrow \Ar(\Cc)\times_{s,\Cc}\Uu$ has lifting against $\partial\Delta^n\rightarrow\Delta^n$: Rewrite such a lifting problem as a lifting problem for $p\colon \Uu\rightarrow \Cc$ against $\partial\Delta^n\times\Delta^1\sqcup_{\partial\Delta^n\times\{0\}}\Delta^n\times\{0\}\rightarrow \Delta^n\times\Delta^1$. The latter is a sequence of horn lifting problems, each of which can be solved either because $p$ is an inner fibration or by employing \cref{def:Cocartesian}\cref{enum:CocartesianMorphism}.%As usual, we skip the simplicial combinatorics.
	
	Given a morphism $\alpha\colon x\rightarrow y$ in $\Cc$, we can now give the desired description of the functor $F(\alpha)\colon p^{-1}\{x\}\rightarrow p^{-1}\{y\}$ as follows: Pull back $\Ar^{(\mathrm{cocart})}(\Uu)\rightarrow \Ar(\Cc)\times_{s,\Cc}\Uu$ along $\{\alpha\}\rightarrow \Ar(\Cc)$ to obtain a trivial fibration $\{\alpha\}\times_{\Ar(\Cc)}\Ar(\Uu)\rightarrow \{\alpha\}\times_{s,\Cc}\Uu\cong \{x\}\times_\Cc\Uu\cong p^{-1}\{x\}$. Every trivial fibration admits a section. By choosing such a section and composing with the target projections $t\colon \Ar(\Uu)\rightarrow \Uu$ and $t\colon \Ar(\Cc)\rightarrow \Cc$, we obtain (up to natural equivalence) the desired functor
	\begin{equation*}
		F(\alpha)\colon p^{-1}\{x\}\longrightarrow \{\alpha\}\times_{\Ar(\Cc)}\Ar(\Uu)\overset{t}{\longrightarrow} \{y\}\times_{\Cc}\Uu\cong p^{-1}\{y\}\,.
	\end{equation*}	
	With (a lot) more care, one can continue these considerations to give a complete description of the functor $F\colon \Cc\rightarrow \cat{Cat}_\infty$. This was first done by Haugseng and is described in \cite[\S3.3]{Land}. The proofs of straightening/unstraightening in \cite{HeutsStraightening} or \cite[\S\href{https://people.math.harvard.edu/~lurie/papers/HTT.pdf\#section.3.2}{3.2}]{HTT} proceed instead by constructing a simplicially enriched functor $\CC[\Cc]\rightarrow \cat{sSet}^\Delta$, as they deduce \cref{thm:Straightening} from a suitable Quillen equivalence of model categories.
\end{numpar}
\begin{numpar}[Straightening/unstraightening and stacks]\label{par:Stacks}
	We'll briefly explain the relation between \cref{thm:Straightening} and the language of stacks from algebraic geometry. If you already know stacks, this will hopefully make \cref{thm:Straightening} less mysterious. If you'd like to learn about stacks, this remark will hopefully make the literature on stacks less mysterious. If you don't care about stacks at all, you can safely skip this remark.
	
	In algebraic geometry, one is naturally lead to functors whose values should be groupoids. For example, given a scheme $S$ and a group scheme $G$ acting on $S$, one would like to study the functor $[S/G]\colon (\cat{Sch}_{/S})^\op\rightarrow \cat{Grpd}$ that sends any scheme $X$ over $S$ to the groupoid of $G_X$-torsors, where $G_X\coloneqq G\times_SX$ is the base change of $G$ to $X$. A morphism $f\colon X\rightarrow Y$ in $\cat{Sch}_{/S}$ should be sent to the pullback functor $f^*\colon \{G_Y\text{-torsors}\}\rightarrow \{G_X\text{-torsors}\}$. Here one quickly runs into a problem: If $g\colon Y\rightarrow Z$ is another morphism in $\cat{Sch}_{/S}$, then the associated pullback functors come with a natural \emph{equivalence} $f^*\circ g^*\simeq (g\circ f)^*$, but that equivalence is not an \emph{equality}. So $[S/G]$ can't exist as a functor $[S/G]\colon (\cat{Sch}_{/S})^\op\rightarrow \cat{Grpd}$ into the category of groupoids; instead, it's a functor
	\begin{equation*}
		[S/G]\colon \N\left(\cat{Sch}_{/S}\right)^\op\longrightarrow \cat{Grpd}^{(2)}
	\end{equation*}
	into the \emph{$2$-category of groupoids} as introduced in \cref{exm:CatAs2Category}. The ancient algebraic geometers didn't have the language to deal with functors into a $2$-category, but they made do with the tools of their time: They instead constructed a functor $p\colon \Uu\rightarrow \cat{Sch}_{/S}$ in such a way that $\N(p)\colon \N(\Uu)\rightarrow \N(\cat{Sch}_{/S})$ is a right fibration whose straightening $\operatorname{St}^{(\mathrm{right})}(\N(p))\simeq [S/G]$ is the functor above.%
	\footnote{\label{footnote:UnstraighteningOrdinaryCategory}It's not a coincidence that the unstraightening of $[S/G]$ is the nerve of an ordinary category. Let $\Cc$ be any ordinary category, let $F\colon \N(\Cc)^\op\rightarrow \cat{Cat}_\infty$ be any functor that lands in the full sub-quasi-category $\cat{Cat}^{(2)}\subseteq \cat{Cat}_\infty$ from \cref{exm:CatAs2Category}, and let $p\colon \Uu\rightarrow\N(\Cc)$ be the cartesian unstraightening of $F$. Then $\Uu$ is equivalent to the nerve of an ordinary category. We'll give a sketch of the proof, which uses the notion of \emph{homotopy pullbacks} from \cref{subsec:HomotopyPullbacks}. First, it's enough to show that $\Hom_\Uu(u,v)$ is a discrete anima for all $u,v\in \Uu$, because then the essentialy surjective functor $u_\Uu\colon \Uu\rightarrow \N(\operatorname{ho}(\Uu))$ (given by the unit of the adjunction $\operatorname{ho}\dashv \N$) is also fully faithful, hence an equivalence by \cref{thm:EquivalenceFullyFaithfulEssentiallySurjective}. To prove that $\Hom_\Uu(u,v)$ is discrete, observe that we have a map $\Hom_\Uu(u,v)\rightarrow \Hom_{\N(\Cc)}(p(u),p(v))$. Since the target is a discrete anima, the source $\Hom_\Uu(u,v)$ is a disjoint union of the fibres of this map. So it's enough to show that each individual fibre is a discrete anima. Restricting to the fibre over $\alpha\in\Hom_{\N(\Cc)}(p(u),p(v))$ amounts to base changing along the map $\alpha\colon \Delta^1\rightarrow \N(\Cc)$. So we may assume $\N(\Cc)\cong \Delta^1$.
	
	Now $\{0\}\rightarrow \Delta^1$ is fully faithful. Hence, if $\Uu_0\coloneqq \{0\}\times_{\Delta^1}\Uu$ denotes the fibre over $0$, then $\Uu_0\rightarrow \Uu$ is fully faithful too. But $\Uu_0$ is also equivalent to the nerve of an ordinary category, because we assume our original functor $F$ takes values in $\cat{Cat}^{(2)}\subseteq \cat{Cat}_\infty$. So if $u,v\in \Uu_0$, then $\Hom_\Uu(u,v)\simeq \Hom_{\Uu_0}(u,v)$ is a discrete anima. The same reasoning applies if $u$ and $v$ both belong to the fibre over $1$. If $p(u)=1$ and $p(v)=0$, then the map $\Hom_\Uu(u,v)\rightarrow \Hom_{\Delta^1}(1,0)\simeq\emptyset$ forces $\Hom_\Uu(u,v)\simeq \emptyset$, which is discrete too. It remains to deal with the case $p(u)=0$ and $p(v)=1$. After choosing a $p$-cartesian lift $\varphi\colon u'\rightarrow v$ of $0\rightarrow 1$, the dual of \cref{lem:CocartesianMorphisms} below provides a homotopy pullback
	\begin{equation*}
		\begin{tikzcd}[ampersand replacement=\&]
			\Hom_\Uu(u,u')\rar["\varphi_*"] \dar["p"']\drar[dash, phantom, "\scriptstyle\rlap{\phantom{$\pullbacksign$}}\smash{\pullbacksign_{\scriptstyle h}}", start anchor=center, end anchor=center] \& \Hom_\Uu(u,v)\dar["p"]\\
			\Hom_{\Delta^1}(0,0)\rar["{p(\varphi)_*}"] \& \Hom_{\Delta^1}(0,1)
		\end{tikzcd}
	\end{equation*}
	The bottom horizontal arrow is clearly a homotopy equivalence, so the top arrow must be one as well, whence $\Hom_\Uu(u,u')\simeq \Hom_\Uu(u,v)$. As we already know $\Hom_\Uu(u,u')$ to be discrete, we're done.}
	Explicitly, $\Uu$ is the category of pairs $(X,\Pp)$, where $X\in\cat{Sch}_{/S}$ and $\Pp$ is a $G_X$-torsor. Morphisms $(X,\Pp)\rightarrow (Y,\Qq)$ in $\Uu$ are pairs $(f,\alpha)$ where $f\colon X\rightarrow Y$ is a morphism in $\cat{Sch}_{/S}$ and $\alpha\colon f^*\Qq\overset{\simeq}{\longrightarrow}\Pp$ is an isomorphism of $G_X$-torsors.
	See \cite[Example~8.1.10]{OlssonStacks} or \cite[\stackstag{036Z}]{Stacks}.
	
	More generally, a \emph{fibred category} is a functor $p\colon \Uu\rightarrow \Cc$ of ordinary categories such that $\N(p)\colon \N(\Uu)\rightarrow\N(\Cc)$ is a cartesian fibration.\footnote{It follows from the uniqueness statement in \cref{lem:LiftingConditions}\cref{enum:LiftingN} that any map between nerves of ordinary categories is automatically an inner fibration. So to check whether such a map is a cartesian fibration, it's enough to show the existence of cartesian lifts.} The classical definition of cartesian morphisms, see \cite[Definition~3.1.1]{OlssonStacks} or \cite[\stackstag{02XK}]{Stacks}, differs from \cref{def:Cocartesian}\cref{enum:CocartesianMorphism}, but it's still equivalent, as we'll see in \cref{lem:CocartesianMorphisms}. By \cref{thm:Straightening}, the data of a fibred category defines a functor $\operatorname{St}^{(\mathrm{cart})}\colon \N(\Cc)^\op\rightarrow \cat{Cat}_\infty$, which necessarily factors through the full sub-quasi-category $\cat{Cat}^{(2)}\subseteq \cat{Cat}_\infty$ from \cref{exm:CatAs2Category}, because the fibres of $\N(p)\colon \N(\Uu)\rightarrow\N(\Cc)$ must be nerves of ordinary categories again, Conversely, we show in footnote~\cref{footnote:UnstraighteningOrdinaryCategory} below that the unstraightening of such a functor is necessarily the nerve of an ordinary category.
	
	A \emph{category fibred in groupoids} is a fibred category $p\colon \Uu\rightarrow \Cc$ such that all fibres are groupoids; equivalently, the associated functor $\operatorname{St}^{(\mathrm{cart})}\colon \N(\Cc)^\op\rightarrow \cat{Cat}^{(2)}$ factors through $\cat{Grpd}^{(2)}\subseteq \cat{Cat}^{(2)}$. Finally, if $\Cc$ is equipped with a Grothendieck topology, we call $p\colon \Uu\rightarrow \Cc$ a \emph{stack} if the functor $\operatorname{St}^{(\mathrm{right})}(\N(p))\colon \Cc^\op\rightarrow \cat{Grpd}^{(2)}$ is a sheaf. To formulate the sheaf condition, one needs an appropriate notion of limits in $\cat{Grpd}^{(2)}$ (or in $\cat{An}$), which we'll see in \cref{def:Colimits}. Fortunately, these limits can be pinned down in explicit terms; for example, it's not too hard to unravel \cref{lem:ColimitsInAnima} to arrive at the description from \cite[\S4.2]{OlssonStacks} or \cite[\stackstag{026B}]{Stacks}. In particular, the result is (the nerve of) a groupoid again.
	
	Thus, by exclusively working on the fibration side of the cartesian straightening equivalence, the theory of stacks can be and has been developed within the framework of ordinary category theory. But with today's tools, its actually possible to talk about stacks in the intended way: as functors into $\cat{Grpd}^{(2)}$. I find the latter much easier.
\end{numpar}
We've seen in \cref{par:Stacks} that \cref{thm:Straightening} is already interesting for functors into $\cat{Grpd}^{(2)}\subseteq \cat{An}$. But there's an even simpler case: functors into \emph{sets!} As it turns out, even this simplest possible special case is interesting and recovers classical theory.

\begin{numpar}[Straightening/unstraightening and covering theory.]\label{par:Coverings}
	An anima is called \emph{discrete} if it is homotopy equivalent to a disjoint union of copies of the point $*$. Equivalently, all path components are contractible. Considering sets as discrete animae, it's easy to construct a functor $\N(\cat{Set})\rightarrow \cat{An}$; this functor is fully faithful and an equivalence onto the full sub-quasi-category spanned by the discrete animae.\footnote{Let's sketch how to do this: One can equip $\cat{Set}$ with a trivial Kan enrichment $\cat{Set}^\Delta$ in which $\F_{\cat{Set}^\Delta}(S,T)$ is just a disjoint union of $\Hom_{\cat{Set}}(S,T)$ many points. Sending $S\mapsto \coprod_{s\in S}*$ then defines a fully faithful simplicially enriched functor $\cat{Set}^\Delta\rightarrow \cat{Kan}^\Delta$. Applying $\N^\Delta(-)$, we obtain a fully faithful functor of quasi-categories $\N(\cat{Set})\cong \N^\Delta(\cat{Set}^\Delta)\rightarrow \N^\Delta(\cat{Kan}^\Delta)$, whose essential image are precisely the discrete animae.}
	
	Let $X$ be an anima. A \emph{covering of $X$} is a Kan fibration (or equivalently a left fibration, see \cref{cor:LeftFibrationsOverAnima}) $p\colon X'\rightarrow X$ such that for all $x\in X$, the fibres $p^{-1}\{x\}$ are discrete animae. This recovers the usual notion of coverings from topology. More precisely, let's call a covering $p\colon X'\rightarrow X$ \emph{strict} if the fibres $p^{-1}\{x\}$ are not only equivalent to but \emph{isomorphic} to disjoint unions of copies of $*$. Then every covering is equivalent to a strict covering and the adjunction $\abs*{\,\cdot\,}\colon \cat{Kan}\shortdoublelrmorphism \cat{Top}\noloc \Sing$ from \cref{par:GeometricRealisation} transform strict coverings of animae into usual coverings of topological spaces and vice versa.\footnote{To see that every covering $p\colon X'\rightarrow X$ is equivalent to a strict one, we need to use some details of the construction of the equivalence from \cref{thm:Straightening}\cref{enum:LeftStraightening}: Since the functor $F\colon X\rightarrow \cat{An}$ associated to $X$ lands in discrete animae, we can factor it, up to equivalence, through a functor $F_0\colon X\rightarrow \N(\cat{Set})$. By \cref{lem:SimplicialHoNerveAdjunction}, $F_0$ is induced by a functor of ordinary categories $\overline{F}_0\colon \operatorname{ho}(X)\rightarrow\cat{Set}$. If $\overline{p}\colon \Uu\rightarrow \operatorname{ho}(X)$ is the \emph{Grothendieck construction} of $\overline{F}_0$, then $\N(\overline{p})\colon \N(\Uu)\rightarrow \N(\operatorname{ho}(X))$ can be shown to be a strict covering. Hence the pullback $\N(\Uu)\times_{\N(\operatorname{ho}(X))}X\rightarrow X$ is a strict covering too and equivalent to our original covering $p$.
		
	Now suppose $p\colon X'\rightarrow X$ is a strict covering. Using that the fibres of $p$ are disjoint unions of copies of $*$ together with the lifting properties of Kan fibrations, it's easy to see that for every $\Delta^n\rightarrow X$, the pullback $\Delta^n\times_XX'$ consists of a disjoint union of copies of $\Delta^n$. This means that the preimage of any cell in the CW-complex $\abs*{X}$ under $\abs*{p}\colon \abs*{X'}\rightarrow \abs*{X}$ is a disjoint union of copies of that cell. Via some technical arguments that we omit, this shows that $\abs*{p}$ is a covering in the usual sense. Conversely, if $q\colon Y'\rightarrow Y$ is a covering of topological spaces, $q$ is Serre fibration. $\Sing$ turns Serre fibrations into Kan fibrations because $\abs*{\,\cdot\,}\colon \cat{Kan}\shortdoublelrmorphism \cat{Top}\noloc \Sing$ is a Quillen adjunction (even a Quillen equivalence) by \cref{exm:QuillenAdjunction}. Hence $\Sing q\colon \Sing Y'\rightarrow\Sing Y$ is a Kan fibration. This could also be shown by an easy direct argument (observe that the pair $(\abs*{\Delta^n},\abs*{\Lambda_i^n})$ is homeomorphic to $([0,1]^{n-1}\times[0,1],[0,1]^{n-1}\times\{0\})$ and use the homotopy lifting property of covering spaces, see \cite[Proposition~\href{https://pi.math.cornell.edu/~hatcher/AT/AT.pdf\#page=69}{1.30}]{Hatcher} for example). Since $\Sing$ preserves pullbacks and sends discrete topological spaces to disjoint unions of copies of $*$, we see that $\Sing q$ is indeed a strict covering.}
	
	We let $\cat{Cov}(X)\subseteq\cat{Left}(X)$ denote the full sub-quasi-category spanned by the coverings of $X$. Under the straightening equivalence from \cref{thm:Straightening}\cref{enum:LeftStraightening}, coverings $p\colon X'\rightarrow X$ correspond to those functors $F\colon X\rightarrow\cat{An}$ that land in discrete animae. Thus, we get an equivalence of quasi-categories
	\begin{equation*}
		\cat{Cov}(X)\overset{\simeq}{\longrightarrow}\F\bigl(X,\N(\cat{Set})\bigr)\,.
	\end{equation*}
	Now recall $\F(X,\N(\cat{Set}))\cong \N(\Fun(\operatorname{ho}(X),\cat{Set}))$ from \cref{lem:SimplicialHoNerveAdjunction}. But what is $\operatorname{ho}(X)$? We know $X\simeq \Sing {\abs*{X}}$ from the simplicial approximation theorem, hence $\operatorname{ho}(X)\simeq \operatorname{ho}(\Sing{\abs*{X}})$. By the description in \cref{par:HomotopyCategory}, the objects of $\operatorname{ho}(\Sing{\abs*{X}})$ are given by $\Sing_0{\abs*{X}}$, the points of $\abs*{X}$. The morphisms of $\operatorname{ho}(\Sing{\abs*{X}})$ are equivalence classes of $\Sing_1{\abs*{X}}$, that is, equivalence classes of paths in $X$. A quick unravelling of definitions shows that the equivalence relation is precisely for two paths to be homotopic. Hence $\operatorname{ho}(\Sing{\abs*{X}})$ is precisely the \emph{fundamental groupoid} $\Pi_1\abs{X}$ of the topological space $\abs*{X}$, and therefore $\operatorname{ho}(X)\simeq \Pi_1\abs{X}$. We have thus proved a classical classification result from topology:
\end{numpar}
\begin{thm}[Classification of covering animae]\label{thm:CoveringTheory}
	Let $X$ be an anima. Then $\cat{Cov}(X)$ is equivalent to the nerve of the ordinary category $\Fun(\Pi_1\abs{X},\cat{Set})$. In particular, there's an equivalence of ordinary categories
	\begin{equation*}
		\operatorname{ho}\bigl(\cat{Cov}(X)\bigr)\simeq \Fun\bigl(\Pi_1\abs{X},\cat{Set}\bigr)\,.
	\end{equation*}
\end{thm}
It might not be immediately obvious, but \cref{thm:CoveringTheory} comprises all you would ever want to know about covering theory. Since it fits the theme of these notes, let us spell this out in detail:

\begin{cor}\label{cor:CoveringTheory}
	Suppose $X$ is connected and let a basepoint $x\in X$ be chosen.
	\begin{alphanumerate}
		\item There's a Galois correspondence \embrace{that is, a bijection} between connected coverings of $X$ and subgroups $H\subseteq \pi_1(X,x)$.\label{enum:GaloisCorrespondence}
		\item $X$ is simply connected \embrace{that is, $\pi_1(X,x)\cong 0$} if and only if every covering $p\colon X'\rightarrow X$ admits a section $s\colon X\rightarrow X'$ if and only if every covering of $X$ splits into a disjoint union of copies of $X$.\label{enum:SplitCovering}
		\item $\cat{Cov}(X)$ contains a unique object $\widetilde{p}\colon \widetilde{X}\rightarrow X$ \embrace{up to equivalence} with the property that $\widetilde{X}$ is simply connected. This covering $\widetilde{p}\colon \widetilde{X}\rightarrow X$ is called the universal covering of $X$. If $\Aut_X(\widetilde{X})$ denotes the group of deck transformations of $\widetilde{X}$, that is, the automorphism group of $p\colon \widetilde{X}\rightarrow X$ in $\operatorname{ho}(\cat{Cov}(X))$, then $\Aut_X(\widetilde{X})\cong \pi_1(X,x)$.\label{enum:UniversalCovering}
		\item Suppose $p'\colon X'\rightarrow X$ is a covering and $x'\in X'$ is a point such that $p(x')=x$. Let $f\colon (Z,z)\rightarrow (X,x)$ be a morphism of pointed animae, where $Z$ is connected too. Then the pointed lifting problem\label{enum:LiftingPropertyOfCoverings}
		\begin{equation*}
			\begin{tikzcd}
				& (X',x')\dar["p"]\\
				(Z,z)\urar[dashed,"f'"]\rar["f"] & (X,x)
			\end{tikzcd}
		\end{equation*}
		has a solution if and only if the image of $f_*\colon \pi_1(Z,z)\rightarrow \pi_1(X,x)$ is contained in the image of $p_*\colon \pi_1(X',x')\rightarrow \pi_1(X,x)$. In this case, the lift $f'$ is necessarily unique.
	\end{alphanumerate}
\end{cor}
\begin{proof}[Proof sketch]
	Let's denote $G\coloneqq \pi_1(X,x)$ for short. The crucial observation is that $\Pi_1\abs*{X}$ is equivalent to its full sub-groupoid spanned by $\{x\}$. This full sub-groupoid consists of one element $x$ with $\Hom_{\Pi_1\abs*{X}}(x,x)\cong G$ many automorphisms. Therefore, the functor category $\Fun(\Pi_1\abs*{X},\cat{Set})$ is equivalent to the category $G\mhyph\cat{Set}$ of sets together with a left action of $G$ and we obtain an equivalence of quasi-categories
	\begin{equation*}
		\cat{Cov}(X)\simeq \N\left(G\mhyph\cat{Set}\right)\,.
	\end{equation*}
	With this observation, \cref{enum:GaloisCorrespondence} is immediate: We just have to note that a $G$-set $S$ is \emph{connected}---that is, $S$ can't be written as a disjoint union of two non-empty $G$-sets---if and only if $S$ consists of a single $G$-orbit. This in turn happens if and only if $S\cong G/H$ is the set of left cosets for some subgroup $H\subseteq G$. Part~\cref{enum:SplitCovering} is just as trivial: We have $G\cong 0$ if and only if every $G$-set $S$ has a fixed point (or in other words, the map $S\rightarrow *$ admits a $G$-equivariant section). Furthermore, $G\cong 0$ if and only if every $G$-set is a disjoint union of fixed points.
	
	For \cref{enum:UniversalCovering}, consider $G$ with the natural action of itself as a $G$-set. We let $\widetilde{p}\colon \widetilde{X}\rightarrow X$ be the associated covering. Then $\Aut_X(\widetilde{X})\cong \Aut_{G\mhyph\cat{Set}}(G,G)\cong G$. Furthermore, it's easy to see that $\widetilde{X}$ is simply connected. Indeed, if $q\colon Y\rightarrow \widetilde{X}$ is a covering of $\widetilde{X}$, then $\widetilde{p}\circ q\colon Y\rightarrow X$ is a covering of $X$ and so $q$ determines a morphism in $\cat{Cov}(X)$. This morphism corresponds to a morphism $S\rightarrow G$ of $G$-sets. Every such morphism has a section, which shows that every covering of $\widetilde{X}$ has a section and so $\widetilde{X}$ is simply connected by \cref{enum:SplitCovering}. Conversely, suppose $p\colon X'\rightarrow X$ is a covering of $X$ such that $X'$ is simply connected. Let $S$ be the associated $G$-set; by \cref{enum:GaloisCorrespondence}, we must have $S\cong G/H$ for some subgroup $H\subseteq G$. Let $\pi\colon G\rightarrow G/H$ be the canonical projection. By abuse of notation, $\pi\colon \widetilde{X}\rightarrow X'$ also denotes the associated morphism in $\cat{Cov}(X)$. It's easy to see that $\pi$ is a covering of $X'$.\footnote{We only need to show that $\pi$ is a Kan fibration, because the fact that the fibres of $\pi$ are discrete follows easily from the fact that the fibres of $p\colon X'\rightarrow X$ and $p\circ \pi=\widetilde{p}\colon \widetilde{X}\rightarrow X$ are both discrete. To show that $\pi$ is a Kan fibration, consider any simplex $\sigma\colon \Delta^n\rightarrow X'$ and its image $p\circ\sigma\colon \Delta^n\rightarrow X$ in $X$. To solve any horn lifting problem involving $\sigma$, we may as well base change $\widetilde{X}$ and $X$ along $p\circ\sigma$. But the pullbacks $\Delta^n\times_{p\circ\sigma,X,p}X'$ and $\Delta^n\times_{p\circ\sigma,X,\widetilde{p}}\widetilde{X}$ are both disjoint unions of copies of $\Delta^n$ because we assume $p\colon X'\rightarrow X$ and $\widetilde{p}\colon \widetilde{X}\rightarrow X$ to be coverings. So the new horn lifting problem has a solution for trivial reasons.} Since $X'$ is simply connected, $\pi$ must admit a section $s\colon X'\rightarrow \widetilde{X}$. But then $\pi\colon G\rightarrow G/H$ also admits a section, which is only possible if $H$ is the trivial subgroup.
	
	For \cref{enum:LiftingPropertyOfCoverings}, the \enquote{only if}-part is trivial. For the \enquote{if}-part, we may assume that $X'$ is connected; otherwise just replace $X'$ by the connected component of $x'$. Then $X'$ corresponds to a $G$-set of the form $G/H$. Furthermore, we must have $\pi_1(X',x')\cong H$. To see this, construct a map $\pi\colon \widetilde{X}\rightarrow X'$ as in the proof of \cref{enum:UniversalCovering}. This is necessarily the universal covering of $X'$. Then $\Aut_{X'}(\widetilde{X})\subseteq \Aut_X(\widetilde{X})\cong G$ is the subgroup of those automorphisms $\tau\colon G\rightarrow G$ that satisfy $\pi\circ\tau=\pi$. Hence indeed $\Aut_{X'}(\widetilde{X})$. To solve our lifting problem, note that a lift of $f$ is equivalent to a section of the pullback covering $p_Z\colon Z\times_XX'\rightarrow Z$. Since straightening/unstraightening transforms pullbacks into precompositions (see \cref{thm:Straightening}\cref{enum:CocartesianStraightening}), $p_Z$ corresponds to the set $G/H$ with $\pi_1(Z,z)$-action induced by $f_*\colon \pi_1(Z,z)\rightarrow \pi_1(X,x)=G$. By assumption, the image of $f_*$ is contained in $H$, so the action is trivial. Hence $G/H$ is a disjoint union of fixed points; each fixed point determines a section of $p_Z$. Together with the requirement $f'(z)=x'$, we then get a unique solution.
\end{proof}

\subsection{Digression: Homotopy pullbacks}\label{subsec:HomotopyPullbacks}
After getting acquainted with straightening/unstraightening, our next goal is to prove Yoneda's lemma. But before we can do that, we need to go on a brief detour about \emph{homotopy pullbacks}. These guys will allow us to compute $\Hom_{\Ar(\Cc)}$ and $\Hom_{\Cc_{/y}}$ in terms of $\Hom_\Cc$ for any quasi-category $\Cc$, which will be used countless times throughout the rest of this text. 
\begin{numpar}[\enquote{Definition}.]\label{def:HomotopyPullback}
	Suppose we're given a diagram of Kan complexes or quasi-categories
	\begin{equation*}
		\begin{tikzcd}
			X\rar\dar & X'\dlar[phantom,"\Longleftarrow"{sloped}]\dar\\
			Y\rar & Y'
		\end{tikzcd}\quad\text{or}\quad
		\begin{tikzcd}
			\Cc\rar\dar & \Cc'\dlar[phantom,"\Longleftarrow"{sloped}]\dar\\
			\Dd\rar & \Dd'
		\end{tikzcd}
	\end{equation*}
	that commutes up to homotopy or up to natural equivalence, respectively (so that the corresponding diagram in $\cat{An}$ or $\cat{Cat}_\infty$-commutes; see the discussion in \cref{exm:SimplicialNerve}). We say that the diagram is a \emph{homotopy pullback} if its image in $\cat{An}$ or $\cat{Cat}_\infty$ is a pullback in the $\infty$-categorical sense (which we will only define in \cref{def:Colimits}\cref{enum:Colimit} below).
	
	As stated, this \enquote{definition} doesn't lead to vicious circles, but once you try to prove anything with it, it surely does. So let's just say there is a way to define homotopy pullbacks properly, in any model category. This is done in any sensible treatment of model categories; see \cite[Definition~{\href{https://cisinski.app.uni-regensburg.de/CatLR.pdf\#thm.2.3.22}{2.3.22}}]{Cisinski} or \cite[Definition~VIII.49(vi)]{HigherCatsII}. For the Kan--Quillen model structure and the Joyal model structure on $\cat{sSet}$ (see \cref{exm:KanQuillenModelStructure,exm:JoyalModelStructure}) the above \enquote{definition} is recovered, albeit not obviously so.\hfill$\blacksquare$
\end{numpar}
\begin{numpar}[Model category fact.]\label{par:HomotopyPullback}
	A pullback diagram in a model category is automatically a homotopy pullback diagram if all objects are fibrant and at least one of the legs is a fibration. See \cite[Proposition~{\href{https://cisinski.app.uni-regensburg.de/CatLR.pdf\#thm.2.3.27}{2.3.27}}]{Cisinski} for a proof. In the examples at hand, we deduce:
	\begin{alphanumerate}
		\item A pullback of Kan complexes is automatically a homotopy pullback if at least one if its legs is a Kan fibration.\label{enum:HomotopyPullbackOfKanComplexes}
		\item A pullback of quasi-categories is automatically a homotopy pullback if at least one of its legs is an \emph{isofibration} (or \emph{categorical fibration} in Lurie's terminology). That is, it is an inner fibration and has the lifting property against $\{0\}\rightarrow \N(J)$. Here $J\coloneqq \{\InlineJ\}$ is the category of two objects and a pair of mutually inverse isomorphisms between them, so lifting against $\{0\}\rightarrow \N(J)$ means that we can lift equivalences.\label{enum:HomotopyPullbackOfQuasicategories}
	\end{alphanumerate}
	So homotopy pullbacks, or equivalently, pullbacks in $\cat{An}$ or $\cat{Cat}_\infty$ can be computed as follows: First write down the diagram as a diagram of simplicial sets. Then replace one of its legs by an equivalence followed by a Kan fibration or an isofibration; this can be done by \cref{lem:SmallObjectArgument}.\footnote{To replace a functor of quasi-categories by an equivalence followed by an isofibration, a small variation of the argument from \cref{lem:SmallObjectArgument} is needed. The problem is that $\N(J)$ has countably many non-degenerate simplices, whereas $\Lambda_i^n$ had only finitely many. This has the effect that it's no longer sufficient to iterate the construction of $S(f)$ countably many times. To fix this, we simply do $\aleph_1$ many iterations instead of $\aleph_0$ many.} Finally, take the usual pullback along that Kan or isofibration.
	
	As a consequence, with some care, homotopy pullbacks can usually be manipulated in the same way as ordinary pullbacks. We'll use this freely throughout the rest of this section.\hfill$\blacksquare$
\end{numpar}
\begin{lem}\label{lem:HomInArrowCategories}
	Let $\Cc$ be a quasi-category and let $\alpha\colon x\rightarrow y$, $\alpha'\colon x'\rightarrow y'$ be morphisms in $\Cc$. Then there exists a homotopy pullback diagram of animae
	\begin{equation*}
		\begin{tikzcd}[baseline=(H.base)]
			\Hom_{\Ar(\Cc)}\bigl((\alpha\colon x\rightarrow y),(\alpha'\colon x'\rightarrow y')\bigr)\drar[hpullback]\dar\rar & \Hom_\Cc(y,y')\dar["\alpha^*"]\\
			\Hom_\Cc(x,x')\rar["\alpha'_*"] & |[alias=H]| \Hom_\Cc(x,y') 
		\end{tikzcd}
	\end{equation*}
	Here the pre- and postcomposition maps $\alpha^*$ and $\alpha_*'$ are defined by means of the functors $\Hom_\Cc(x,-)\colon \Cc\rightarrow\cat{An}$ and $\Hom_\Cc(-,y')\colon \Cc^\op\rightarrow \cat{An}$ from \cref{exm:Straightening}\cref{enum:SliceLeftFibration}.\hfill$\blacksquare$
\end{lem}
\begin{rem}
	The only proof I know is in Fabian's handwritten notes \cite[Proposition~VIII.5]{HigherCatsII}. It's not particularly difficult: You work directly with the definition of $\Hom_{\Ar(\Cc)}$ to write it as an honest pullback in which both legs are Kan fibrations. Then you check that the corners of the pullback are homotopy equivalent to $\Hom_\Cc(x,x')$, $\Hom_\Cc(y,y')$, and $\Hom_\Cc(x,y')$, respectively. Along the way, you should also check (but this will be quite apparent from the description in~\cref{par:StraighteningOnMorphisms}) that the maps you obtain are really the pre- and postcomposition maps $\alpha^*$ and $\alpha'_*$ as defined above. 
	
	Also note that in the case where $\Cc$ is an ordinary category we recover our original description of morphisms in an arrow category from \cref{con:1ArrowCategory}. Indeed, in this case all Hom animae are discrete (that is, sets), hence the ambiguity of $\alpha^*$ and $\alpha'_*$ up to homotopy goes away. Furthermore, any map of discrete Kan complexes is automatically a Kan fibration, so the homotopy pullback is a pullback on the nose by model category fact~\cref{par:HomotopyPullback}\cref{enum:HomotopyPullbackOfKanComplexes}. If you think about this pullback briefly, that's exactly how morphisms in $\Ar(\Cc)$ are described.
\end{rem}
\begin{cor}\label{cor:HomInSliceCategories}
	Let $\Cc$ be a quasi-category, let $y\in \Cc$ be an object, and let $\alpha\colon x\rightarrow y$ and $\alpha'\colon x'\rightarrow y$ be morphisms in $\Cc$. Then there exists a homotopy pullback diagram of animae
	\begin{equation*}
		\begin{tikzcd}
			\Hom_{\Cc_{/y}}\bigl((\alpha\colon x\rightarrow y),(\alpha'\colon x'\rightarrow y)\bigr)\drar[hpullback]\dar\rar & \{\alpha\}\dar\\
			\Hom_\Cc(x,x')\rar["\alpha'_*"] & \Hom_\Cc(x,y)
		\end{tikzcd}
	\end{equation*}
	Here the postcomposition map $\alpha'_*$ is again defined as in \cref{lem:HomInArrowCategories}.
\end{cor}
\begin{proof}[Proof sketch]
	We use the following pullback square from \cref{par:HomInQuasiCategories}:
	\begin{equation*}
		\begin{tikzcd}
			\Cc_{/y}\rar\dar\drar[pullback] & \Ar(\Cc)\dar\\
			\{y\}\rar & \Cc
		\end{tikzcd}
	\end{equation*}
	In general, its straightforward to check that Hom in a pullback of quasi-categories is the pullback of Hom in each component. Then we plug in \cref{lem:HomInArrowCategories} and check that everything works out with homotopy pullbacks too. For a complete proof, see \cite[Corollary~VIII.6]{HigherCatsII}, where Fabian deduces the result from \cref{lem:HomInArrowCategories} as we do here, or \cite[Lemma~\HTTthm{5.5.5.12}]{HTT}, in which Lurie gives a direct argument.
\end{proof}
Homotopy pullbacks can be used to give an equivalent characterisation of cocartesian edges. In fact, the terminology \emph{\embrace{co}cartesian morphism} was originally introduced in the classical theory of stacks (see \cref{par:Stacks}), where it was defined using the criterion from \cref{lem:CocartesianMorphisms} below.\footnote{Of course, in the classical theory the homotopy pullback of animae was replaced by an ordinary pullback of sets. But observe that a homotopy pullback of simplicial sets, in which all participating objects are disjoint unions of copies of $*$, must automatically be an ordinary pullback. The reason is that any map between two such simplicial sets is automatically a Kan fibration and any homotopy equivalence is automatically an isomorphism.} The equivalence with \cref{def:Cocartesian}\cref{enum:CocartesianMorphism} is due to Lurie; see \cite[Proposition~\HTTthm{2.4.4.3}]{HTT} or \cite[Corollary~3.1.16]{Land}.
\begin{lem}\label{lem:CocartesianMorphisms}
	Let $p\colon \Uu\rightarrow\Cc$ be an inner fibration of quasi-categories. Then a morphism $\varphi\colon u\rightarrow v$ is $p$-cocartesian if and only if the following diagram is a homotopy pullback of animae for every $w\in\Uu$:
	\begin{equation*}
		\begin{tikzcd}
			\Hom_\Uu(v,w)\dar["p"']\rar["\varphi^*"]\drar[hpullback] & \Hom_\Uu(u,w) \dar["p"]\\
			\Hom_\Cc\bigl(p(v),p(w)\bigr)\rar["p(\varphi)^*"] & \Hom_\Cc\bigl(p(u),p(w)\bigr)
		\end{tikzcd}
	\end{equation*}
	Here the precomposition maps $\varphi^*$ and $p(\varphi)^*$ are once again defined as in \cref{lem:HomInArrowCategories}.\hfill$\blacksquare$
\end{lem}
To finish our excursion into homotopy pullbacks, we introduce a variant of cocartesian fibrations that is occasionally quite useful, but will only play a very minor role in these notes.
\begin{defi}\label{def:LocallyCocartesian}
	Let $p\colon \Uu\rightarrow \Cc$ be an inner fibration of quasi-categories.
	\begin{alphanumerate}
		\item Let $\varphi\colon u\rightarrow v$ be a morphism in $\Uu$, corresponding to a map $\varphi\colon \Delta^1\rightarrow \Uu$. We call $\varphi$ a \emph{locally $p$-cocartesian morphism} if it is $p_{p\circ \varphi}$-cocartesian, where $p_{p\circ \varphi}\colon \Delta^1\times_{p\circ \varphi,\Cc}\Uu\rightarrow \Delta^1$ denotes the pullback of $p$ along $p\circ \varphi\colon \Delta^1\rightarrow \Cc$.
		\item We call $p$ a \emph{locally cocartesian fibration} if the pullback $p_\alpha\colon \Delta^1\times_{\alpha,\Cc}\Uu\rightarrow \Delta^1$ is a cocartesian fibration for every $\alpha\colon \Delta^1\rightarrow \Cc$.
	\end{alphanumerate}
	There are dual notions of \emph{locally $p$-cartesian morphisms} and \emph{locally cartesian fibrations}.
\end{defi}
\begin{cor}\label{cor:LocallyCocartesianComposition}
	Let $p\colon \Uu\rightarrow \Cc$ be a locally cocartesian fibration. Then $p$ is a cocartesian fibration if and only if the set of locally $p$-cartesian morphisms is closed under composition.
\end{cor}
\begin{proof}[Proof sketch]
	First assume that $p$ is a cocartesian fibration. Then cocartesian lifts are unique up to equivalence, as we've seen in \cref{par:StraighteningOnMorphisms}. A morphism being cocartesian is preserved under pullbacks. Hence every $p$-cocartesian morphism $\varphi$ is also $p_{p\circ \varphi}$-cocartesian. The above-mentioned uniqueness then implies that every locally $p$-cocartesian morphism must also be $p$-cocartesian. So locally $p$-cocartesian morphisms being closed under composition reduces to the same assertion about $p$-cocartesian morphisms, which is easy to check (for example, using \cref{lem:CocartesianMorphisms}).\footnote{Closedness under composition is also clear intuitively: If $\beta\colon y\rightarrow z$ is another morphism in  $\Cc$ and we compose a $p$-cocartesian lift of $\alpha$ with a $p$-cocartesian lift of $\beta$, then we have connected an element of $F(x)$ with its image under $F(\beta)\circ F(\alpha)\simeq F(\beta\circ\alpha)\colon F(x)\rightarrow F(z)$. And that's a $p$-cocartesian lift of $\beta\circ \alpha$.}
	
	Conversely, assume that locally $p$-cocartesian morphisms are closed under compositions. Let $\varphi\colon u\rightarrow v$ be locally $p$-cocartesian. We wish to show that $\varphi$ is also $p$-cocartesian. To this end, we'll verify that the diagram from \cref{lem:CocartesianMorphisms} is a homotopy pullback for all $w\in\Uu$. Using \cref{thm:Whitehead}, \cref{lem:LongExactFibrationSequence}, and the five lemma (plus \cref{rem:ExactnessInLowDegrees}), it's enough to show that for every $\alpha\in \Hom_\Cc(p(v),p(w))$, the induced map on homotopy fibres over $\alpha$ is a homotopy equivalence. So fix $\alpha\colon p(v)\rightarrow p(w)$ in $\Cc$. Let $\Uu_\alpha\coloneqq \Delta^1\times_{\alpha,\Cc}\Uu$ be the fibre over $\alpha$. Furthermore, let $\psi\colon v\rightarrow v'$ be a locally $p$-cocartesian lift of $\alpha$ (so that $p(v')=p(w)$). We claim that the homotopy-commutative diagram
	\begin{equation}\label{eq:HomotopyFibre}\tag{$*$}
		\begin{tikzcd}
			\Hom_{\Uu_\alpha}(v',w)\dar\rar["\psi^*"]\drar[hcommutes] & \Hom_\Uu(v,w)\rar["\varphi^*"]\dar["p"]\drar[hcommutes] & \Hom_\Uu(u,w)\dar["p"]\\
			\bigl\{\id_{p(w)}\bigr\}\rar["\alpha^*"] & \Hom_\Cc\bigl(p(v),p(w)\bigr)\rar["p(\varphi)^*"] & \Hom_\Cc\bigl(p(u),p(w)\bigr)
		\end{tikzcd}
	\end{equation}
	exhibits $\Hom_{\Uu_{p(w)}}(v',w)$ both as the homotopy fibre of $\Hom_\Uu(v,w)\rightarrow \Hom_\Cc(p(v),p(w))$ over $\{\alpha\}$ and the homotopy fibre of $\Hom_\Uu(u,w)\rightarrow\Hom_\Cc(p(u),p(w))$ over $\{\alpha\circ p(\varphi)\}$. As explained above, if we could show this, we would be done.
	
	To see this, observe that $\Hom$ animae in pullbacks are given as pullbacks of $\Hom$ animae in the respective factors (which is straightforward to see from \cref{par:HomInQuasiCategories} and we'll see a more general assertion in \cref{lem:HomInLimits}\cref{enum:HomInLimits}). Combining this with the assumption that $\psi$ is locally $p$-cocartesian and \cref{lem:CocartesianMorphisms}, we see that the following diagram consists of a homotopy pullback square and a pullback square on the nose:
	\begin{equation*}
		\begin{tikzcd}
			\Hom_{\Uu_\alpha}(v',w)\dar\rar["\psi^*"]\drar[hpullback] & \Hom_{\Uu_\alpha}(v,w)\rar\dar["p"]\drar[pullback] & \Hom_\Uu(v,w)\dar["p"]\\
			\Hom_{\Delta^1}(0,0)\rar & \Hom_{\Delta^1}(0,1)\rar["\alpha"] & \Hom_\Cc\bigl(p(v),p(w)\bigr)
		\end{tikzcd}
	\end{equation*}
	Hence the outer rectangle must be a homotopy pullback too. Since $\Hom_{\Delta^1}(0,0)\simeq *\simeq \{\id_{p(w)}\}$, it follows that the left square in \cref{eq:HomotopyFibre} is a homotopy pullback. Since, by assumption, any choice of composition $\psi\circ \varphi$ is locally $p$-cocartesian, the same argument can be used to show that the outer rectangle in \cref{eq:HomotopyFibre} is a homotopy pullback too. This proves that  $\Hom_{\Uu_{p(w)}}(v',w)$ agrees with both homotopy fibres in question and we're done.
\end{proof}

\subsection{Yoneda's lemma}\label{subsec:Yoneda}
\begin{thm}[Quasi-categorical Yoneda lemma]\label{thm:Yoneda}
	Let $\Cc$ be a quasi-category, $x\in \Cc$ an object, and $E\colon \Cc\rightarrow \cat{An}$ a functor. Then evaluation at $\id_x$ induces an equivalence of animae
	\begin{equation*}
		\ev_{\id_x}\colon \Hom_{\F(\Cc,\cat{An})}\bigl(\Hom_\Cc(x,-),E\bigr)\overset{\simeq}{\longrightarrow} E(x)\,.
	\end{equation*}
	Here $\Hom_\Cc(x,-)\colon \Cc\rightarrow \cat{An}$ is the functor from \cref{exm:Straightening}\cref{enum:SliceLeftFibration}. A dual statement holds for the contravariant Hom functor $\Hom_\Cc(-,x)$ and $\F(\Cc^\op,\cat{An})$.
\end{thm}
For the proof we need, more or less, the fact that $*\simeq \{\id_x\}\rightarrow \Cc_{x/}$ is a left anodyne map. This is proved in \cite[Lemma~4.1.4]{Land} or \cite[Corollary~D.7]{HigherCatsII}. Their proofs use some constructions we haven't mentioned yet, but we can circumvent these at the cost of showing a slightly weaker statement, which will still be sufficient for our purposes.
\begin{lem}\label{lem:WeaklyLeftAnodyne}
	Let $\Cc$ be a quasi-category and $x\in\Cc$ an object. For every left fibration $X\rightarrow \Cc$, the natural map
	\begin{equation*}
		\F\bigl(\Cc_{x/},X\bigr)\overset{\simeq}{\longrightarrow}\F(*,X)\times_{\F(*,\Cc)}\F\bigl(\Cc_{x/},\Cc\bigr)
	\end{equation*}
	is an equivalence of quasi-categories.
\end{lem}
\begin{proof}[Proof sketch]
	We call a cofibration $A\rightarrow B$ of simplicial sets \emph{weakly left anodyne} if the natural map $\F(B,X)\rightarrow \F(A,X)\times_{\F(A,\Cc)}\F(B,\Cc)$ is an equivalence of quasi-categories for all left fibrations $X\rightarrow \Cc$. Every left anodyne map is weakly left anodyne by \cref{cor:FKanFibration}. Our goal is to show that $*\rightarrow \Cc_{x/}$ is weakly left anodyne.
	
	The idea to show this is as follows: Intuitively, it's clear that $\id_x\in \Cc_{x/}$ is an initial object. Therefore, there should be a natural transformation $\eta\colon \const\{\id_x\}\Rightarrow \id_{\Cc_{x/}}$. So $\eta$ witnesses the fact that $*\rightarrow \Cc_{x/}$ is a homotopy equivalence---except that $\Cc_{x/}$ is not an anima. Still, as we'll see, $\eta$ can then be leveraged to show the desired statement.
	
	To construct $\eta$, we can proceed as follows: The identity on $\Ar(\Cc)$ is adjoint to a map $\Ar(\Cc)\times\Delta^1\rightarrow \Cc$. Combining this with the map $\Cc\simeq \F(*,\Cc)\rightarrow \F(\Delta^1,\Cc)\simeq \Ar(\Cc)$ induced by $\Delta^1\rightarrow *$ provides a map $\Ar(\Cc)\times\Delta^1\rightarrow \Ar(\Cc)$; restricting this to $\Cc_{x/}$ yields the desired map $\eta\colon \Cc_{x/}\times\Delta^1\rightarrow \Cc_{x/}$. Putting $\Cc_{x/}^\triangleleft\coloneqq (\Cc_{x/}\times\Delta^1)/(\Cc_{x/}\times\{0\})$, it's easy to check that $\eta$ factors through a map $\ov\eta\colon \Cc_{x/}^\triangleleft\rightarrow \Cc_{x/}$. The map $*\rightarrow \Cc_{x/}$ induces a map $\Delta^1\simeq *^\triangleleft\rightarrow \Cc_{x/}^\triangleleft$. This fits into a diagram
	\begin{equation*}
		\begin{tikzcd}
			*\rar\dar\drar[commutes] & \Delta^1\rar\dar\drar[commutes] & *\dar\\
			\Cc_{x/}\rar & \Cc_{x/}^\triangleleft\rar["\ov\eta"] & \Cc_{x/}
		\end{tikzcd}
	\end{equation*}
	which exhibits $*\rightarrow \Cc_{x/}$ as a retract of $\Delta^1\rightarrow \Cc_{x/}^\triangleleft$. Hence to show that $*\rightarrow \Cc_{x/}$ is weakly left anodyne, it's enough to show the same for $\Delta^1\rightarrow \Cc_{x/}^\triangleleft$. For this, note that $\{0\}\rightarrow \Delta^1$ is left anodyne, and so is the composition $\{0\}\rightarrow \Delta^1\rightarrow \Cc_{x/}^\triangleleft$ since it is a pushout of $\Cc_{x/}\times\{0\}\rightarrow \Cc_{x/}\times \Delta^1$. It's easy to check that being weakly left anodyne is closed under 2-out-of-3, and so $\Delta^1\rightarrow \Cc_{x/}^\triangleleft$ must be weakly left anodyne too.
\end{proof}
\begin{proof}[Proof sketch of \cref{thm:Yoneda}]
	Let $p\colon \Uu\rightarrow\Cc$ be the unstraightening of $E\colon \Cc\rightarrow \cat{An}$. Then
	\begin{align*}
		\Hom_{\F(\Cc,\cat{An})}\bigl(\Hom_\Cc(x,-),E\bigr)&\simeq \Hom_{\cat{Left}(\Cc)}\bigl(t\colon \Cc_{x/}\rightarrow \Cc,p\colon \Uu\rightarrow\Cc\bigr)\\
		&\simeq \Hom_{\cat{Cat}_{\infty/\Cc}}\bigl(t\colon \Cc_{x/}\rightarrow \Cc,p\colon \Uu\rightarrow\Cc\bigr)
	\end{align*}
	using the straightening equivalence (\cref{thm:Straightening}\cref{enum:LeftStraightening}) and the fact that $\cat{Left}(\Cc)\rightarrow{\cat{Cat}_\infty}_{/\Cc}$ is fully faithful. By \cref{cor:HomInSliceCategories}, the diagram
	\begin{equation*}
		\begin{tikzcd}
			\Hom_{\cat{Cat}_{\infty/\Cc}}\bigl((t\colon \Cc_{x/}\rightarrow \Cc),(p\colon \Uu\rightarrow\Cc)\bigr)\rar\dar\drar[hpullback] & *\dar\\
			\Hom_{\cat{Cat}_\infty}\bigl(\Cc_{x/},\Uu\bigr)\rar & \Hom_{\cat{Cat}_\infty}\bigl(\Cc_{x/},\Cc\bigr)
		\end{tikzcd}
	\end{equation*}
	is a homotopy pullback, where $*$ is sent to $t\colon \Cc_{x/}\rightarrow \Cc$. Now recall from \cref{thm:CordierPorter} that $\Hom_{\cat{Cat}_\infty}(-,-)\simeq \core \F(-,-)$. Furthermore, we claim that the following diagrams are homotopy pullbacks:
	\begin{equation*}
		\begin{tikzcd}
			\F\bigl(\Cc_{x/},\Uu\bigr)\rar\dar\drar[hpullback] & \F\bigl(\Cc_{x/},\Cc\bigr)\dar\\
			\Uu\rar & \Cc
		\end{tikzcd}\quad\text{and}\quad \begin{tikzcd}
			\core\F\bigl(\Cc_{x/},\Uu\bigr)\rar\dar\drar[hpullback] & \core\F\bigl(\Cc_{x/},\Cc\bigr)\dar\\
			\core(\Uu)\rar & \core (\Cc)
		\end{tikzcd}
	\end{equation*}
	For the left one, we use \cref{lem:WeaklyLeftAnodyne} and model category fact~\cref{par:HomotopyPullback}\cref{enum:HomotopyPullbackOfQuasicategories}: We only need to check that $p\colon \Uu\rightarrow\Cc$ is an isofibration. But any left fibration has lifting against $\{0\}\rightarrow \N(J)$, as this map is left anodyne (by an explicit horn filling argument). To see that the right square is a homotopy pullback too, we need to check that $\core\colon \cat{QCat}\rightarrow \cat{Kan}$ preserves homotopy pullbacks. The deeper reason for this is of course that $\core\colon \cat{Cat}_\infty\rightarrow\cat{An}$ is right adjoint to the inclusion $\cat{An}\subseteq\cat{Cat}_\infty$ (see \cref{exm:Adjunctions}\cref{enum:AnToCatInfty}). For a direct argument, we can use \cref{par:HomotopyPullback}: By an easy application of Joyal's lifting theorem (\cref{thm:JoyalLifting}), $\core$ transforms isofibrations into Kan fibrations and then by arguments as in the proof of \cref{thm:EquivalenceFullyFaithfulEssentiallySurjective} we can show that $\core$ preserves pullbacks of quasi-categories in which at least one leg is an isofibration.
	
	Combining the homotopy pullbacks so far (this kind of manipulation is fine by~\cref{par:HomotopyPullback}), we find that
	\begin{equation*}
		\begin{tikzcd}
			\Hom_{\cat{Cat}_{\infty/\Cc}}\bigl((t\colon \Cc_{x/}\rightarrow \Cc),(p\colon \Uu\rightarrow\Cc)\bigr)\rar\dar\drar[hpullback] & *\dar\\
			\core(\Uu)\rar & \core(\Cc)
		\end{tikzcd}
	\end{equation*}
	is a homotopy pullback, where $*$ is sent to $x\in\core (\Cc)$. As observed above, $\Uu\rightarrow\Cc$ is an isofibration and so $\core (\Uu)\rightarrow (\Cc)$ is a Kan fibration. Thus, the homotopy pullback agrees with the ordinary pullback. Now $\core(\Uu)\times_{\core(\Cc)}\{x\}\cong \core(\Uu\times_\Cc\{x\})\cong \Uu\times_\Cc\{x\}\simeq F(x)$ using that the fibres $\Uu\times_\Cc\{x\}\eqqcolon p^{-1}\{x\}$ of $p$ are animae and compute the values of $F$. This is what we wanted to prove.
\end{proof}
Finally, we would like to construct the functor $\Hom_\Cc\colon \Cc^\op\times\Cc\rightarrow\cat{An}$. There are several ways to do this and we'll outline two possibilities in \cref{con:HomInTwoVariables,con:HomTwAr} below. We won't prove that they are equivalent (they are), but we won't ever need that either. So you can just choose whichever is your favourite.
\begin{con}\label{con:HomInTwoVariables}
	Consider the functor $\Cc_{/-}\colon \Cc\rightarrow \cat{Cat}_\infty$ from \cref{exm:Straightening}\cref{enum:ArCocartesianFibration}. For every $x\in \Cc$ there is a natural functor $\Cc_{/x}\rightarrow \Cc$, so we would expect that $\Cc_{/-}$ lifts to a functor $\Cc_{/-}\colon \Cc\rightarrow \cat{Cat}_{\infty/\Cc}$. To construct such a lift, first note that for all quasi-categories $\Dd$ and all $y\in \Dd$, we have an equivalence  $\F(\Cc,\Dd_{/y})\simeq\F(\Cc,\Dd)_{/\const y}$ (in fact, even an isomorphism of simplicial sets), as can be checked by a simple calculation. Furthermore, \cref{thm:Straightening}\cref{enum:CocartesianStraightening} and \cref{exm:Straightening}\cref{enum:ProjectionsStraightenToConstantFunctors} imply that $\F(\Cc,\cat{Cat}_\infty)_{/\const \Cc}\simeq \cat{Cocart}(\Cc)_{/(\pr_2\colon\Cc\times \Cc\rightarrow \Cc)}$ holds. So to lift our functor $\Cc_{/-}$ to $\cat{Cat}_{\infty/\Cc}$, it suffices to observe that the following diagram is a morphism of cocartesian fibrations over $\Cc$:
	\begin{equation*}
		\begin{tikzcd}
			\Ar(\Cc)\ar[r,"{(s,t)}"]\dar["\smash{t}\vphantom{\pr_2}"']\dar[phantom,""{name=A}]\arrow[from=1-2,to=A,commutes,pos=0.7]& \Cc\times\Cc\dlar["\pr_2"]\\
			\Cc &
		\end{tikzcd}
	\end{equation*}
	By the dual of \cref{cor:HomAnima}, $\Cc_{/x}\rightarrow \Cc$ is a right fibration for all $x\in \Cc$, hence $\Cc_{/-}\colon \Cc\rightarrow \cat{Cat}_{\infty/\Cc}$ takes values in the full sub-quasi-category $\cat{Right}(\Cc)\subseteq \cat{Cat}_{\infty/\Cc}$. Since $\cat{Right}(\Cc)\simeq \F(\Cc^\op,\cat{An})$ by the dual of \cref{thm:Straightening}\cref{enum:LeftStraightening}, we obtain a functor
	\begin{equation*}
		\Yo_\Cc\colon \Cc\xrightarrow{\Cc_{/-}} \cat{Right}(\Cc)\xrightarrow{\operatorname{St}^{(\mathrm{right})}}\F(\Cc^\op,\cat{An})\,,
	\end{equation*}
	which we take as our definition of the Yoneda embedding (we'll see in \cref{cor:YonedaEmbeddingFullyFaithful} below that it is indeed fully faithful). Finally, we let $\Hom_\Cc\colon \Cc^\op\times\Cc\rightarrow \cat{An}$ be the image of $\Yo_\Cc$ under the \enquote{currying} equivalence $\F(\Cc,\F(\Cc^\op,\cat{An}))\simeq \F(\Cc^\op\times \Cc,\cat{An})$. We define the \emph{twisted arrow quasi-category} $(s,t)\colon \TwAr(\Cc)\rightarrow\Cc^\op\times\Cc$ to be the unstraightening of $\Hom_\Cc\colon \Cc^\op\times\Cc\rightarrow\cat{An}$ via \cref{thm:Straightening}\cref{enum:LeftStraightening}.
\end{con}
\cref{con:HomInTwoVariables} has the advantage that it allows for a straightforward proof of \cref{cor:YonedaEmbeddingFullyFaithful} below. On the downside, however, the unstraightening $\TwAr(\Cc)$ is very inexplicit in this description. So alternatively, one can write down an explicit simplicial model for $(s,t)\colon\TwAr(\Cc)\rightarrow \Cc^\op\times\Cc$ and define $\Hom_\Cc$ to be its straightening.
\begin{con}\label{con:HomTwAr}
	For an ordinary category $\Cc$, we define $\TwAr(\Cc)$ to be the ordinary category whose objects are arrows $\alpha\colon x\rightarrow y$ in $\Cc$ and whose morphisms $(\alpha\colon x\rightarrow y)\rightarrow (\alpha'\colon x'\rightarrow y')$ are \enquote{twisted} commutative squares
	\begin{equation*}
		\begin{tikzcd}
			x\dar["\alpha"']\drar[commutes] & x'\lar\dar["\alpha'"]\\
			y\rar & y'
		\end{tikzcd}
	\end{equation*}
	There are functors $s\colon \TwAr(\Cc)\rightarrow \Cc^\op$ and $t\colon \TwAr(\Cc)\rightarrow \Cc$ that send $\alpha\colon x\rightarrow y$ to $x$ and $y$, respectively. For a quasi-category $\Cc$, we re-define $\TwAr(\Cc)$ to be the simplicial set given by
	\begin{equation*}
		\TwAr(\Cc)_n\coloneqq \Hom_{\cat{sSet}}
		\bigl(\N\bigl([n]^\op\star [n]\bigr),\Cc\bigr)\,.
	\end{equation*}
	Here $[n]^\op\star[n]$ is the \emph{join} of the totally ordered sets $[n]^\op$ and $[n]$. In general, if $\Ii$ and $\Jj$ are ordinary categories, we let $\Ii\star\Jj$ be the category obtained from the disjoint union $\Ii\sqcup\Jj$ by adding precisely one morphism $i\rightarrow j$ for all $i\in\Ii$, $j\in\Jj$.
	
	The natural maps $(\Delta^n)^\op\cong \N([n]^\op)\rightarrow \N([n]^\op\star [n])$ and $\Delta^n\cong \N([n])\rightarrow \N([n]^\op\star[n])$ induce maps of simplicial sets $s\colon \TwAr(\Cc)\rightarrow \Cc^\op$ and $t\colon\TwAr(\Cc)\rightarrow \Cc$. It turns out that $(s,t)\colon \TwAr(\Cc)\rightarrow \Cc^\op\times \Cc$ is always a left fibration; in particular, $\TwAr(\Cc)$ is a quasi-category. See \cite[Proposition~\HAthm{5.2.1.3}]{HA} or \cite[Proposition~4.2.4]{Land} for proofs. We can then define $\Hom_\Cc\colon \Cc^\op\times \Cc\rightarrow \cat{An}$ to be the straightening of $(s,t)\colon \TwAr(\Cc)\rightarrow \Cc^\op\times \Cc$.
\end{con}
\begin{rem}\label{rem:TwAr}
	If $\Cc$ is an ordinary category, then $\N(\TwAr(\Cc))\simeq \TwAr(\N(\Cc))$, no matter how you define the right-hand side. So the notational overload checks out. If you use \cref{con:HomTwAr}, this equivalence is even an isomorphism of simplicial sets and straightforward to verify. If you use \cref{con:HomInTwoVariables} instead, the proof is still not too hard, but it requires you to know how straightening/unstraightening works under the hood, at least for ordinary categories (in which case straightening/unstraightening is known as the \emph{Grothendieck construction}). 
\end{rem}
Let's do three quick reality checks for our newly constructed functor $\Hom_\Cc$:
\begin{lem}\label{lem:HomRealityCheck}
	Let $\Hom_\Cc\colon \Cc^\op\times\Cc\rightarrow\cat{An}$ be the functor from \cref{con:HomInTwoVariables} or from \cref{con:HomTwAr}. For all $x,y\in\Cc$, the restrictions
	\begin{equation*}
		\Hom_\Cc|_{\{x\}\times\Cc}\colon \Cc\longrightarrow\cat{An}\quad\text{and}\quad \Hom_\Cc|_{\Cc^\op\times\{y\}}\colon \Cc^\op\longrightarrow \cat{An}
	\end{equation*}
	agree with the functors $\Hom_\Cc(x,-)$ and $\Hom_\Cc(-,y)$ constructed in \cref{exm:Straightening}\cref{enum:SliceLeftFibration}.
\end{lem}
\begin{proof}[Proof sketch, assuming \cref{con:HomInTwoVariables}]
	It's straightforward to see from the construction that $\Hom_\Cc|_{\Cc^\op\times\{y\}}\colon \Cc^\op\rightarrow\cat{An}$ is the straightening of the right fibration $\Cc_{/y}\rightarrow \Cc$, which is also the definition of $\Hom_\Cc(-,y)$ in \cref{exm:Straightening}\cref{enum:SliceLeftFibration}. Now let $\Uu\rightarrow\Cc$ be the unstraightening of $\Hom_\Cc|_{\{x\}\times\Cc}$. Note that evaluating a functor $T\colon\Cc^\op\rightarrow\cat{An}$ at $x\in \Cc^\op$ is the same as restriction along $\F(\Cc^\op,\cat{An})\rightarrow\F(\{x\},\cat{An})\simeq \cat{An}$. By the dual of \cref{thm:Straightening}\cref{enum:LeftStraightening}, this corresponds to the pullback functor $x^*\colon \cat{Right}(\Cc)\rightarrow\cat{Right}(\{x\})\simeq \cat{An}$ under the right straightening equivalence. So $\Hom_\Cc|_{\{x\}\times\Cc}$ can be described as the composition
	\begin{equation*}
		\Hom_\Cc|_{\{x\}\times\Cc}\colon\Cc\xrightarrow{\Cc_{/-}}\cat{Right}(\Cc)\overset{x^*}{\longrightarrow}\cat{Right}\bigl(\{x\}\bigr)\simeq \cat{An}\,.
	\end{equation*}
	By \enquote{inspection}\footnote{Unfortunately, verifying that the above diagram is a homotopy pullback requires us to know a little more about how the straightening/unstraightening equivalence is constructed. The idea is to rewrite the equivalence $\Hom_\Cc|_{\{x\}\times\Cc}\simeq x^*\circ (\Cc_{/-})$ as a pullback $\Hom_\Cc|_{\{x\}\times\Cc}\simeq (\Cc_{/-})\times_{\const \Cc}\const \{x\}$ in the functor quasi-category $\F(\Cc,\cat{Cat}_\infty)$ and then to transform this into a pullback in the quasi-category $\cat{Cocart}(\Cc)$ via \cref{thm:Straightening}\cref{enum:CocartesianStraightening}. This immediately yields that the diagram is a pullback in $\cat{Cocart}(\Cc)$, hence a homotopy pullback of quasi-categories. However, to make this argument work as stated, we would need \cref{lem:ColimitsInFunctorCategories} below, which would lead to circular reasoning. So instead, one has to show that $x^*\circ (\Cc_{/-})$ can be written as a homotopy pullback in a suitable simplicial model category whose underlying quasi-category (in the sense of \cref{rem:SimplicialModelCategory,rem:ModelCategoryUnderlyingInftyCategory}) is $\F(\Cc,\cat{Cat}_\infty)$. In fact, the proof of \cref{thm:Straightening} works by deducing it from a Quillen equivalence between simplicial model categories \ldots
	}, this means that the following diagram is a homotopy pullback:
	\begin{equation*}
		\begin{tikzcd}
			\Uu\dar\rar\drar[hpullback] & \{x\}\times\Cc\dar\\
			\Ar(\Cc)\rar["{(s,t)}"] & \Cc\times\Cc
		\end{tikzcd}
	\end{equation*}
	To compute this homotopy pullback, we use model category fact~\cref{par:HomotopyPullback}\cref{enum:HomotopyPullbackOfQuasicategories}: We claim that $(s,t)\colon \Ar(\Cc)\rightarrow \Cc\times\Cc$ is already an isofibration. Indeed, it's an inner fibration by \cref{cor:FKanFibration} and lifting of equivalences follows easily from \cref{thm:EquivalencePointwise}. So we can just take the pullback on the nose, which is $\Cc_{x/}$ by \cref{par:HomInQuasiCategories}. But $\Hom_\Cc(x,-)\colon \Cc\rightarrow \cat{An}$ was defined to be the straightening of $t\colon \Cc_{x/}\rightarrow \Cc$. This shows $\Hom_\Cc|_{\{x\}\times\Cc}\simeq \Hom_\Cc(x,-)$.	
\end{proof}
\begin{proof}[Proof sketch, assuming \cref{con:HomTwAr}]
	In this case, we need to show that the pullbacks of $(s,t)\colon \TwAr(\Cc)\rightarrow \Cc^\op\times\Cc$ along $\{x\}\times\Cc\rightarrow\Cc^\op\times\Cc$ and $\Cc^\op\times\{y\}\rightarrow\Cc^\op\times\Cc$ are equivalent to $\Cc_{x/}\rightarrow\Cc$ and $(\Cc_{/y})^\op\rightarrow\Cc^\op$, respectively. This is not quite trivial; see \cite[Proposition~\HAthm{5.2.1.10}]{HA} or \cite[Lemma~4.2.7]{Land}.
\end{proof}
\begin{lem}\label{lem:HomFunctorial}
	Let $F\colon \Cc\rightarrow\Dd$ be a functor of quasi-categories. Then the natural maps $\Hom_\Cc(x,y)\rightarrow \Hom_\Dd(F(x),F(y))$ assemble into a natural transformation
	\begin{equation*}
		\Hom_\Cc(-,-)\Longrightarrow \Hom_\Dd\bigl(F(-),F(-)\bigr)
	\end{equation*}
	in $\F(\Cc^\op\times\Cc,\cat{An})$. Here $\Hom_\Cc$ and $\Hom_\Dd$ are the functors from Constructions~\labelcref{con:HomInTwoVariables} or~\labelcref{con:HomTwAr}.
\end{lem}
\begin{proof}[Proof sketch, assuming \cref{con:HomInTwoVariables}]
	Consider the morphism $t\colon \Cc\times_{F,\Dd,s}\Ar(\Dd)\rightarrow \Dd$. It is a cocartesian fibration, which can be shown using \cref{lem:HomInArrowCategories,lem:CocartesianMorphisms} in the same way as \cref{exm:Straightening}\cref{enum:ArCocartesianFibration}. Hence the following diagram is a diagram of cocartesian fibrations over $\Cc$:
	\begin{equation*}
		\begin{tikzcd}
			\Ar(\Cc)\drar["t"']\rar & \Cc\times_{F,\Dd,s}\Ar(\Dd)\times_{t,\Dd,F}\Cc\dar["t"]\dar[phantom,""{name=A}]\rar["{(s,t)}"]\arrow[from=1-1,to=A,commutes,pos=0.7]\arrow[from=1-3,to=A,commutes,pos=0.7]& \Cc\times\Cc \dlar["\pr_2"]\\
			& \Cc & 
		\end{tikzcd}
	\end{equation*}
	After unravelling \cref{con:HomInTwoVariables} and using the fact that precompositions correspond to pullbacks under straightening/unstraightening (see \cref{thm:Straightening}\cref{enum:CocartesianStraightening}), the diagram above will induce the desired natural transformation $\Hom_\Cc(-,-)\Rightarrow \Hom_\Dd(F(-),F(-))$, provided we can show the following claim:
	\begin{alphanumerate}\itshape
		\item[\boxtimes] \!The cocartesian straightening of the middle vertical arrow is the composite functor\label{enum:HomNaturalTransformation}
		\begin{equation*}
			\Cc\overset{F}{\longrightarrow}\Dd\xrightarrow{\Dd_{/-}}\cat{Cat}_{\infty/\Dd}\overset{F^*}{\longrightarrow}\cat{Cat}_{\infty/\Cc}\,.
		\end{equation*}
	\end{alphanumerate}
	To prove \cref{enum:HomNaturalTransformation} it's enough to show that the straightening of $t\colon \Cc\times_{F,\Dd,s}\Ar(\Dd)\rightarrow \Dd$ is $F^*\circ \Dd_{/-}$, since once again, precompositions correspond to pullbacks. Now the following diagram is a homotopy pullback:
	\begin{equation*}
		\begin{tikzcd}
			\Cc\times_{F,\Dd,s}\Ar(\Dd)\dar\rar\drar[hpullback] & \Cc\times\Dd\dar["F\times {\id_\Dd}"]\\
			\Ar(\Dd)\rar["{(s,t)}"] & \Dd\times\Dd
		\end{tikzcd}
	\end{equation*}
	(in fact, it's a pullback on the nose, and $(s,t)\colon \Ar(\Dd)\rightarrow \Dd\times\Dd$ is an isofibration; see the argument in the proof of \cref{lem:HomRealityCheck}). By a similar \enquote{inspection} as in the proof of \cref{lem:HomRealityCheck}, this observation shows that the straightening of $t\colon \Cc\times_{F,\Dd,s}\Ar(\Dd)\rightarrow \Dd$ is indeed $F^*\circ \Dd_{/-}$, thus proving \cref{enum:HomNaturalTransformation}.
\end{proof}
\begin{proof}[Proof sketch, assuming \cref{con:HomTwAr}]
	It's clear from the construction that $F$ induces a map $\TwAr(\Cc)\rightarrow\TwAr(\Dd)$. By the universal property of pullbacks, this factors over a map
	\begin{equation*}
		\TwAr(\Cc)\longrightarrow (\Cc^\op\times\Cc)\times_{F^\op\times F,\Dd^\op\times\Dd,(s,t)}\TwAr(\Dd)\,.
	\end{equation*}
	The latter is a morphism of left fibrations over $\Cc^\op\times\Cc$. Since precompositions correspond to pullbacks under straightening/unstraightening (see \cref{thm:Straightening}\cref{enum:CocartesianStraightening}), we get a natural transformation $\Hom_\Cc(-,-)\Rightarrow \Hom_\Dd(-,-)\circ (F^\op\times F)\simeq \Hom_\Dd(F(-),F(-))$, as desired.
\end{proof}
\begin{lem}\label{lem:HomNaturalTransformation}
	Let $F,G\colon \Cc\rightarrow \Dd$ be functors of quasi-categories and let $\eta\colon F\Rightarrow G$ be a natural transformation. Then the natural transformation from \cref{lem:HomFunctorial} as well as $\eta_*$, postcomposition with $\eta$, and $\eta^*$, precomposition with $\eta$, fit into a commutative diagram
	\begin{equation*}
		\begin{tikzcd}
			\Hom_\Cc(-,-)\doublear["F"{black,swap,left=0.1em}]{d}\doublear["G"{black,above=0.1em}]{r}\drar[commutes] & \Hom_\Dd\bigl(G(-),G(-)\bigr)\doublear["\eta^*"{black,right=0.1em}]{d}\\
			\Hom_\Dd\bigl(F(-),F(-)\bigr)\doublear["\eta_*"{black,above=0.1em}]{r} & \Hom_\Dd\bigl(F(-),G(-)\bigr)
		\end{tikzcd}
	\end{equation*}
	in the quasi-category $\F(\Cc^\op\times\Cc,\cat{An})$.
\end{lem}
\begin{proof}[Proof sketch]
	First observe that if $\Cc'$ is another quasi-category, then $\Hom_{\Cc\times\Cc'}\simeq \Hom_\Cc\times\Hom_{\Cc'}$ holds in $\F((\Cc\times\Cc')^\op\times (\Cc\times\Cc'),\cat{An})$. Depending on whether you use \cref{con:HomInTwoVariables} or \cref{con:HomTwAr}, this basically reduces to the observations that $\Ar(\Cc\times\Cc')\cong \Ar(\Cc)\times\Ar(\Cc')$ and $\TwAr(\Cc\times\Cc')\cong \TwAr(\Cc)\times\TwAr(\Cc')$, respectively, but in each case you need some model-category arguments to do the reduction, similar to the \enquote{inspection} in the proof of \cref{lem:HomRealityCheck}. We'll skip these arguments.
	
	Now we regard $\eta$ as a functor $\eta\colon \Delta^1\times\Cc\rightarrow \Dd$. Then \cref{lem:HomFunctorial} can be applied to $\eta$ to obtain a natural transformation
	\begin{equation*}
		\Hom_{\Delta^1\times\Cc}(-,-)\Longrightarrow \Hom_\Dd\bigl(\eta(-),\eta(-)\bigr)
	\end{equation*}
	in the functor quasi-category $\F((\Delta^1\times\Cc)^\op\times(\Delta^1\times\Cc),\cat{An})$. Applying the usual \enquote{currying} isomorphism, we obtain $\F((\Delta^1\times\Cc)^\op\times(\Delta^1\times\Cc),\cat{An})\cong \F((\Delta^1)^\op\times\Delta^1,\F(\Cc^\op\times\Cc,\cat{An}))$. Since $(\Delta^1)^\op\times\Delta^1\cong \Delta^1\times\Delta^1\cong \square^2$, an object in $\F((\Delta^1)^\op\times\Delta^1,\F(\Cc^\op\times\Cc,\cat{An}))$ corresponds to a commutative square in $\F(\Cc^\op\times\Cc,\cat{An})$. By unravelling the constructions, $\Hom_{\Delta^1\times\Cc}(-,-)$ corresponds to the following square:
	\begin{equation*}
		\begin{tikzcd}
			\Hom_\Cc(-,-)\times\Hom_{\Delta^1}(1,0)\doublear{r}\doublear{d}\drar[commutes] & \Hom_\Cc(-,-)\times \Hom_{\Delta^1}(1,1)\doublear{d}\\
			\Hom_\Cc(-,-)\times \Hom_{\Delta^1}(0,0)\doublear{r} & \Hom_\Cc(-,-)\times \Hom_{\Delta^1}(0,1)
		\end{tikzcd}
	\end{equation*}
	Indeed, this follows from the fact that $\Hom_{\Delta^1\times\Cc}\simeq \Hom_{\Delta^1}\times\Hom_\Cc$, as we've checked above; also note that $\Hom_{\Delta^1}(1,0)$ sits in the top left corner rather than $\Hom_{\Delta^1}(0,0)$ because of the way in which we identified $(\Delta^1)^\op\times\Delta^1$ with $\square^2$. Now observe that $\Hom_{\Delta^1}(1,0)\cong \emptyset$, whereas $\Hom_{\Delta^1}(0,0)\cong \Hom_{\Delta^1}(0,1)\cong \Hom_{\Delta^1}(1,1)\cong *$. This implies that the top left corner of the diagram above is $\const \emptyset$, whereas the other corners are given by $\Hom_\Cc(-,-)$. Similarly, $\Hom_\Dd(\eta(-),\eta(-))$ corresponds to the following commutative square:
	\begin{equation*}
		\begin{tikzcd}
			\Hom_\Dd\bigl(G(-),F(-)\bigr)\doublear["\eta_*"{black,above=0.1em}]{r}\doublear["\eta^*"{black,left=0.1em}]{d}\drar[commutes] & \Hom_\Dd\bigl(G(-),G(-)\bigr)\doublear["\eta^*"{black,right=0.1em}]{d}\\
			\Hom_\Dd\bigl(F(-),F(-)\bigr)\doublear["\eta_*"{black,above=0.1em}]{r} & \Hom_\Dd\bigl(F(-),G(-)\bigr)
		\end{tikzcd}
	\end{equation*}
	The natural transformation $\Hom_{\Delta^1\times\Cc}(-,-)\Rightarrow \Hom_\Dd(\eta(-),\eta(-))$ from \cref{lem:HomFunctorial} corresponds to a morphism between these commutative squares. By inspection, this yields the desired commutative square.
\end{proof}
%The embedding version of Yoneda's lemma is now a simple consequence.
\begin{cor}\label{cor:YonedaEmbeddingFullyFaithful}
	For every quasi-category $\Cc$, the Yoneda embedding $\Yo_\Cc\colon \Cc\rightarrow\F(\Cc^\op,\cat{An})$ is fully faithful.
\end{cor}
\begin{proof}[Proof sketch]
	We must show that $\Yo_\Cc$ induces equivalences
	\begin{equation*}
		\Hom_\Cc(x,y)\overset{\simeq}{\longrightarrow} \Hom_{\F(\Cc^\op,\cat{An})}\bigl(\Hom_\Cc(-,x),\Hom_\Cc(-,y)\bigr)
	\end{equation*}
	for all $x,y\in\Cc$. It's clear from \cref{thm:Yoneda} that both sides are equivalent via evaluation at $\id_x$. If you go with \cref{con:HomInTwoVariables}, it's straightforward to see that the morphism induced by $\Yo_\Cc$ is an inverse to evaluation at $\id_x$, so it is an equivalence too. If you prefer \cref{con:HomTwAr}, this needs a little more work, which we omit.
\end{proof}
We finish this section with two final remarks.
\begin{numpar}[Model independence.]\label{par:ModelIndependence}
	Recall from \cref{par:ModelIndependenceIntro} that, at least in an ideal version of these notes, we planned to proceed via the following steps:
	\begin{alphanumerate}
		\item First, throughout \crefrange{sec:SimplicialSets}{sec:Straightening}, we would set up the framework of quasi-categories.\label{enum:SetupQuasicategoriesNotIntro}
		\item After that, we would identify a few key model-independent statements and prove (or black box) them in the model of quasi-categories.\label{enum:KeyStatementsNotIntro}
		\item Finally, starting from \cref{sec:InftyCategoryTheory}, all further proofs would be done in a model-independent fashion.\label{enum:AllProofsModelIndependentNotIntro}
	\end{alphanumerate}
	Step~\cref{enum:SetupQuasicategoriesNotIntro} is done by now, whereas step~\cref{enum:AllProofsModelIndependentNotIntro} lays ahead. So let's talk about what the key statements from step~\cref{enum:KeyStatementsNotIntro} are supposed to be. Of course, \cref{thm:EquivalencePointwise,thm:EquivalenceFullyFaithfulEssentiallySurjective} are among them, as are \cref{thm:Yoneda} as well as Lemmas~\labelcref{lem:HomRealityCheck}, \labelcref{lem:HomFunctorial}, and \labelcref{lem:HomNaturalTransformation}. In each of these cases, it's clear that the statement is really a model-independent one, even though we formulated them in the model of quasi-categories. Somewhat surprisingly though, \cref{thm:Straightening} can also be reformulated in a model-independent way. In particular, there are model-independent definitions of cocartesian and left fibrations! Indeed, if $p\colon \Uu\rightarrow \Cc$ is a functor of $\infty$-categories, \cref{lem:CocartesianMorphisms} provides a model-independent definition of a morphism $\varphi\colon u\rightarrow v$ in $\Uu$ being $p$-cocartesian.%\footnote{Of course, instead of \enquote{homotopy pullback}, one has to say \enquote{pullback square in the $\infty$-category $\cat{An}$}, which is a model-independent notion as will hopefully become clear in \cref{def:Colimits}.}
	The condition that cocartesian lifts exist (\cref{def:Cocartesian}\cref{enum:CocartesianFibration}) can be replaced by the condition that
	\begin{equation*}
		\begin{tikzcd}
			\Ar^{(\mathrm{cocart})}(\Uu)\rar\dar\drar[pullback] & \Ar(\Cc)\dar["s"]\\
			\Uu\rar["p"] & \Cc
		\end{tikzcd}
	\end{equation*}
	is a pullback in $\cat{Cat}_\infty$, where $\Ar^{(\mathrm{cocart})}(\Uu)\subseteq \Ar(\Uu)$ is the full sub-$\infty$-category spanned by the $p$-cocartesian morphisms. This model-independent definition of cocartesian fibrations recovers \cref{def:Cocartesian}, as we'll see in \cref{lem:CocartesianModelIndependent} below. Finally, in light of \cref{lem:CocartesianLeft}, we can redefine $p$ to be a \emph{left fibration} if it is a cocartesian fibration and $\Ar^{(\mathrm{cocart})}(\Uu)\subseteq \Ar(\Uu)$ is an equivalence of $\infty$-categories.
	
	
	In particular, \cref{thm:Straightening} can be reinterpreted as a model-independent statement about an equivalence of $\infty$-categories $\cat{Cocart}(\Cc)\simeq \Fun(\Cc,\cat{Cat}_\infty)$ for any $\infty$-category $\Cc$. This statement absolutely belongs to step~\cref{enum:KeyStatementsNotIntro} and it will play a much more prominent role in our treatment of $\infty$-categories than it does in ordinary category theory.
	
	The example of cocartesian and left fibrations is only the first of many instances where our constructions with quasi-categories can be retconned into model-independent constructions. We'll see more of that in model category fact~\cref{par:HomotopyPushout}.
\end{numpar}
\begin{lem}\label{lem:CocartesianModelIndependent}
	The functor $\Ar^{(\mathrm{cocart})}(\Uu)\rightarrow \Uu\times_{\Cc,s}\Ar(\Cc)$ is always fully faithful \embrace{where the pullback is taken in $\cat{Cat}_\infty$}. Furthermore, the following conditions are equivalent:
	\begin{alphanumerate}
		\item $\Ar^{(\mathrm{cocart})}(\Uu)\rightarrow \Uu\times_{\Cc,s}\Ar(\Cc)$ is also essentially surjective. In particular, it must be an equivalence \embrace{by \cref{thm:EquivalenceFullyFaithfulEssentiallySurjective}}, so that $p\colon \Uu\rightarrow \Cc$ is a cocartesian fibration in the model-independent sense.\label{enum:CocartesianModelIndependent}
		\item For every factorisation $p\colon \Uu\rightarrow \Uu'\rightarrow \Cc$ into an equivalence of quasi-categories followed by an isofibration, $\Uu'\rightarrow \Cc$ is a cocartesian fibration in the old sense.\label{enum:CocartesianAllFactorisations}
		\item For some factorisation $p\colon \Uu\rightarrow \Uu'\rightarrow \Cc$ into an equivalence of quasi-categories followed by an isofibration, $\Uu'\rightarrow \Cc$ is a cocartesian fibration in the old sense.\label{enum:CocartesianSomeFactorisations}
	\end{alphanumerate}
\end{lem}
\begin{proof}[Proof sketch]
	To show that $\Ar^{(\mathrm{cocart})}(\Uu)\rightarrow \Uu\times_{\Cc,s}\Ar(\Cc)$ is fully faithful, use \cref{lem:HomInArrowCategories} to compute $\Hom$ on either side and \cref{lem:CocartesianMorphisms} to show that they coincide. This is fun to figure out yourself so we'll leave it to you.
	
	The implication \cref{enum:CocartesianAllFactorisations} $\Rightarrow$ \cref{enum:CocartesianSomeFactorisations} is trivial. For \cref{enum:CocartesianSomeFactorisations} $\Rightarrow$ \cref{enum:CocartesianModelIndependent}, it's enough to show that the functor $\Ar^{(\mathrm{cocart})}(\Uu')\rightarrow \Uu'\times_{\Cc,s}\Ar(\Cc)$ is essentially surjective, because $\Uu\rightarrow \Uu'$ is an equivalence of quasi-categories. Since $\Uu'\rightarrow \Cc$ is a cocartesian fibration, it's an isofibration too, hence the pullback $\Uu'\times_{\Cc,s}\Ar(\Cc)$ in $\cat{Cat}_\infty$ can also be taken in simplicial sets (see~\cref{par:HomotopyPullback}\cref{enum:HomotopyPullbackOfQuasicategories}). Furthermore, the condition from \cref{def:Cocartesian}\cref{enum:CocartesianFibration} translates into $\Ar^{(\mathrm{cocart})}(\Uu')\rightarrow \Uu'\times_{\Cc,s}\Ar(\Cc)$ being surjective on $0$-simplices. Hence it must be an essentially surjective functor of quasi-categories.
	
	By the same reasoning, to show \cref{enum:CocartesianModelIndependent} $\Rightarrow$ \cref{enum:CocartesianAllFactorisations}, we must show that for all factorisations $p\colon \Uu\rightarrow \Uu'\rightarrow \Cc$ into an equivalence followed by an isofibration, the map of simplicial sets $\Ar^{(\mathrm{cocart})}(\Uu')\rightarrow \Uu'\times_{\Cc,s}\Ar(\Cc)$ is surjective on $0$-simplices. The condition from~\cref{enum:CocartesianModelIndependent} tells us this map is an equivalence of quasi-categories. In particular, it hits every equivalence class of $0$-simplices. To show that it really hits every $0$-simplex, it then suffices to show that $\Ar^{(\mathrm{cocart})}(\Uu')\rightarrow \Uu'\times_{\Cc,s}\Ar(\Cc)$ is an isofibration. Observe that $\Ar(\Uu')\rightarrow\Uu'\times_{\Cc,s}\Ar(\Cc)$ is an isofibration---it's an inner fibration by \cref{cor:FKanFibration} and lifting of equivalences can be shown by a straightforward argument, using that the isofibration $\Uu'\rightarrow \Cc$ admits lifting of equivalences too. Since $\Ar^{(\mathrm{cocart})}(\Uu')\subseteq \Ar(\Uu')$ is a full sub-quasi-category in the sense of \cref{par:SubQuasiCategories} and furthermore closed under equivalences, the map $\Ar^{(\mathrm{cocart})}(\Uu')\rightarrow \Ar(\Uu')$ must be an isofibration. It follows that $\Ar^{(\mathrm{cocart})}(\Uu')\rightarrow \Uu'\times_{\Cc,s}\Ar(\Cc)$ is an isofibration too, as desired.
\end{proof}

%A functor $p\colon \Uu\rightarrow \Cc$ of quasi-categories is a cocartesian fibration in the new sense if and only if $\Uu'\rightarrow \Cc$ is a cocartesian fibration in the old sense, where $p\colon \Uu\rightarrow \Uu'\rightarrow \Cc$ is any factorisation into an equivalence followed by an isofibration. A proof of this uses \cref{thm:EquivalenceFullyFaithfulEssentiallySurjective} and \cref{lem:HomInArrowCategories} and is not particularly difficult. You can find it in my notes on Fabian's $\K$-Theory lecture, see \cite[Lemma*~\href{https://florianadler.github.io/AlgebraBonn/KTheory.pdf\#smallerdummy.1.24.2}{I.24$b$}]{KTheory}.

%Furthermore, once we know how to define pullbacks in $\infty$-categories (\cref{def:Colimits}), we see that the pullback diagram from \cref{par:HomInQuasiCategories} defining $\Cc_{x/}$ and $\Hom_\Cc(x,y)$ is also a pullback in $\cat{Cat}_\infty$; this follows from model category fact~\cref{par:HomotopyPullback} since $(s,t)\colon\Ar(\Cc)\rightarrow \Cc\times\Cc$ is an isofibration (see the argument in the proof of \cref{lem:HomRealityCheck}). So our definitions of $\Cc_{x/}$ and $\Hom_\Cc(x,y)$ immediately generalise to any other model.
\begin{numpar}[Functoriality of the Yoneda lemma.]\label{par:YonedaFunctorial}
	Let $\Cc$ be a quasi-category. Let's write $\Fun(\Cc^\op,\cat{An})\eqqcolon \PSh(\Cc)$ for the \emph{$\infty$-category of presheaves on $\Cc$}.\footnote{In \cref{sec:CategoryTheory} we had defined $\PSh(\Cc)\coloneqq \Fun(\Cc,\cat{Set})$ for ordinary categories. This is, of course, \emph{not} compatible with the new definition. In the following, all presheaves will be presheaves of animae and we'll never talk about presheaves of sets again.} For an object $x\in\Cc$ and a presheaf $E\colon \Cc^\op\rightarrow \cat{An}$, the dual of \cref{thm:Yoneda} tells us that
	\begin{equation*}
		\ev_{\id_x}\colon \Hom_{\PSh(\Cc)}\bigl(\Yo_\Cc(x),E\bigr)\overset{\simeq}{\longrightarrow}E(x)
	\end{equation*}
	is an equivalence. It turns out that this equivalence is functorial both in $x$ and in $E$. Of course, thanks to \cref{thm:EquivalencePointwise}, the only difficulty lies in making the map $\ev_{\id_x}$ functorial. It's straightforward to make it functorial in $E$, but I couldn't find any easy argument for functoriality in $x$. So if you do, please tell me!
	
	One way of producing this natural transformation is to construct it on the level of simplicially enriched functors. Implicitly, this requires that the construction of $\Hom_\Cc\colon \Cc^\op\times\Cc\rightarrow \cat{An}$ via simplicially enriched functors agrees with our construction; at least in the case of \cref{con:HomTwAr}, this was done by Lurie \cite[Proposition~\HAthm{5.2.1.11}]{HA}. A somewhat nicer argument, which is at least model-independent (but makes heavy use of \cref{sec:InftyCategoryTheory}), goes as follows: Let's instead construct an inverse of $\ev_{\id_x}$ in a functorial way. That is, we are looking for a natural transformation
	\begin{equation*}
		\eta\colon\id_{\PSh(\Cc)}\Longrightarrow\Hom_{\PSh(\Cc)}\bigl(\Yo_\Cc(-),-\bigr)\,.
	\end{equation*}
	We'll see in \cref{lem:PresheafColimitOfRepresentables} that $\id_{\PSh(\Cc)}$ is the $\infty$-categorical left Kan extension of $\Yo_\Cc$ along itself. So it's enough to construct a natural transformation $\Yo_\Cc\Rightarrow \Yo_\Cc^*\Hom_{\PSh(\Cc)}(\Yo_\Cc(-),-)$; this can be taken to be the image of the natural transformation $\Hom_\Cc(-,-)\Rightarrow \Hom_{\PSh(\Cc)}(\Yo_\Cc(-),\Yo_\Cc(-))$ from \cref{lem:HomFunctorial} under the \enquote{currying} equivalence $\Fun(\Cc^\op\times\Cc,\cat{An})\simeq \Fun(\Cc,\PSh(\Cc))$.
	
	Even though this argument looks super fishy, I think it doesn't run into vicious circles. As far as I can see, we only used material up to \cref{lem:PresheafColimitOfRepresentables}, whereas the first time we need functoriality of the Yoneda lemma will be, conveniently, in \cref{lem:LanAlongYonedaHasRightAdjoint}.
\end{numpar}



